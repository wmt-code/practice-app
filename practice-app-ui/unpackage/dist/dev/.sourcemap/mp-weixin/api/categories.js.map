{"version":3,"file":"categories.js","sources":["api/categories.js"],"sourcesContent":["import { request } from './http';\n\nfunction normalizeNode(node = {}) {\n  return {\n    id: node.id,\n    name: node.name,\n    parentId: node.parentId,\n    badgeText: node.badgeText,\n    questionCount: node.questionCount || 0,\n    finishedCount: node.finishedCount || 0,\n    children: Array.isArray(node.children)\n      ? node.children.map((child) => normalizeNode(child))\n      : [],\n  };\n}\n\nexport async function fetchCategoryTree() {\n  const tree = await request({ url: '/categories/tree', method: 'GET' });\n  if (!Array.isArray(tree)) return [];\n  return tree.map((item) => normalizeNode(item));\n}\n\nexport async function fetchCategories() {\n  const list = await request({ url: '/categories', method: 'GET' });\n  if (!Array.isArray(list)) return [];\n  return list.map((item) => ({\n    id: item.id,\n    name: item.name,\n    description: item.description,\n    parentId: item.parentId,\n    badgeText: item.badgeText,\n    sort: item.sort,\n  }));\n}\n\nexport function flattenCategoryTree(tree = []) {\n  const result = [];\n  const walk = (nodes) => {\n    (nodes || []).forEach((node) => {\n      result.push(node);\n      if (node.children && node.children.length) {\n        walk(node.children);\n      }\n    });\n  };\n  walk(tree);\n  return result;\n}\n\nexport function categoryNameById(list = [], id) {\n  return list.find((item) => String(item.id) === String(id))?.name || '';\n}\n"],"names":["request"],"mappings":";;AAEA,SAAS,cAAc,OAAO,IAAI;AAChC,SAAO;AAAA,IACL,IAAI,KAAK;AAAA,IACT,MAAM,KAAK;AAAA,IACX,UAAU,KAAK;AAAA,IACf,WAAW,KAAK;AAAA,IAChB,eAAe,KAAK,iBAAiB;AAAA,IACrC,eAAe,KAAK,iBAAiB;AAAA,IACrC,UAAU,MAAM,QAAQ,KAAK,QAAQ,IACjC,KAAK,SAAS,IAAI,CAAC,UAAU,cAAc,KAAK,CAAC,IACjD,CAAE;AAAA,EACV;AACA;AAEO,eAAe,oBAAoB;AACxC,QAAM,OAAO,MAAMA,SAAAA,QAAQ,EAAE,KAAK,oBAAoB,QAAQ,MAAK,CAAE;AACrE,MAAI,CAAC,MAAM,QAAQ,IAAI;AAAG,WAAO,CAAA;AACjC,SAAO,KAAK,IAAI,CAAC,SAAS,cAAc,IAAI,CAAC;AAC/C;AAEO,eAAe,kBAAkB;AACtC,QAAM,OAAO,MAAMA,SAAAA,QAAQ,EAAE,KAAK,eAAe,QAAQ,MAAK,CAAE;AAChE,MAAI,CAAC,MAAM,QAAQ,IAAI;AAAG,WAAO,CAAA;AACjC,SAAO,KAAK,IAAI,CAAC,UAAU;AAAA,IACzB,IAAI,KAAK;AAAA,IACT,MAAM,KAAK;AAAA,IACX,aAAa,KAAK;AAAA,IAClB,UAAU,KAAK;AAAA,IACf,WAAW,KAAK;AAAA,IAChB,MAAM,KAAK;AAAA,EACZ,EAAC;AACJ;AAEO,SAAS,oBAAoB,OAAO,IAAI;AAC7C,QAAM,SAAS,CAAA;AACf,QAAM,OAAO,CAAC,UAAU;AACtB,KAAC,SAAS,CAAA,GAAI,QAAQ,CAAC,SAAS;AAC9B,aAAO,KAAK,IAAI;AAChB,UAAI,KAAK,YAAY,KAAK,SAAS,QAAQ;AACzC,aAAK,KAAK,QAAQ;AAAA,MACnB;AAAA,IACP,CAAK;AAAA,EACL;AACE,OAAK,IAAI;AACT,SAAO;AACT;AAEO,SAAS,iBAAiB,OAAO,CAAE,GAAE,IAAI;;AAC9C,WAAO,UAAK,KAAK,CAAC,SAAS,OAAO,KAAK,EAAE,MAAM,OAAO,EAAE,CAAC,MAAlD,mBAAqD,SAAQ;AACtE;;;;;"}