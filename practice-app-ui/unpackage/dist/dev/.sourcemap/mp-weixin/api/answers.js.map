{"version":3,"file":"answers.js","sources":["api/answers.js"],"sourcesContent":["import { request } from './http';\nimport { normalizeQuestion } from './questions';\n\nexport async function submitAnswer({ questionId, chosen = [], timeSpent = 0 }) {\n  if (!questionId) {\n    throw new Error('缺少题目 ID');\n  }\n  const res = await request({\n    url: '/answers/submit',\n    method: 'POST',\n    data: {\n      questionId,\n      userAnswerValues: chosen,\n      timeSpent,\n    },\n  });\n  return {\n    questionId: res?.questionId,\n    questionTitle: res?.questionTitle,\n    correct: res?.correct === true,\n    isCorrect: res?.correct === true,\n    correctAnswer: res?.correctAnswer || [],\n    userAnswer: res?.userAnswer || [],\n    score: res?.score || 0,\n    timeSpent: res?.timeSpent || 0,\n    explanation: res?.explanation || res?.analysis || '暂无解析',\n    answeredAt: res?.answeredAt,\n    difficulty: res?.difficulty,\n  };\n}\n\nexport async function fetchAnswerHistory({ page = 1, size = 10, categoryId } = {}) {\n  const query = { page, size };\n  if (categoryId !== undefined && categoryId !== null && categoryId !== '') {\n    query.categoryId = categoryId;\n  }\n  const res = await request({\n    url: '/answers/history',\n    method: 'GET',\n    data: query,\n  });\n  const records = Array.isArray(res?.records)\n    ? res.records.map((item) => ({\n        questionId: item.questionId,\n        categoryId: item.categoryId,\n        questionTitle: item.questionTitle,\n        correct: item.correct === true,\n        isCorrect: item.correct === true,\n        userAnswer: item.userAnswer,\n        score: item.score || 0,\n        timeSpent: item.timeSpent || 0,\n        difficulty: item.difficulty,\n        answeredAt: item.answeredAt,\n      }))\n    : [];\n  return {\n    page: res?.page || page,\n    size: res?.size || size,\n    total: res?.total || records.length,\n    records,\n  };\n}\n\nexport async function fetchRetryQuestions(ids) {\n  const res = await request({\n    url: '/user-wrong-answers/retry',\n    method: 'POST',\n    data: ids && ids.length ? { ids } : {},\n  });\n  return Array.isArray(res) ? res.map((item) => normalizeQuestion(item)) : [];\n}\n"],"names":["request"],"mappings":";;AAGO,eAAe,aAAa,EAAE,YAAY,SAAS,CAAA,GAAI,YAAY,KAAK;AAC7E,MAAI,CAAC,YAAY;AACf,UAAM,IAAI,MAAM,SAAS;AAAA,EAC1B;AACD,QAAM,MAAM,MAAMA,iBAAQ;AAAA,IACxB,KAAK;AAAA,IACL,QAAQ;AAAA,IACR,MAAM;AAAA,MACJ;AAAA,MACA,kBAAkB;AAAA,MAClB;AAAA,IACD;AAAA,EACL,CAAG;AACD,SAAO;AAAA,IACL,YAAY,2BAAK;AAAA,IACjB,eAAe,2BAAK;AAAA,IACpB,UAAS,2BAAK,aAAY;AAAA,IAC1B,YAAW,2BAAK,aAAY;AAAA,IAC5B,gBAAe,2BAAK,kBAAiB,CAAE;AAAA,IACvC,aAAY,2BAAK,eAAc,CAAE;AAAA,IACjC,QAAO,2BAAK,UAAS;AAAA,IACrB,YAAW,2BAAK,cAAa;AAAA,IAC7B,cAAa,2BAAK,iBAAe,2BAAK,aAAY;AAAA,IAClD,YAAY,2BAAK;AAAA,IACjB,YAAY,2BAAK;AAAA,EACrB;AACA;AAEO,eAAe,mBAAmB,EAAE,OAAO,GAAG,OAAO,IAAI,WAAY,IAAG,IAAI;AACjF,QAAM,QAAQ,EAAE,MAAM;AACtB,MAAI,eAAe,UAAa,eAAe,QAAQ,eAAe,IAAI;AACxE,UAAM,aAAa;AAAA,EACpB;AACD,QAAM,MAAM,MAAMA,iBAAQ;AAAA,IACxB,KAAK;AAAA,IACL,QAAQ;AAAA,IACR,MAAM;AAAA,EACV,CAAG;AACD,QAAM,UAAU,MAAM,QAAQ,2BAAK,OAAO,IACtC,IAAI,QAAQ,IAAI,CAAC,UAAU;AAAA,IACzB,YAAY,KAAK;AAAA,IACjB,YAAY,KAAK;AAAA,IACjB,eAAe,KAAK;AAAA,IACpB,SAAS,KAAK,YAAY;AAAA,IAC1B,WAAW,KAAK,YAAY;AAAA,IAC5B,YAAY,KAAK;AAAA,IACjB,OAAO,KAAK,SAAS;AAAA,IACrB,WAAW,KAAK,aAAa;AAAA,IAC7B,YAAY,KAAK;AAAA,IACjB,YAAY,KAAK;AAAA,EACzB,EAAQ,IACF;AACJ,SAAO;AAAA,IACL,OAAM,2BAAK,SAAQ;AAAA,IACnB,OAAM,2BAAK,SAAQ;AAAA,IACnB,QAAO,2BAAK,UAAS,QAAQ;AAAA,IAC7B;AAAA,EACJ;AACA;;;"}