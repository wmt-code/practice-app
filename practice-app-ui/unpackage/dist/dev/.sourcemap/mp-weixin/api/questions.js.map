{"version":3,"file":"questions.js","sources":["api/questions.js"],"sourcesContent":["import { request } from './http';\n\nfunction normalizeOptions(raw) {\n  if (!raw) return [];\n  if (Array.isArray(raw)) {\n    return raw.map((opt, idx) => ({\n      value: opt.value || String.fromCharCode(65 + idx),\n      text: opt.label || opt.text || opt.value || '',\n      label: opt.label || opt.text || opt.value || '',\n      correct: opt.correct,\n    }));\n  }\n  if (typeof raw === 'string') {\n    try {\n      const parsed = JSON.parse(raw);\n      return normalizeOptions(parsed);\n    } catch (err) {\n      return [];\n    }\n  }\n  return [];\n}\n\nexport function normalizeQuestion(data = {}) {\n  const typeRaw = String(data.type || '').toLowerCase();\n  let type = data.type;\n  if (typeRaw.includes('multiple')) type = 'multiple';\n  else if (typeRaw.includes('true') || typeRaw.includes('judge')) type = 'truefalse';\n  else if (typeRaw.includes('fill') || typeRaw.includes('short')) type = 'short';\n  else if (typeRaw.includes('single')) type = 'single';\n  return {\n    id: data.id,\n    title: data.content || data.title || '',\n    type,\n    options: normalizeOptions(data.options || data.optionsJson),\n    score: data.score || 0,\n    duration: data.duration || 0,\n    explanation: data.explanation,\n    categoryId: data.categoryId,\n    difficulty: data.difficulty,\n    answer:\n      typeof data.answer === 'string'\n        ? data.answer.split(/[,;\\s]+/).filter(Boolean)\n        : Array.isArray(data.answer)\n          ? data.answer\n          : [],\n  };\n}\n\nexport async function fetchQuestionDetail(id) {\n  const res = await request({ url: `/questions/${id}`, method: 'GET' });\n  return normalizeQuestion(res);\n}\n\nexport async function fetchQuestionPage(params = {}) {\n  const { page = 1, size = 10, categoryId, difficulty, keyword } = params;\n  const res = await request({\n    url: '/questions',\n    method: 'GET',\n    data: { page, size, categoryId, difficulty, keyword },\n  });\n  const records = Array.isArray(res?.records) ? res.records.map((item) => normalizeQuestion(item)) : [];\n  return {\n    page: res?.page || page,\n    size: res?.size || size,\n    total: res?.total || records.length,\n    records,\n  };\n}\n\nexport async function fetchPracticeSequence(params = {}) {\n  const { categoryId, difficulty, page = 1, size = 10 } = params;\n  const res = await request({\n    url: '/questions/practice/sequence',\n    method: 'GET',\n    data: { categoryId, difficulty, page, size },\n  });\n  const records = Array.isArray(res?.records) ? res.records.map((item) => normalizeQuestion(item)) : [];\n  return {\n    page: res?.page || page,\n    size: res?.size || size,\n    total: res?.total || records.length,\n    records,\n  };\n}\n\nexport async function fetchPracticeRandom(params = {}) {\n  const { categoryId, difficulty, limit = 5 } = params;\n  const res = await request({\n    url: '/questions/practice/random',\n    method: 'GET',\n    data: { categoryId, difficulty, limit },\n  });\n  return Array.isArray(res) ? res.map((item) => normalizeQuestion(item)) : [];\n}\n"],"names":["request"],"mappings":";;AAEA,SAAS,iBAAiB,KAAK;AAC7B,MAAI,CAAC;AAAK,WAAO;AACjB,MAAI,MAAM,QAAQ,GAAG,GAAG;AACtB,WAAO,IAAI,IAAI,CAAC,KAAK,SAAS;AAAA,MAC5B,OAAO,IAAI,SAAS,OAAO,aAAa,KAAK,GAAG;AAAA,MAChD,MAAM,IAAI,SAAS,IAAI,QAAQ,IAAI,SAAS;AAAA,MAC5C,OAAO,IAAI,SAAS,IAAI,QAAQ,IAAI,SAAS;AAAA,MAC7C,SAAS,IAAI;AAAA,IACd,EAAC;AAAA,EACH;AACD,MAAI,OAAO,QAAQ,UAAU;AAC3B,QAAI;AACF,YAAM,SAAS,KAAK,MAAM,GAAG;AAC7B,aAAO,iBAAiB,MAAM;AAAA,IAC/B,SAAQ,KAAK;AACZ,aAAO;IACR;AAAA,EACF;AACD,SAAO;AACT;AAEO,SAAS,kBAAkB,OAAO,IAAI;AAC3C,QAAM,UAAU,OAAO,KAAK,QAAQ,EAAE,EAAE;AACxC,MAAI,OAAO,KAAK;AAChB,MAAI,QAAQ,SAAS,UAAU;AAAG,WAAO;AAAA,WAChC,QAAQ,SAAS,MAAM,KAAK,QAAQ,SAAS,OAAO;AAAG,WAAO;AAAA,WAC9D,QAAQ,SAAS,MAAM,KAAK,QAAQ,SAAS,OAAO;AAAG,WAAO;AAAA,WAC9D,QAAQ,SAAS,QAAQ;AAAG,WAAO;AAC5C,SAAO;AAAA,IACL,IAAI,KAAK;AAAA,IACT,OAAO,KAAK,WAAW,KAAK,SAAS;AAAA,IACrC;AAAA,IACA,SAAS,iBAAiB,KAAK,WAAW,KAAK,WAAW;AAAA,IAC1D,OAAO,KAAK,SAAS;AAAA,IACrB,UAAU,KAAK,YAAY;AAAA,IAC3B,aAAa,KAAK;AAAA,IAClB,YAAY,KAAK;AAAA,IACjB,YAAY,KAAK;AAAA,IACjB,QACE,OAAO,KAAK,WAAW,WACnB,KAAK,OAAO,MAAM,SAAS,EAAE,OAAO,OAAO,IAC3C,MAAM,QAAQ,KAAK,MAAM,IACvB,KAAK,SACL,CAAE;AAAA,EACd;AACA;AAEO,eAAe,oBAAoB,IAAI;AAC5C,QAAM,MAAM,MAAMA,iBAAQ,EAAE,KAAK,cAAc,EAAE,IAAI,QAAQ,MAAO,CAAA;AACpE,SAAO,kBAAkB,GAAG;AAC9B;AAkBO,eAAe,sBAAsB,SAAS,IAAI;AACvD,QAAM,EAAE,YAAY,YAAY,OAAO,GAAG,OAAO,GAAI,IAAG;AACxD,QAAM,MAAM,MAAMA,iBAAQ;AAAA,IACxB,KAAK;AAAA,IACL,QAAQ;AAAA,IACR,MAAM,EAAE,YAAY,YAAY,MAAM,KAAM;AAAA,EAChD,CAAG;AACD,QAAM,UAAU,MAAM,QAAQ,2BAAK,OAAO,IAAI,IAAI,QAAQ,IAAI,CAAC,SAAS,kBAAkB,IAAI,CAAC,IAAI,CAAA;AACnG,SAAO;AAAA,IACL,OAAM,2BAAK,SAAQ;AAAA,IACnB,OAAM,2BAAK,SAAQ;AAAA,IACnB,QAAO,2BAAK,UAAS,QAAQ;AAAA,IAC7B;AAAA,EACJ;AACA;AAEO,eAAe,oBAAoB,SAAS,IAAI;AACrD,QAAM,EAAE,YAAY,YAAY,QAAQ,EAAC,IAAK;AAC9C,QAAM,MAAM,MAAMA,iBAAQ;AAAA,IACxB,KAAK;AAAA,IACL,QAAQ;AAAA,IACR,MAAM,EAAE,YAAY,YAAY,MAAO;AAAA,EAC3C,CAAG;AACD,SAAO,MAAM,QAAQ,GAAG,IAAI,IAAI,IAAI,CAAC,SAAS,kBAAkB,IAAI,CAAC,IAAI,CAAA;AAC3E;;;;"}