{"version":3,"file":"index.js","sources":["pages/records/index.vue","D:/HBuilderX.4.85.2025110510/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcmVjb3Jkcy9pbmRleC52dWU"],"sourcesContent":["<template>\n  <view class=\"page\">\n    <view class=\"filter\">\n      <picker mode=\"selector\" :range=\"categoryNames\" @change=\"onCategoryChange\">\n        <view class=\"picker\">\n          <text class=\"muted\">分类筛选：</text>\n          <text>{{ currentCategoryLabel }}</text>\n        </view>\n      </picker>\n    </view>\n\n    <view v-if=\"filteredRecords.length\">\n      <uni-card\n        v-for=\"item in filteredRecords\"\n        :key=\"item.id\"\n        :is-shadow=\"false\"\n        class=\"record-card\"\n        :title=\"item.question?.title || '未知题目'\"\n      >\n        <view class=\"row\">\n          <uni-tag :text=\"item.isCorrect ? '正确' : '错误'\" :type=\"item.isCorrect ? 'success' : 'warning'\" />\n          <text class=\"muted\">得分 {{ item.score }}</text>\n          <text class=\"muted\">用时 {{ item.spentSeconds }}s</text>\n        </view>\n        <view class=\"row\">\n          <text class=\"muted\">提交：{{ formatTime(item.answeredAt) }}</text>\n          <text class=\"muted\">分类：{{ getCategoryName(item.question?.categoryId) }}</text>\n        </view>\n        <view class=\"answer-row\">\n          <text class=\"muted\">我的答案：</text>\n          <text>{{ item.chosen.join(', ') || '-' }}</text>\n        </view>\n        <view class=\"answer-row\">\n          <text class=\"muted\">正确答案：</text>\n          <text>{{ (item.question?.answer || []).join(', ') }}</text>\n        </view>\n      </uni-card>\n    </view>\n\n    <view v-else class=\"empty\">\n      <text class=\"muted\">还没有答题记录，先去题库练习吧</text>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { computed, ref } from 'vue';\nimport { onPullDownRefresh, onShow } from '@dcloudio/uni-app';\nimport { fetchCategories, fetchRecords } from '@/api/mock.js';\n\nconst categories = ref([{ id: '', name: '全部' }]);\nconst records = ref([]);\nconst selectedCategory = ref('');\n\nconst categoryNames = computed(() => categories.value.map((c) => c.name));\nconst currentCategoryLabel = computed(\n  () => categories.value.find((c) => c.id === selectedCategory.value)?.name || '全部',\n);\n\nconst filteredRecords = computed(() => {\n  if (!selectedCategory.value) return records.value;\n  return records.value.filter((item) => item.question?.categoryId === selectedCategory.value);\n});\n\nconst getCategoryName = (id) => categories.value.find((c) => c.id === id)?.name || '未分类';\n\nconst onCategoryChange = (e) => {\n  const index = Number(e.detail.value);\n  selectedCategory.value = categories.value[index]?.id || '';\n};\n\nconst formatTime = (timeStr) => {\n  if (!timeStr) return '';\n  const date = new Date(timeStr);\n  return `${date.getMonth() + 1}/${date.getDate()} ${date.getHours()}:${String(\n    date.getMinutes(),\n  ).padStart(2, '0')}`;\n};\n\nconst loadData = async () => {\n  const [catList, recordList] = await Promise.all([fetchCategories(), fetchRecords()]);\n  categories.value = [{ id: '', name: '全部' }, ...catList];\n  records.value = recordList;\n};\n\nonShow(() => {\n  loadData();\n});\n\nonPullDownRefresh(async () => {\n  await loadData();\n  uni.stopPullDownRefresh();\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.page {\n  padding: 20rpx;\n}\n\n.filter {\n  margin-bottom: 16rpx;\n}\n\n.picker {\n  padding: 16rpx;\n  border-radius: 12rpx;\n  background: #f3f4f6;\n  display: flex;\n  align-items: center;\n  gap: 12rpx;\n}\n\n.record-card {\n  margin-bottom: 14rpx;\n}\n\n.row {\n  display: flex;\n  align-items: center;\n  gap: 12rpx;\n  margin: 6rpx 0;\n  flex-wrap: wrap;\n}\n\n.muted {\n  color: #6b7280;\n  font-size: 24rpx;\n}\n\n.answer-row {\n  display: flex;\n  gap: 10rpx;\n  margin-top: 4rpx;\n  color: #1f2937;\n}\n\n.empty {\n  padding: 40rpx;\n  text-align: center;\n}\n</style>\n","import MiniProgramPage from 'E:/javaproject/practice-app/practice-app-ui/pages/records/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","fetchCategories","fetchRecords","onShow","onPullDownRefresh","uni"],"mappings":";;;;;;;;;;;;;;;;AAkDA,UAAM,aAAaA,cAAAA,IAAI,CAAC,EAAE,IAAI,IAAI,MAAM,KAAM,CAAA,CAAC;AAC/C,UAAM,UAAUA,cAAAA,IAAI,CAAA,CAAE;AACtB,UAAM,mBAAmBA,cAAAA,IAAI,EAAE;AAE/B,UAAM,gBAAgBC,cAAAA,SAAS,MAAM,WAAW,MAAM,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC;AACxE,UAAM,uBAAuBA,cAAQ;AAAA,MACnC,MAAA;;AAAM,iCAAW,MAAM,KAAK,CAAC,MAAM,EAAE,OAAO,iBAAiB,KAAK,MAA5D,mBAA+D,SAAQ;AAAA;AAAA,IAC/E;AAEA,UAAM,kBAAkBA,cAAQ,SAAC,MAAM;AACrC,UAAI,CAAC,iBAAiB;AAAO,eAAO,QAAQ;AAC5C,aAAO,QAAQ,MAAM,OAAO,CAAC,SAAI;;AAAK,2BAAK,aAAL,mBAAe,gBAAe,iBAAiB;AAAA,OAAK;AAAA,IAC5F,CAAC;AAED,UAAM,kBAAkB,CAAC,OAAE;;AAAK,+BAAW,MAAM,KAAK,CAAC,MAAM,EAAE,OAAO,EAAE,MAAxC,mBAA2C,SAAQ;AAAA;AAEnF,UAAM,mBAAmB,CAAC,MAAM;;AAC9B,YAAM,QAAQ,OAAO,EAAE,OAAO,KAAK;AACnC,uBAAiB,UAAQ,gBAAW,MAAM,KAAK,MAAtB,mBAAyB,OAAM;AAAA,IAC1D;AAEA,UAAM,aAAa,CAAC,YAAY;AAC9B,UAAI,CAAC;AAAS,eAAO;AACrB,YAAM,OAAO,IAAI,KAAK,OAAO;AAC7B,aAAO,GAAG,KAAK,SAAQ,IAAK,CAAC,IAAI,KAAK,QAAO,CAAE,IAAI,KAAK,SAAU,CAAA,IAAI;AAAA,QACpE,KAAK,WAAY;AAAA,MAClB,EAAC,SAAS,GAAG,GAAG,CAAC;AAAA,IACpB;AAEA,UAAM,WAAW,YAAY;AAC3B,YAAM,CAAC,SAAS,UAAU,IAAI,MAAM,QAAQ,IAAI,CAACC,yBAAiB,GAAEC,sBAAc,CAAA,CAAC;AACnF,iBAAW,QAAQ,CAAC,EAAE,IAAI,IAAI,MAAM,KAAI,GAAI,GAAG,OAAO;AACtD,cAAQ,QAAQ;AAAA,IAClB;AAEAC,kBAAAA,OAAO,MAAM;AACX;IACF,CAAC;AAEDC,kBAAAA,kBAAkB,YAAY;AAC5B,YAAM,SAAQ;AACdC,oBAAG,MAAC,oBAAmB;AAAA,IACzB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3FD,GAAG,WAAW,eAAe;"}