{"version":3,"file":"index.js","sources":["pages/records/index.vue","D:/HBuilderX.4.85.2025110510/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcmVjb3Jkcy9pbmRleC52dWU"],"sourcesContent":["<template>\r\n  <view class=\"page\">\r\n    <view class=\"filter\">\r\n      <picker mode=\"selector\" :range=\"categoryNames\" @change=\"onCategoryChange\">\r\n        <view class=\"picker\">\r\n          <text class=\"muted\">分类筛选：</text>\r\n          <text>{{ currentCategoryLabel }}</text>\r\n        </view>\r\n      </picker>\r\n    </view>\r\n\r\n    <view v-if=\"filteredRecords.length\">\r\n      <uni-card\r\n        v-for=\"item in filteredRecords\"\r\n        :key=\"item.id\"\r\n        :is-shadow=\"false\"\r\n        class=\"record-card\"\r\n        :title=\"item.question?.title || '未知题目'\"\r\n      >\r\n        <view class=\"row\">\r\n          <uni-tag :text=\"item.isCorrect ? '正确' : '错误'\" :type=\"item.isCorrect ? 'success' : 'warning'\" />\r\n          <text class=\"muted\">得分 {{ item.score }}</text>\r\n          <text class=\"muted\">用时 {{ item.spentSeconds }}s</text>\r\n        </view>\r\n        <view class=\"row\">\r\n          <text class=\"muted\">提交：{{ formatTime(item.answeredAt) }}</text>\r\n          <text class=\"muted\">分类：{{ getCategoryName(item.question?.categoryId) }}</text>\r\n        </view>\r\n        <view class=\"answer-row\">\r\n          <text class=\"muted\">我的答案：</text>\r\n          <text>{{ item.chosen.join(', ') || '-' }}</text>\r\n        </view>\r\n        <view class=\"answer-row\">\r\n          <text class=\"muted\">正确答案：</text>\r\n          <text>{{ (item.question?.answer || []).join(', ') }}</text>\r\n        </view>\r\n      </uni-card>\r\n    </view>\r\n\r\n    <view v-else class=\"empty\">\r\n      <text class=\"muted\">还没有答题记录，先去题库练习吧</text>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, ref } from 'vue';\r\nimport { onPullDownRefresh, onShow } from '@dcloudio/uni-app';\r\nimport { fetchCategories, fetchRecords } from '@/api/mock.js';\r\n\r\nconst categories = ref([{ id: '', name: '全部' }]);\r\nconst records = ref([]);\r\nconst selectedCategory = ref('');\r\n\r\nconst categoryNames = computed(() => categories.value.map((c) => c.name));\r\nconst currentCategoryLabel = computed(\r\n  () => categories.value.find((c) => c.id === selectedCategory.value)?.name || '全部',\r\n);\r\n\r\nconst filteredRecords = computed(() => {\r\n  if (!selectedCategory.value) return records.value;\r\n  return records.value.filter((item) => item.question?.categoryId === selectedCategory.value);\r\n});\r\n\r\nconst getCategoryName = (id) => categories.value.find((c) => c.id === id)?.name || '未分类';\r\n\r\nconst onCategoryChange = (e) => {\r\n  const index = Number(e.detail.value);\r\n  selectedCategory.value = categories.value[index]?.id || '';\r\n};\r\n\r\nconst formatTime = (timeStr) => {\r\n  if (!timeStr) return '';\r\n  const date = new Date(timeStr);\r\n  return `${date.getMonth() + 1}/${date.getDate()} ${date.getHours()}:${String(\r\n    date.getMinutes(),\r\n  ).padStart(2, '0')}`;\r\n};\r\n\r\nconst loadData = async () => {\r\n  const [catList, recordList] = await Promise.all([fetchCategories(), fetchRecords()]);\r\n  categories.value = [{ id: '', name: '全部' }, ...catList];\r\n  records.value = recordList;\r\n};\r\n\r\nonShow(() => {\r\n  loadData();\r\n});\r\n\r\nonPullDownRefresh(async () => {\r\n  await loadData();\r\n  uni.stopPullDownRefresh();\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.page {\r\n  padding: 20rpx;\r\n}\r\n\r\n.filter {\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n.picker {\r\n  padding: 16rpx;\r\n  border-radius: 12rpx;\r\n  background: #f3f4f6;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12rpx;\r\n}\r\n\r\n.record-card {\r\n  margin-bottom: 14rpx;\r\n}\r\n\r\n.row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12rpx;\r\n  margin: 6rpx 0;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.muted {\r\n  color: #6b7280;\r\n  font-size: 24rpx;\r\n}\r\n\r\n.answer-row {\r\n  display: flex;\r\n  gap: 10rpx;\r\n  margin-top: 4rpx;\r\n  color: #1f2937;\r\n}\r\n\r\n.empty {\r\n  padding: 40rpx;\r\n  text-align: center;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'E:/project/practice-app/practice-app-ui/pages/records/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","fetchCategories","fetchRecords","onShow","onPullDownRefresh","uni"],"mappings":";;;;;;;;;;;;;;;;AAkDA,UAAM,aAAaA,cAAAA,IAAI,CAAC,EAAE,IAAI,IAAI,MAAM,KAAM,CAAA,CAAC;AAC/C,UAAM,UAAUA,cAAAA,IAAI,CAAA,CAAE;AACtB,UAAM,mBAAmBA,cAAAA,IAAI,EAAE;AAE/B,UAAM,gBAAgBC,cAAAA,SAAS,MAAM,WAAW,MAAM,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC;AACxE,UAAM,uBAAuBA,cAAQ;AAAA,MACnC,MAAA;;AAAM,iCAAW,MAAM,KAAK,CAAC,MAAM,EAAE,OAAO,iBAAiB,KAAK,MAA5D,mBAA+D,SAAQ;AAAA;AAAA,IAC/E;AAEA,UAAM,kBAAkBA,cAAQ,SAAC,MAAM;AACrC,UAAI,CAAC,iBAAiB;AAAO,eAAO,QAAQ;AAC5C,aAAO,QAAQ,MAAM,OAAO,CAAC,SAAI;;AAAK,2BAAK,aAAL,mBAAe,gBAAe,iBAAiB;AAAA,OAAK;AAAA,IAC5F,CAAC;AAED,UAAM,kBAAkB,CAAC,OAAE;;AAAK,+BAAW,MAAM,KAAK,CAAC,MAAM,EAAE,OAAO,EAAE,MAAxC,mBAA2C,SAAQ;AAAA;AAEnF,UAAM,mBAAmB,CAAC,MAAM;;AAC9B,YAAM,QAAQ,OAAO,EAAE,OAAO,KAAK;AACnC,uBAAiB,UAAQ,gBAAW,MAAM,KAAK,MAAtB,mBAAyB,OAAM;AAAA,IAC1D;AAEA,UAAM,aAAa,CAAC,YAAY;AAC9B,UAAI,CAAC;AAAS,eAAO;AACrB,YAAM,OAAO,IAAI,KAAK,OAAO;AAC7B,aAAO,GAAG,KAAK,SAAQ,IAAK,CAAC,IAAI,KAAK,QAAO,CAAE,IAAI,KAAK,SAAU,CAAA,IAAI;AAAA,QACpE,KAAK,WAAY;AAAA,MAClB,EAAC,SAAS,GAAG,GAAG,CAAC;AAAA,IACpB;AAEA,UAAM,WAAW,YAAY;AAC3B,YAAM,CAAC,SAAS,UAAU,IAAI,MAAM,QAAQ,IAAI,CAACC,yBAAiB,GAAEC,sBAAc,CAAA,CAAC;AACnF,iBAAW,QAAQ,CAAC,EAAE,IAAI,IAAI,MAAM,KAAI,GAAI,GAAG,OAAO;AACtD,cAAQ,QAAQ;AAAA,IAClB;AAEAC,kBAAAA,OAAO,MAAM;AACX;IACF,CAAC;AAEDC,kBAAAA,kBAAkB,YAAY;AAC5B,YAAM,SAAQ;AACdC,oBAAG,MAAC,oBAAmB;AAAA,IACzB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3FD,GAAG,WAAW,eAAe;"}