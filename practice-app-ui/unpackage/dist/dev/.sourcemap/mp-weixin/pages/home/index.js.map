{"version":3,"file":"index.js","sources":["pages/home/index.vue","D:/HBuilderX.4.85.2025110510/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaG9tZS9pbmRleC52dWU"],"sourcesContent":["<template>\n  <view class=\"page\">\n    <uni-card :is-shadow=\"false\" class=\"hero-card\">\n      <view class=\"hero\">\n        <image :src=\"user.avatar || '/static/uni.png'\" class=\"avatar\" mode=\"aspectFill\" />\n        <view class=\"hero-info\">\n          <view class=\"title-row\">\n            <text class=\"nickname\">{{ user.nickname || '未登录' }}</text>\n            <uni-badge v-if=\"user.loggedIn\" text=\"已登录\" type=\"success\" />\n          </view>\n          <view class=\"meta\">\n            <uni-badge text=\"积分\" type=\"primary\" class=\"mr-8\" />\n            <text class=\"meta-text\">{{ user.points || 0 }}</text>\n            <text class=\"meta-text\">· 已完成 {{ progress.answeredQuestions }}/{{ progress.totalQuestions }}</text>\n          </view>\n        </view>\n        <button v-if=\"!user.loggedIn\" class=\"login-btn\" size=\"mini\" type=\"primary\" @tap=\"goProfile\">\n          去登录\n        </button>\n      </view>\n      <view class=\"progress-block\">\n        <view class=\"progress-header\">\n          <text class=\"muted\">学习进度</text>\n          <text class=\"muted\">正确率 {{ progress.correctRate || 0 }}%</text>\n        </view>\n        <progress :percent=\"progress.percent || 0\" active stroke-width=\"8\" />\n        <view class=\"progress-footer\">\n          <text class=\"muted\">已做 {{ progress.answeredQuestions }} / {{ progress.totalQuestions }}</text>\n          <text class=\"muted\">当前积分 {{ user.points || 0 }}</text>\n        </view>\n      </view>\n    </uni-card>\n\n    <uni-section title=\"分类进度\" type=\"line\" padding />\n    <view class=\"category-grid\">\n      <view v-for=\"cat in progress.categories\" :key=\"cat.id\" class=\"section-card\">\n        <view class=\"row\">\n          <text class=\"cat-name\">{{ cat.name }}</text>\n          <uni-badge :text=\"cat.correct + '/' + cat.total\" type=\"primary\" />\n        </view>\n        <text class=\"muted\">正确率 {{ cat.correctRate }}%</text>\n        <progress\n          :percent=\"cat.total ? Math.round((cat.answered / cat.total) * 100) : 0\"\n          active\n          stroke-width=\"6\"\n        />\n      </view>\n    </view>\n\n    <uni-section title=\"推荐题目\" sub-title=\"从未做过的题里挑选\" type=\"line\" padding />\n    <view v-if=\"recommended.length\">\n      <uni-card\n        v-for=\"item in recommended\"\n        :key=\"item.id\"\n        :is-shadow=\"false\"\n        class=\"section-card\"\n        :title=\"item.title\"\n        @click=\"goQuestion(item.id)\"\n      >\n        <view class=\"tag-row\">\n          <uni-tag :text=\"renderType(item.type)\" size=\"mini\" type=\"primary\" />\n          <uni-tag :text=\"getCategoryName(item.categoryId)\" size=\"mini\" type=\"success\" />\n          <text class=\"muted ml-auto\">分值 {{ item.score }}</text>\n        </view>\n      </uni-card>\n    </view>\n    <view v-else class=\"empty\">\n      <text class=\"muted\">暂无推荐题目，先去题库看看吧</text>\n    </view>\n\n    <view class=\"cta\">\n      <button type=\"primary\" class=\"primary-btn\" @tap=\"goQuestionBank\">进入题库</button>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\nimport { onPullDownRefresh, onShow } from '@dcloudio/uni-app';\nimport {\n  fetchCategories,\n  fetchCurrentUser,\n  fetchProgress,\n  fetchRecommendedQuestions,\n} from '@/api/mock.js';\n\nconst user = ref({});\nconst progress = ref({\n  totalQuestions: 0,\n  answeredQuestions: 0,\n  correctRate: 0,\n  categories: [],\n  percent: 0,\n});\nconst recommended = ref([]);\nconst categories = ref([]);\n\nconst loadData = async () => {\n  const [userInfo, progressInfo, catList, recommendList] = await Promise.all([\n    fetchCurrentUser(),\n    fetchProgress(),\n    fetchCategories(),\n    fetchRecommendedQuestions(),\n  ]);\n  user.value = userInfo;\n  progress.value = progressInfo;\n  categories.value = catList;\n  recommended.value = recommendList;\n};\n\nconst renderType = (type) => {\n  if (type === 'multiple') return '多选';\n  if (type === 'truefalse') return '判断';\n  return '单选';\n};\n\nconst getCategoryName = (id) => categories.value.find((c) => c.id === id)?.name || '未分类';\n\nconst goQuestionBank = () => {\n  uni.switchTab({ url: '/pages/questions/index' });\n};\n\nconst goQuestion = (id) => {\n  uni.navigateTo({ url: `/pages/questions/detail?id=${id}` });\n};\n\nconst goProfile = () => {\n  uni.switchTab({ url: '/pages/profile/index' });\n};\n\nonShow(() => {\n  loadData();\n});\n\nonPullDownRefresh(async () => {\n  await loadData();\n  uni.stopPullDownRefresh();\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.page {\n  padding: 24rpx;\n}\n\n.hero-card {\n  background: linear-gradient(135deg, #2563eb, #60a5fa);\n  color: #fff;\n  border: none;\n}\n\n.hero {\n  display: flex;\n  align-items: center;\n  gap: 20rpx;\n}\n\n.avatar {\n  width: 120rpx;\n  height: 120rpx;\n  border-radius: 50%;\n  border: 4rpx solid rgba(255, 255, 255, 0.4);\n}\n\n.hero-info {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 8rpx;\n}\n\n.title-row {\n  display: flex;\n  align-items: center;\n  gap: 12rpx;\n}\n\n.nickname {\n  font-size: 34rpx;\n  font-weight: 700;\n}\n\n.meta {\n  display: flex;\n  align-items: center;\n  gap: 8rpx;\n  font-size: 24rpx;\n}\n\n.meta-text {\n  font-size: 24rpx;\n  color: rgba(255, 255, 255, 0.9);\n}\n\n.login-btn {\n  margin-left: 12rpx;\n}\n\n.progress-block {\n  margin-top: 20rpx;\n}\n\n.progress-header,\n.progress-footer {\n  display: flex;\n  justify-content: space-between;\n  font-size: 24rpx;\n  margin: 6rpx 0;\n}\n\n.muted {\n  color: #9ca3af;\n}\n\n.section-card {\n  border-radius: 16rpx;\n}\n\n.category-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(300rpx, 1fr));\n  gap: 16rpx;\n}\n\n.row {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 8rpx;\n}\n\n.cat-name {\n  font-weight: 600;\n  font-size: 28rpx;\n}\n\n.tag-row {\n  display: flex;\n  align-items: center;\n  gap: 12rpx;\n  margin-top: 12rpx;\n}\n\n.ml-auto {\n  margin-left: auto;\n}\n\n.cta {\n  margin: 32rpx 0;\n}\n\n.primary-btn {\n  background: linear-gradient(135deg, #2563eb, #1d4ed8);\n  color: #fff;\n  border: none;\n}\n\n.empty {\n  padding: 20rpx;\n  text-align: center;\n}\n\n.mr-8 {\n  margin-right: 8rpx;\n}\n</style>\n","import MiniProgramPage from 'E:/javaproject/practice-app/practice-app-ui/pages/home/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","fetchCurrentUser","fetchProgress","fetchCategories","fetchRecommendedQuestions","uni","onShow","onPullDownRefresh"],"mappings":";;;;;;;;;;;;;;;;;;;;AAsFA,UAAM,OAAOA,cAAAA,IAAI,CAAA,CAAE;AACnB,UAAM,WAAWA,cAAAA,IAAI;AAAA,MACnB,gBAAgB;AAAA,MAChB,mBAAmB;AAAA,MACnB,aAAa;AAAA,MACb,YAAY,CAAE;AAAA,MACd,SAAS;AAAA,IACX,CAAC;AACD,UAAM,cAAcA,cAAAA,IAAI,CAAA,CAAE;AAC1B,UAAM,aAAaA,cAAAA,IAAI,CAAA,CAAE;AAEzB,UAAM,WAAW,YAAY;AAC3B,YAAM,CAAC,UAAU,cAAc,SAAS,aAAa,IAAI,MAAM,QAAQ,IAAI;AAAA,QACzEC,0BAAkB;AAAA,QAClBC,uBAAe;AAAA,QACfC,yBAAiB;AAAA,QACjBC,mCAA2B;AAAA,MAC/B,CAAG;AACD,WAAK,QAAQ;AACb,eAAS,QAAQ;AACjB,iBAAW,QAAQ;AACnB,kBAAY,QAAQ;AAAA,IACtB;AAEA,UAAM,aAAa,CAAC,SAAS;AAC3B,UAAI,SAAS;AAAY,eAAO;AAChC,UAAI,SAAS;AAAa,eAAO;AACjC,aAAO;AAAA,IACT;AAEA,UAAM,kBAAkB,CAAC,OAAE;;AAAK,+BAAW,MAAM,KAAK,CAAC,MAAM,EAAE,OAAO,EAAE,MAAxC,mBAA2C,SAAQ;AAAA;AAEnF,UAAM,iBAAiB,MAAM;AAC3BC,oBAAAA,MAAI,UAAU,EAAE,KAAK,yBAA0B,CAAA;AAAA,IACjD;AAEA,UAAM,aAAa,CAAC,OAAO;AACzBA,oBAAG,MAAC,WAAW,EAAE,KAAK,8BAA8B,EAAE,GAAE,CAAE;AAAA,IAC5D;AAEA,UAAM,YAAY,MAAM;AACtBA,oBAAAA,MAAI,UAAU,EAAE,KAAK,uBAAwB,CAAA;AAAA,IAC/C;AAEAC,kBAAAA,OAAO,MAAM;AACX;IACF,CAAC;AAEDC,kBAAAA,kBAAkB,YAAY;AAC5B,YAAM,SAAQ;AACdF,oBAAG,MAAC,oBAAmB;AAAA,IACzB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxID,GAAG,WAAW,eAAe;"}