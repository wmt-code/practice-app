{"version":3,"file":"index.js","sources":["pages/import-question/index.vue","D:/HBuilderX.4.85.2025110510/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW1wb3J0LXF1ZXN0aW9uL2luZGV4LnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"page\">\r\n    <view class=\"content\">\r\n      <view class=\"cell-group\">\r\n        <view class=\"cell-item arrow\" @tap=\"openTypeSelect\">\r\n          <text class=\"label required\">题型</text>\r\n          <view class=\"value-text\">{{ typeLabel }}</view>\r\n          <uni-icons type=\"right\" size=\"14\" color=\"#c0c4cc\" />\r\n        </view>\r\n      </view>\r\n\r\n      <view class=\"section\">\r\n        <view class=\"section-header\">\r\n          <text class=\"label required\">题干</text>\r\n        </view>\r\n        <view class=\"toolbar\" v-if=\"currentFocus === 'stem'\">\r\n          <view class=\"tool-btn\" :class=\"{ active: formats.bold }\" @tap=\"handleToolbar('bold')\"><text style=\"font-weight: bold;\">B</text></view>\r\n          <view class=\"tool-btn\" :class=\"{ active: formats.italic }\" @tap=\"handleToolbar('italic')\"><text style=\"font-style: italic;\">I</text></view>\r\n          <view class=\"tool-btn\" :class=\"{ active: formats.underline }\" @tap=\"handleToolbar('underline')\"><text style=\"text-decoration: underline;\">U</text></view>\r\n          <view class=\"tool-btn\" :class=\"{ active: formats.script === 'sub' }\" @tap=\"handleToolbar('script', 'sub')\">x₂</view>\r\n          <view class=\"tool-btn\" :class=\"{ active: formats.script === 'sup' }\" @tap=\"handleToolbar('script', 'sup')\">x²</view>\r\n          <uni-icons class=\"tool-btn\" type=\"image\" size=\"20\" @tap=\"insertImage\"></uni-icons>\r\n        </view>\r\n        <view class=\"editor-box\">\r\n          <editor\r\n            id=\"stemEditor\"\r\n            class=\"ql-editor\"\r\n            placeholder=\"请输入试题题目\"\r\n            show-img-size\r\n            show-img-toolbar\r\n            show-img-resize\r\n            @ready=\"onStemReady\"\r\n            @statuschange=\"onStatusChange\"\r\n            @focus=\"onEditorFocus('stem')\"\r\n            @blur=\"onEditorBlur\"\r\n            @input=\"handleStemInput\"\r\n          ></editor>\r\n        </view>\r\n      </view>\r\n\r\n      <view class=\"section\" v-if=\"isChoice\">\r\n        <view class=\"section-header space-between\">\r\n          <view class=\"row-center\">\r\n            <text class=\"label required\">选项</text>\r\n          </view>\r\n          <text class=\"sub-label required-mark\">请勾选答案</text>\r\n        </view>\r\n\r\n        <view class=\"option-list\">\r\n          <view \r\n            class=\"option-item\" \r\n            v-for=\"(item, index) in form.options\" \r\n            :key=\"item.label\"\r\n          >\r\n            <view class=\"icon-wrap\" @tap=\"removeOption(index)\" v-if=\"canRemoveOption && form.type !== 'JUDGE'\">\r\n              <uni-icons type=\"minus-filled\" color=\"#dd524d\" size=\"24\" />\r\n            </view>\r\n            <view class=\"icon-wrap\" v-else-if=\"form.type !== 'JUDGE'\" style=\"opacity: 0;\">\r\n               <uni-icons type=\"minus-filled\" size=\"24\" />\r\n            </view>\r\n\r\n            <view class=\"option-label\" v-if=\"form.type !== 'JUDGE'\">{{ item.label }}.</view>\r\n            \r\n            <!-- 普通题型：富文本编辑器 -->\r\n            <view class=\"input-wrap-editor\" v-if=\"form.type !== 'JUDGE'\">\r\n              <view class=\"toolbar\" v-if=\"currentFocus === 'option-' + index\">\r\n                <view class=\"tool-btn\" :class=\"{ active: formats.bold }\" @tap=\"handleToolbar('bold')\"><text style=\"font-weight: bold;\">B</text></view>\r\n                <view class=\"tool-btn\" :class=\"{ active: formats.italic }\" @tap=\"handleToolbar('italic')\"><text style=\"font-style: italic;\">I</text></view>\r\n                <view class=\"tool-btn\" :class=\"{ active: formats.underline }\" @tap=\"handleToolbar('underline')\"><text style=\"text-decoration: underline;\">U</text></view>\r\n                <view class=\"tool-btn\" :class=\"{ active: formats.script === 'sub' }\" @tap=\"handleToolbar('script', 'sub')\">x₂</view>\r\n                <view class=\"tool-btn\" :class=\"{ active: formats.script === 'sup' }\" @tap=\"handleToolbar('script', 'sup')\">x²</view>\r\n                <uni-icons class=\"tool-btn\" type=\"image\" size=\"20\" @tap=\"insertImage\"></uni-icons>\r\n              </view>\r\n              <editor\r\n                :id=\"'optionEditor' + index\"\r\n                class=\"ql-editor-option\"\r\n                placeholder=\"请输入试题选项\"\r\n                show-img-size\r\n                show-img-toolbar\r\n                show-img-resize\r\n                @ready=\"onOptionReady(index)\"\r\n                @statuschange=\"onStatusChange\"\r\n                @focus=\"onEditorFocus('option-' + index)\"\r\n                @blur=\"onEditorBlur\"\r\n                @input=\"(e) => handleOptionInput(e, index)\"\r\n              ></editor>\r\n            </view>\r\n\r\n            <!-- 判断题：纯文本展示 -->\r\n            <view class=\"judge-text-wrap\" v-else>\r\n              <text class=\"judge-text\">{{ item.text }}</text>\r\n            </view>\r\n\r\n            <view class=\"check-wrap\" @tap=\"toggleAnswer(item.label)\">\r\n              <view class=\"radio-circle\" :class=\"{ active: form.answers.includes(item.label) }\">\r\n                <view class=\"inner-dot\" v-if=\"form.answers.includes(item.label)\"></view>\r\n              </view>\r\n            </view>\r\n          </view>\r\n        </view>\r\n\r\n        <view class=\"add-row\" v-if=\"form.type !== 'JUDGE'\">\r\n          <view class=\"add-btn\" @tap=\"addOption\" :class=\"{ disabled: optionsDisabled }\">\r\n            <uni-icons type=\"plus-filled\" color=\"#007aff\" size=\"22\" />\r\n            <text class=\"add-text\">添加选项</text>\r\n          </view>\r\n          <view class=\"bulk-btn\" @tap=\"openBulkPopup\">批量添加</view>\r\n        </view>\r\n      </view>\r\n\r\n      <view class=\"section\" v-else-if=\"form.type === 'FILL'\">\r\n        <view class=\"section-header space-between\">\r\n          <text class=\"label required\">填空答案</text>\r\n          <view class=\"add-btn\" @tap=\"addBlank\">\r\n            <uni-icons type=\"plus-filled\" color=\"#007aff\" size=\"20\" />\r\n            <text class=\"add-text\">添加空</text>\r\n          </view>\r\n        </view>\r\n        <view class=\"option-list\">\r\n          <view class=\"option-item\" v-for=\"(blank, index) in form.blanks\" :key=\"blank.id\">\r\n            <view class=\"icon-wrap\" @tap=\"removeBlank(index)\" v-if=\"form.blanks.length > 1\">\r\n              <uni-icons type=\"minus-filled\" color=\"#dd524d\" size=\"24\" />\r\n            </view>\r\n            <text class=\"option-label\">空{{ index + 1 }}</text>\r\n            <view class=\"input-wrap\">\r\n              <input class=\"gray-input\" v-model=\"blank.text\" placeholder=\"请输入参考答案\" />\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n\r\n      <view class=\"section\">\r\n        <view class=\"section-header\">\r\n          <text class=\"label\">解析</text>\r\n        </view>\r\n        <view class=\"toolbar\" v-if=\"currentFocus === 'analysis'\">\r\n          <view class=\"tool-btn\" :class=\"{ active: formats.bold }\" @tap=\"handleToolbar('bold')\"><text style=\"font-weight: bold;\">B</text></view>\r\n          <view class=\"tool-btn\" :class=\"{ active: formats.italic }\" @tap=\"handleToolbar('italic')\"><text style=\"font-style: italic;\">I</text></view>\r\n          <view class=\"tool-btn\" :class=\"{ active: formats.underline }\" @tap=\"handleToolbar('underline')\"><text style=\"text-decoration: underline;\">U</text></view>\r\n          <view class=\"tool-btn\" :class=\"{ active: formats.script === 'sub' }\" @tap=\"handleToolbar('script', 'sub')\">x₂</view>\r\n          <view class=\"tool-btn\" :class=\"{ active: formats.script === 'sup' }\" @tap=\"handleToolbar('script', 'sup')\">x²</view>\r\n          <uni-icons class=\"tool-btn\" type=\"image\" size=\"20\" @tap=\"insertImage\"></uni-icons>\r\n        </view>\r\n        <view class=\"textarea-box\">\r\n          <editor\r\n            id=\"analysisEditor\"\r\n            class=\"ql-editor\"\r\n            placeholder=\"请输入试题解析\"\r\n            show-img-size\r\n            show-img-toolbar\r\n            show-img-resize\r\n            @ready=\"onAnalysisReady\"\r\n            @statuschange=\"onStatusChange\"\r\n            @focus=\"onEditorFocus('analysis')\"\r\n            @blur=\"onEditorBlur\"\r\n            @input=\"handleAnalysisInput\"\r\n          ></editor>\r\n        </view>\r\n      </view>\r\n\r\n      <view class=\"cell-group mt-20\">\r\n        <view class=\"cell-item arrow\" @tap=\"chooseCategory\">\r\n          <text class=\"label-text\">选择章节</text>\r\n          <view class=\"right-content\">\r\n             <text class=\"value-text\" v-if=\"form.categoryName\">{{ form.categoryName }}</text>\r\n             <uni-icons type=\"right\" size=\"14\" color=\"#c0c4cc\" />\r\n          </view>\r\n        </view>\r\n        <view class=\"cell-item arrow\" @tap=\"openEditCategory\">\r\n          <text class=\"label-text\">编辑章节</text>\r\n          <uni-icons type=\"right\" size=\"14\" color=\"#c0c4cc\" />\r\n        </view>\r\n        <view class=\"cell-item arrow\" @tap=\"openDifficulty\">\r\n          <text class=\"label-text\">难度</text>\r\n          <view class=\"right-content\" v-if=\"form.difficulty\">\r\n             <text class=\"value-text\">{{ renderDifficulty(form.difficulty) }}</text>\r\n             <uni-icons type=\"right\" size=\"14\" color=\"#c0c4cc\" />\r\n          </view>\r\n           <uni-icons v-else type=\"right\" size=\"14\" color=\"#c0c4cc\" />\r\n        </view>\r\n      </view>\r\n\r\n      <view style=\"height: 120rpx;\"></view> </view>\r\n\r\n    <view class=\"footer-bar\">\r\n      <button class=\"submit-btn\" hover-class=\"btn-hover\" :loading=\"saving\" :disabled=\"saving || loading\" @tap=\"submit\">\r\n        {{ submitText }}\r\n      </button>\r\n    </view>\r\n\r\n    <uni-popup ref=\"bulkPopup\" type=\"dialog\">\r\n      <uni-popup-dialog \r\n        mode=\"input\" \r\n        title=\"批量添加选项\" \r\n        placeholder=\"一行一个选项，自动填充\"\r\n        :before-close=\"true\" \r\n        @confirm=\"applyBulkOptions\" \r\n        @close=\"bulkPopup.close()\"\r\n      >\r\n        <view class=\"dialog-content\">\r\n            <textarea \r\n                v-model=\"bulkText\" \r\n                class=\"bulk-textarea\" \r\n                placeholder=\"请输入选项内容，每行代表一个选项（例如：\\n正确答案\\n错误答案）\"\r\n            />\r\n        </view>\r\n      </uni-popup-dialog>\r\n    </uni-popup>\r\n\r\n    <uni-popup ref=\"categoryPopup\" type=\"bottom\" background-color=\"#fff\">\r\n      <view class=\"popup-container\">\r\n        <view class=\"popup-header\">\r\n          <text class=\"cancel-btn\" @tap=\"categoryPopup.close()\">取消</text>\r\n          <text class=\"title\">选择章节</text>\r\n          <text class=\"confirm-btn\" @tap=\"categoryPopup.close()\">确定</text>\r\n        </view>\r\n        <scroll-view scroll-y class=\"popup-content\">\r\n          <view v-for=\"cat in categories\" :key=\"cat.id\">\r\n            <view class=\"category-item\" @tap=\"selectCategory(cat)\">\r\n              <text>{{ cat.name }}</text>\r\n            </view>\r\n            <view class=\"sub-category-item\" v-for=\"sub in cat.children || []\" :key=\"sub.id\" @tap=\"selectCategory(sub)\">\r\n              <text>{{ sub.name }}</text>\r\n            </view>\r\n          </view>\r\n        </scroll-view>\r\n      </view>\r\n    </uni-popup>\r\n\r\n    <uni-popup ref=\"editCategoryPopup\" type=\"bottom\" background-color=\"#fff\">\r\n      <view class=\"popup-container\">\r\n        <view class=\"popup-header\">\r\n          <text class=\"cancel-btn\" @tap=\"editCategoryPopup.close()\">取消</text>\r\n          <text class=\"title\">编辑章节</text>\r\n          <text class=\"confirm-btn\" @tap=\"editCategoryPopup.close()\">确定</text>\r\n        </view>\r\n        <scroll-view scroll-y class=\"popup-content\">\r\n          <view v-for=\"(cat, index) in categories\" :key=\"cat.id\">\r\n            <view class=\"edit-item\">\r\n              <view class=\"left-part\">\r\n                 <uni-icons type=\"minus-filled\" color=\"#dd524d\" size=\"24\" @tap=\"removeCategory(index)\" />\r\n                 <uni-icons :type=\"cat.expanded ? 'bottom' : 'right'\" size=\"16\" color=\"#007aff\" class=\"ml-10\" @tap=\"toggleExpand(cat)\" />\r\n                 <text class=\"ml-10\">{{ cat.name }}</text>\r\n              </view>\r\n              <view class=\"right-actions\">\r\n                 <view class=\"action-box\" @tap=\"addSubCategory(index)\">\r\n                    <uni-icons type=\"plus\" size=\"20\" color=\"#007aff\" />\r\n                 </view>\r\n                 <view class=\"action-box\" @tap=\"editCategory(cat)\">\r\n                    <uni-icons type=\"compose\" size=\"20\" color=\"#007aff\" />\r\n                 </view>\r\n                 <view class=\"action-box\">\r\n                    <uni-icons v-if=\"index > 0\" type=\"arrowup\" size=\"20\" color=\"#007aff\" @tap=\"moveCategory(index, -1)\" />\r\n                 </view>\r\n                 <view class=\"action-box\">\r\n                    <uni-icons v-if=\"index < categories.length - 1\" type=\"arrowdown\" size=\"20\" color=\"#007aff\" @tap=\"moveCategory(index, 1)\" />\r\n                 </view>\r\n              </view>\r\n            </view>\r\n            <view v-if=\"cat.expanded\">\r\n                <view class=\"edit-item sub-item\" v-for=\"(sub, subIndex) in cat.children || []\" :key=\"sub.id\">\r\n                <view class=\"left-part\">\r\n                    <uni-icons type=\"minus-filled\" color=\"#dd524d\" size=\"24\" @tap=\"removeSubCategory(index, subIndex)\" />\r\n                    <text class=\"ml-10\">{{ sub.name }}</text>\r\n                </view>\r\n                <view class=\"right-actions\">\r\n                    <view class=\"action-box\"></view>\r\n                    <view class=\"action-box\" @tap=\"editCategory(sub)\">\r\n                        <uni-icons type=\"compose\" size=\"20\" color=\"#007aff\" />\r\n                    </view>\r\n                    <view class=\"action-box\">\r\n                        <uni-icons v-if=\"subIndex > 0\" type=\"arrowup\" size=\"20\" color=\"#007aff\" @tap=\"moveSubCategory(index, subIndex, -1)\" />\r\n                    </view>\r\n                    <view class=\"action-box\">\r\n                        <uni-icons v-if=\"subIndex < cat.children.length - 1\" type=\"arrowdown\" size=\"20\" color=\"#007aff\" @tap=\"moveSubCategory(index, subIndex, 1)\" />\r\n                    </view>\r\n                </view>\r\n                </view>\r\n            </view>\r\n          </view>\r\n          \r\n          <view class=\"add-category-btn\">\r\n            <button class=\"btn-outline\" @tap=\"addCategory\">添加章节</button>\r\n          </view>\r\n        </scroll-view>\r\n      </view>\r\n    </uni-popup>\r\n\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, nextTick, ref, getCurrentInstance } from 'vue';\r\nimport { onLoad } from '@dcloudio/uni-app';\r\nimport { fetchCategoryTree, createCategory, updateCategory, deleteCategory } from '@/api/categories.js';\r\nimport { createQuestion, updateQuestion, fetchQuestionRaw, uploadQuestionImage } from '@/api/questions.js';\r\nimport { API_BASE } from '@/api/http.js';\r\n\r\n// 基础数据\r\nconst questionTypes = [\r\n  { value: 'SINGLE', text: '单选题' },\r\n  { value: 'MULTIPLE', text: '多选题' },\r\n  { value: 'JUDGE', text: '判断题' },\r\n  { value: 'FILL', text: '填空题' },\r\n];\r\n\r\nconst difficultyOptions = [\r\n  { value: 'EASY', text: '简单' },\r\n  { value: 'MEDIUM', text: '中等' },\r\n  { value: 'HARD', text: '困难' },\r\n];\r\n\r\nconst instance = getCurrentInstance();\r\n\r\nconst mode = ref('single');\r\nconst questionId = ref(null);\r\nconst loading = ref(false);\r\nconst saving = ref(false);\r\nconst showStemToolbar = ref(false);\r\nconst stemEditorCtx = ref(null);\r\nconst analysisEditorCtx = ref(null);\r\nconst optionEditorCtxs = ref({}); // Map id to context\r\nconst currentFocus = ref(''); // 'stem', 'analysis', 'option-0', ...\r\nconst bulkPopup = ref(null);\r\nconst bulkText = ref('');\r\nconst formats = ref({});\r\nlet blurTimer = null;\r\n\r\nconst categoryPopup = ref(null);\r\nconst editCategoryPopup = ref(null);\r\nconst categories = ref([]);\r\n\r\n// 表单数据\r\nconst form = ref({\r\n  type: 'SINGLE', // SINGLE, MULTIPLE, JUDGE, FILL\r\n  stemHtml: '',\r\n  options: createDefaultOptions(4),\r\n  answers: [],\r\n  blanks: [{ id: Date.now(), text: '' }],\r\n  analysis: '',\r\n  categoryId: '',\r\n  categoryName: '',\r\n  difficulty: '', // 截图里默认可能为空\r\n});\r\n\r\n// 计算属性\r\nconst typeLabel = computed(() => {\r\n    const t = questionTypes.find(i => i.value === form.value.type);\r\n    return t ? t.text : '请选择';\r\n});\r\nconst isChoice = computed(() => ['SINGLE', 'MULTIPLE', 'JUDGE'].includes(form.value.type));\r\nconst isSingle = computed(() => ['SINGLE', 'JUDGE'].includes(form.value.type));\r\nconst canRemoveOption = computed(() => form.value.options.length > 2 && form.value.type !== 'JUDGE');\r\nconst optionsDisabled = computed(() => form.value.options.length >= 8 || form.value.type === 'JUDGE');\r\nconst submitText = computed(() => (questionId.value ? '保存修改' : '添加试题'));\r\n\r\nonLoad((query) => {\r\n  mode.value = query.mode || 'single';\r\n  if (query.id) {\r\n    const parsed = Number(query.id);\r\n    questionId.value = Number.isNaN(parsed) ? query.id : parsed;\r\n  }\r\n  initPage();\r\n});\r\n\r\n// 逻辑方法\r\nasync function initPage() {\r\n  loading.value = true;\r\n  try {\r\n    await loadCategories();\r\n    if (questionId.value) {\r\n      await loadQuestionDetail(questionId.value);\r\n    }\r\n  } catch (err) {\r\n    console.error(err);\r\n    uni.showToast({ title: err.message || '初始化失败', icon: 'none' });\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n}\r\n\r\nasync function loadCategories() {\r\n  try {\r\n    const tree = await fetchCategoryTree();\r\n    const normalizeTree = (nodes = []) =>\r\n      (nodes || []).map((node) => ({\r\n        ...node,\r\n        expanded: node.expanded || false,\r\n        children: normalizeTree(node.children || []),\r\n      }));\r\n    categories.value = Array.isArray(tree) ? normalizeTree(tree) : [];\r\n    if (form.value.categoryId) {\r\n      form.value.categoryName = findCategoryName(categories.value, form.value.categoryId);\r\n    }\r\n  } catch (err) {\r\n    console.error('load categories failed', err);\r\n    uni.showToast({ title: '加载章节失败', icon: 'none' });\r\n  }\r\n}\r\n\r\nfunction createDefaultOptions(count = 4) {\r\n  return Array.from({ length: count }).map((_, idx) => ({\r\n    label: String.fromCharCode(65 + idx),\r\n    text: '',\r\n    images: [],\r\n  }));\r\n}\r\n\r\n// 切换题型\r\nfunction openTypeSelect() {\r\n    uni.showActionSheet({\r\n        itemList: questionTypes.map(t => t.text),\r\n        success: (res) => {\r\n            handleTypeChange(questionTypes[res.tapIndex].value);\r\n        }\r\n    });\r\n}\r\n\r\nfunction handleTypeChange(val) {\r\n  form.value.type = val;\r\n  form.value.answers = []; // 切换题型时清空答案\r\n\r\n  if (val === 'JUDGE') {\r\n    // 切换到判断题：强制设置为 正确/错误\r\n    form.value.options = [\r\n      { label: 'A', text: '正确', images: [] },\r\n      { label: 'B', text: '错误', images: [] },\r\n    ];\r\n  } else if (val === 'FILL') {\r\n    // 切换到填空题\r\n    if (!form.value.blanks || form.value.blanks.length === 0) {\r\n      form.value.blanks = [{ id: Date.now(), text: '' }];\r\n    }\r\n  } else {\r\n    // 切换到 单选 (SINGLE) 或 多选 (MULTIPLE)\r\n    \r\n    // 核心修复逻辑：\r\n    // 检测当前是否是判断题的残留数据（只有2项 且 内容是正确/错误）\r\n    const isJudgeData = form.value.options.length === 2 && \r\n                        form.value.options[0].text === '正确' && \r\n                        form.value.options[1].text === '错误';\r\n    \r\n    // 如果是判断题数据，或者选项为空，则重置为标准的 4 个空选项\r\n    if (isJudgeData || form.value.options.length === 0) {\r\n      form.value.options = createDefaultOptions(4);\r\n    }\r\n  }\r\n}\r\n\r\nasync function loadQuestionDetail(id) {\r\n  try {\r\n    const detail = await fetchQuestionRaw(id);\r\n    if (!detail) {\r\n      uni.showToast({ title: '题目不存在', icon: 'none' });\r\n      return;\r\n    }\r\n    const type = normalizeBackendType(detail.type);\r\n    const answers = splitAnswerList(detail.answer);\r\n    form.value.type = type;\r\n    form.value.stemHtml = detail.title || '';\r\n    form.value.analysis = detail.explanation || '';\r\n    form.value.difficulty = detail.difficulty || '';\r\n    form.value.categoryId = detail.categoryId || '';\r\n    form.value.categoryName = findCategoryName(categories.value, detail.categoryId);\r\n\r\n    if (type === 'FILL') {\r\n      form.value.blanks = answers.length\r\n        ? answers.map((text, idx) => ({ id: Date.now() + idx, text }))\r\n        : [{ id: Date.now(), text: '' }];\r\n      form.value.answers = [];\r\n    } else {\r\n      const parsedOptions = parseOptionList(detail.optionsJson || detail.options, answers);\r\n      if (parsedOptions.length) {\r\n        form.value.options = parsedOptions;\r\n      } else if (type === 'JUDGE') {\r\n        form.value.options = [\r\n          { label: 'A', text: '正确' },\r\n          { label: 'B', text: '错误' },\r\n        ];\r\n      } else {\r\n        form.value.options = createDefaultOptions(4);\r\n      }\r\n      form.value.answers = answers;\r\n    }\r\n    restoreEditorContents();\r\n  } catch (err) {\r\n    console.error('load question failed', err);\r\n    uni.showToast({ title: err.message || '加载题目失败', icon: 'none' });\r\n  }\r\n}\r\n\r\n// 题干编辑器\r\nfunction onStemReady(e) {\r\n  // 尝试使用 createSelectorQuery 获取 context，以兼容更多平台\r\n  uni.createSelectorQuery().in(instance).select('#stemEditor').context((res) => {\r\n    stemEditorCtx.value = res.context;\r\n    if (form.value.stemHtml) {\r\n      res.context.setContents({ html: form.value.stemHtml });\r\n    }\r\n  }).exec();\r\n}\r\nfunction handleStemInput(e) {\r\n  form.value.stemHtml = e.detail.html;\r\n}\r\nfunction onStatusChange(e) {\r\n  formats.value = e.detail;\r\n}\r\n\r\n// 通用工具栏处理\r\nfunction handleToolbar(name, value) {\r\n    let ctx = null;\r\n    if (currentFocus.value === 'stem') ctx = stemEditorCtx.value;\r\n    else if (currentFocus.value === 'analysis') ctx = analysisEditorCtx.value;\r\n    else if (currentFocus.value.startsWith('option-')) {\r\n        const idx = currentFocus.value.split('-')[1];\r\n        ctx = optionEditorCtxs.value[idx];\r\n    }\r\n    \r\n    if (ctx) ctx.format(name, value);\r\n}\r\n\r\n// 通用插入图片\r\nfunction insertImage() {\r\n    let ctx = null;\r\n    if (currentFocus.value === 'stem') ctx = stemEditorCtx.value;\r\n    else if (currentFocus.value === 'analysis') ctx = analysisEditorCtx.value;\r\n    else if (currentFocus.value.startsWith('option-')) {\r\n        const idx = currentFocus.value.split('-')[1];\r\n        ctx = optionEditorCtxs.value[idx];\r\n    }\r\n\r\n    if (!ctx) return;\r\n    uni.chooseImage({\r\n        count: 1,\r\n        success: async (res) => {\r\n            const localPath = res.tempFilePaths[0];\r\n            \r\n            try {\r\n                uni.showLoading({ title: '上传中...' });\r\n                // 尝试上传图片\r\n                const url = await uploadQuestionImage(localPath);\r\n                uni.hideLoading();\r\n                \r\n                // 拼接完整 URL (如果返回的是相对路径)\r\n                const fullUrl = url.startsWith('http') ? url : `${API_BASE}${url.startsWith('/') ? '' : '/'}${url}`;\r\n\r\n                // 插入上传后的图片 URL\r\n                ctx.insertImage({ src: fullUrl, width: '80%', alt: 'image' });\r\n\r\n                // 如果是选项，记录图片地址（保留原有逻辑）\r\n                if (currentFocus.value.startsWith('option-')) {\r\n                    const idx = currentFocus.value.split('-')[1];\r\n                    if (form.value.options[idx]) {\r\n                        form.value.options[idx].images = Array.from(new Set([...(form.value.options[idx].images || []), fullUrl]));\r\n                    }\r\n                }\r\n            } catch (e) {\r\n                uni.hideLoading();\r\n                console.error('上传失败，尝试使用Base64/本地路径', e);\r\n                \r\n                // 降级处理：转 Base64 或使用本地路径\r\n                if (uni.getFileSystemManager) {\r\n                    // 小程序/App\r\n                    uni.getFileSystemManager().readFile({\r\n                        filePath: localPath,\r\n                        encoding: 'base64',\r\n                        success: (fileRes) => {\r\n                            let format = 'jpeg';\r\n                            const lower = localPath.toLowerCase();\r\n                            if (lower.endsWith('.png')) format = 'png';\r\n                            else if (lower.endsWith('.gif')) format = 'gif';\r\n                            const base64 = `data:image/${format};base64,${fileRes.data}`;\r\n                            ctx.insertImage({ src: base64, width: '80%', alt: 'image' });\r\n                        },\r\n                        fail: () => {\r\n                            ctx.insertImage({ src: localPath, width: '80%', alt: 'image' });\r\n                        }\r\n                    });\r\n                } else {\r\n                    // H5\r\n                    if (res.tempFiles && res.tempFiles[0] && typeof FileReader !== 'undefined') {\r\n                        const reader = new FileReader();\r\n                        reader.onload = (evt) => {\r\n                            ctx.insertImage({ src: evt.target.result, width: '80%', alt: 'image' });\r\n                        };\r\n                        reader.readAsDataURL(res.tempFiles[0]);\r\n                    } else {\r\n                        ctx.insertImage({ src: localPath, width: '80%', alt: 'image' });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\n// 选项编辑器\r\nfunction onOptionReady(index) {\r\n    uni.createSelectorQuery().in(instance).select('#optionEditor' + index).context((res) => {\r\n        optionEditorCtxs.value[index] = res.context;\r\n        // 如果有初始值，需要 setContents\r\n        const opt = form.value.options[index];\r\n        if (opt.text || (opt.images && opt.images.length)) {\r\n            const opt = form.value.options[index];\r\n            const html = buildOptionHtml(opt);\r\n            res.context.setContents({ html });\r\n        }\r\n    }).exec();\r\n}\r\nfunction handleOptionInput(e, index) {\r\n    form.value.options[index].text = e.detail.html;\r\n    form.value.options[index].images = extractImageUrls(e.detail.html || '');\r\n}\r\n\r\n// 解析编辑器\r\nfunction onAnalysisReady() {\r\n     uni.createSelectorQuery().in(instance).select('#analysisEditor').context((res) => {\r\n        analysisEditorCtx.value = res.context;\r\n         if (form.value.analysis) {\r\n            res.context.setContents({ html: form.value.analysis });\r\n        }\r\n    }).exec();\r\n}\r\nfunction handleAnalysisInput(e) {\r\n    form.value.analysis = e.detail.html;\r\n}\r\n\r\n// 焦点管理\r\nfunction onEditorFocus(key) {\r\n    if (blurTimer) {\r\n        clearTimeout(blurTimer);\r\n        blurTimer = null;\r\n    }\r\n    currentFocus.value = key;\r\n}\r\nfunction onEditorBlur() {\r\n    // 延迟清除焦点，防止点击工具栏时焦点丢失导致工具栏隐藏\r\n    blurTimer = setTimeout(() => {\r\n        currentFocus.value = '';\r\n        blurTimer = null;\r\n    }, 200);\r\n}\r\n\r\n// 选项操作\r\nfunction addOption() {\r\n  if (optionsDisabled.value) return;\r\n  const nextLabel = String.fromCharCode(65 + form.value.options.length);\r\n  form.value.options.push({ label: nextLabel, text: '', images: [] });\r\n}\r\n\r\nfunction removeOption(index) {\r\n  if (!canRemoveOption.value) return;\r\n  const removed = form.value.options.splice(index, 1)[0];\r\n  // 清理已选答案\r\n  form.value.answers = form.value.answers.filter(a => a !== removed.label);\r\n  // 重置Label顺序\r\n  form.value.options.forEach((item, idx) => {\r\n    item.label = String.fromCharCode(65 + idx);\r\n  });\r\n}\r\n\r\n// 答案选择 (模拟Checkbox/Radio行为)\r\nfunction toggleAnswer(label) {\r\n    if (isSingle.value) {\r\n        // 单选：如果点了已选的，不取消（通常逻辑），或者切换\r\n        form.value.answers = [label];\r\n    } else {\r\n        // 多选\r\n        const idx = form.value.answers.indexOf(label);\r\n        if (idx > -1) {\r\n            form.value.answers.splice(idx, 1);\r\n        } else {\r\n            form.value.answers.push(label);\r\n        }\r\n    }\r\n}\r\n\r\n// 批量添加\r\nfunction openBulkPopup() {\r\n    bulkText.value = '';\r\n    bulkPopup.value.open();\r\n}\r\nfunction applyBulkOptions() {\r\n    const lines = bulkText.value.split('\\n').filter(s => s.trim());\r\n    // 简单填充逻辑：有空位填空位，没空位加选项\r\n    let currentIdx = 0;\r\n    // 先填现有的\r\n    while(currentIdx < form.value.options.length && lines.length > 0) {\r\n        if(!form.value.options[currentIdx].text) {\r\n            form.value.options[currentIdx].text = lines.shift();\r\n            form.value.options[currentIdx].images = [];\r\n        }\r\n        currentIdx++;\r\n    }\r\n    // 剩下的新增\r\n    while(lines.length > 0 && !optionsDisabled.value) {\r\n         const nextLabel = String.fromCharCode(65 + form.value.options.length);\r\n         form.value.options.push({ label: nextLabel, text: lines.shift(), images: [] });\r\n    }\r\n    bulkPopup.value.close();\r\n}\r\n\r\n// 填空操作\r\nfunction addBlank() {\r\n  form.value.blanks.push({ id: Date.now(), text: '' });\r\n}\r\nfunction removeBlank(index) {\r\n  form.value.blanks.splice(index, 1);\r\n}\r\n\r\n// 底部选择器\r\nfunction chooseCategory() {\r\n  if (!categories.value.length) {\r\n    loadCategories();\r\n  }\r\n  categoryPopup.value.open();\r\n}\r\nfunction openEditCategory() {\r\n  editCategoryPopup.value.open();\r\n}\r\nfunction selectCategory(item) {\r\n    form.value.categoryId = item.id;\r\n    form.value.categoryName = item.name;\r\n    categoryPopup.value.close();\r\n}\r\n\r\n// 章节编辑方法\r\nfunction addCategory() {\r\n    uni.showModal({\r\n        title: '添加章节',\r\n        editable: true,\r\n        placeholderText: '请输入章节名称',\r\n        success: async (res) => {\r\n            if (res.confirm && res.content) {\r\n                try {\r\n                    await createCategory({ name: res.content, status: 1 });\r\n                    await loadCategories();\r\n                    uni.showToast({ title: '创建成功', icon: 'success' });\r\n                } catch (err) {\r\n                    console.error(err);\r\n                    uni.showToast({ title: err.message || '创建失败', icon: 'none' });\r\n                }\r\n            }\r\n        }\r\n    });\r\n}\r\nfunction addSubCategory(parentIndex) {\r\n    uni.showModal({\r\n        title: '添加子章节',\r\n        editable: true,\r\n        placeholderText: '请输入子章节名称',\r\n        success: async (res) => {\r\n            if (res.confirm && res.content) {\r\n                const parent = categories.value[parentIndex];\r\n                try {\r\n                    await createCategory({ name: res.content, status: 1, parentId: parent.id });\r\n                    await loadCategories();\r\n                    categories.value[parentIndex].expanded = true;\r\n                    uni.showToast({ title: '创建成功', icon: 'success' });\r\n                } catch (err) {\r\n                    console.error(err);\r\n                    uni.showToast({ title: err.message || '创建失败', icon: 'none' });\r\n                }\r\n            }\r\n        }\r\n    });\r\n}\r\nfunction editCategory(item) {\r\n    uni.showModal({\r\n        title: '修改名称',\r\n        editable: true,\r\n        content: item.name,\r\n        placeholderText: '请输入名称',\r\n        success: async (res) => {\r\n            if (res.confirm && res.content) {\r\n                try {\r\n                    await updateCategory(item.id, { name: res.content, status: 1, parentId: item.parentId });\r\n                    await loadCategories();\r\n                    uni.showToast({ title: '更新成功', icon: 'success' });\r\n                } catch (err) {\r\n                    console.error(err);\r\n                    uni.showToast({ title: err.message || '更新失败', icon: 'none' });\r\n                }\r\n            }\r\n        }\r\n    });\r\n}\r\nfunction removeCategory(index) {\r\n    uni.showModal({\r\n        title: '提示',\r\n        content: '确定要删除该章节吗？',\r\n        success: async (res) => {\r\n            if (res.confirm) {\r\n                try {\r\n                    await deleteCategory(categories.value[index].id);\r\n                    await loadCategories();\r\n                    uni.showToast({ title: '删除成功', icon: 'success' });\r\n                } catch (err) {\r\n                    console.error(err);\r\n                    uni.showToast({ title: err.message || '删除失败', icon: 'none' });\r\n                }\r\n            }\r\n        }\r\n    });\r\n}\r\nfunction removeSubCategory(parentIndex, subIndex) {\r\n    uni.showModal({\r\n        title: '提示',\r\n        content: '确定要删除该子章节吗？',\r\n        success: async (res) => {\r\n            if (res.confirm) {\r\n                try {\r\n                    await deleteCategory(categories.value[parentIndex].children[subIndex].id);\r\n                    await loadCategories();\r\n                    uni.showToast({ title: '删除成功', icon: 'success' });\r\n                } catch (err) {\r\n                    console.error(err);\r\n                    uni.showToast({ title: err.message || '删除失败', icon: 'none' });\r\n                }\r\n            }\r\n        }\r\n    });\r\n}\r\nfunction moveCategory(index, direction) {\r\n    const newIndex = index + direction;\r\n    if (newIndex >= 0 && newIndex < categories.value.length) {\r\n        const temp = categories.value[index];\r\n        categories.value[index] = categories.value[newIndex];\r\n        categories.value[newIndex] = temp;\r\n    }\r\n}\r\nfunction moveSubCategory(parentIndex, subIndex, direction) {\r\n    const children = categories.value[parentIndex].children;\r\n    const newIndex = subIndex + direction;\r\n    if (newIndex >= 0 && newIndex < children.length) {\r\n        const temp = children[subIndex];\r\n        children[subIndex] = children[newIndex];\r\n        children[newIndex] = temp;\r\n    }\r\n}\r\nfunction toggleExpand(cat) {\r\n    cat.expanded = !cat.expanded;\r\n}\r\n\r\nfunction openDifficulty() {\r\n  uni.showActionSheet({\r\n    itemList: difficultyOptions.map(d => d.text),\r\n    success: (res) => {\r\n      form.value.difficulty = difficultyOptions[res.tapIndex].value;\r\n    }\r\n  });\r\n}\r\nfunction renderDifficulty(val) {\r\n  const t = difficultyOptions.find(d => d.value === val);\r\n  return t ? t.text : '';\r\n}\r\n\r\nfunction normalizeBackendType(val) {\r\n  const upper = String(val || '').toUpperCase();\r\n  if (upper.includes('MULT')) return 'MULTIPLE';\r\n  if (upper.includes('TRUE') || upper.includes('JUDGE')) return 'JUDGE';\r\n  if (upper.includes('FILL') || upper.includes('SHORT')) return 'FILL';\r\n  return 'SINGLE';\r\n}\r\n\r\nfunction splitAnswerList(val) {\r\n  if (!val) return [];\r\n  if (Array.isArray(val)) return val.map((i) => String(i).toUpperCase());\r\n  return String(val)\r\n    .split(/[,;\\s]+/)\r\n    .map((s) => s.trim())\r\n    .filter(Boolean)\r\n    .map((s) => s.toUpperCase());\r\n}\r\n\r\nfunction extractImageUrls(html = '') {\r\n  const urls = [];\r\n  const regex = /<img[^>]+src=[\"']?([^\"'>\\s]+)[\"']?[^>]*>/gi;\r\n  let match = regex.exec(html);\r\n  while (match) {\r\n    if (match[1]) urls.push(match[1]);\r\n    match = regex.exec(html);\r\n  }\r\n  return Array.from(new Set(urls));\r\n}\r\n\r\nfunction buildOptionHtml(opt) {\r\n  const text = opt?.text || '';\r\n  const imgs = Array.isArray(opt?.images) ? opt.images : [];\r\n  const imgHtml = imgs.map((src) => `<p><img src=\"${src}\" style=\"max-width:100%;\"/></p>`).join('');\r\n  return text + imgHtml;\r\n}\r\n\r\nfunction parseOptionList(rawOptions, answers = []) {\r\n  let list = [];\r\n  if (typeof rawOptions === 'string') {\r\n    try {\r\n      list = JSON.parse(rawOptions);\r\n    } catch (err) {\r\n      list = [];\r\n    }\r\n  } else if (Array.isArray(rawOptions)) {\r\n    list = rawOptions;\r\n  }\r\n  if (!Array.isArray(list)) return [];\r\n  return list.map((opt, idx) => {\r\n    const value = (opt.value || opt.label || String.fromCharCode(65 + idx)).toString().toUpperCase();\r\n    return {\r\n      label: value,\r\n      text: opt.label || opt.text || '',\r\n      images: Array.isArray(opt.images) ? opt.images : [],\r\n      correct: answers.includes(value),\r\n    };\r\n  });\r\n}\r\n\r\nfunction restoreEditorContents() {\r\n  nextTick(() => {\r\n    if (stemEditorCtx.value && stemEditorCtx.value.setContents) {\r\n      stemEditorCtx.value.setContents({ html: form.value.stemHtml || '<p></p>' });\r\n    }\r\n    if (analysisEditorCtx.value && analysisEditorCtx.value.setContents) {\r\n      analysisEditorCtx.value.setContents({ html: form.value.analysis || '<p></p>' });\r\n    }\r\n    form.value.options.forEach((opt, idx) => {\r\n      const ctx = optionEditorCtxs.value[idx];\r\n      if (ctx && ctx.setContents) {\r\n        ctx.setContents({ html: opt.text || '<p></p>' });\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\nfunction findCategoryName(list = [], id) {\r\n  if (id === undefined || id === null || id === '') return '';\r\n  for (const item of list || []) {\r\n    if (`${item.id}` === `${id}`) return item.name;\r\n    const childName = findCategoryName(item.children, id);\r\n    if (childName) return childName;\r\n  }\r\n  return '';\r\n}\r\n\r\nfunction stripHtml(html = '') {\r\n  return html.replace(/<[^>]*>/g, ' ').replace(/&nbsp;/g, ' ').trim();\r\n}\r\n\r\nfunction buildPayload() {\r\n  const stemRaw = form.value.stemHtml || '';\r\n  const stemText = stripHtml(stemRaw);\r\n  if (!stemText && !stemRaw.trim()) {\r\n    uni.showToast({ title: '请输入题干', icon: 'none' });\r\n    return null;\r\n  }\r\n  const categoryId = Number(form.value.categoryId);\r\n  if (!categoryId) {\r\n    uni.showToast({ title: '请选择章节', icon: 'none' });\r\n    return null;\r\n  }\r\n  if (!form.value.difficulty) {\r\n    uni.showToast({ title: '请选择难度', icon: 'none' });\r\n    return null;\r\n  }\r\n\r\n  let answerList = [];\r\n  let optionPayload = [];\r\n  if (form.value.type === 'FILL') {\r\n    answerList = form.value.blanks.map((b) => stripHtml(b.text || '')).filter(Boolean);\r\n    if (!answerList.length) {\r\n      uni.showToast({ title: '请填写填空答案', icon: 'none' });\r\n      return null;\r\n    }\r\n  } else if (isChoice.value) {\r\n    if (!form.value.options.length) {\r\n      uni.showToast({ title: '请添加选项', icon: 'none' });\r\n      return null;\r\n    }\r\n    let hasEmptyOption = false;\r\n    const cleanedOptions = form.value.options.map((opt, idx) => {\r\n      const value = opt.label || String.fromCharCode(65 + idx);\r\n      const rawText = opt.text || '';\r\n      const cleanText = stripHtml(rawText);\r\n      const labelText = cleanText || (Array.isArray(opt.images) && opt.images.length ? '[图片选项]' : rawText) || value;\r\n      if (!cleanText && !rawText.trim() && (!opt.images || opt.images.length === 0)) {\r\n        hasEmptyOption = true;\r\n      }\r\n      return {\r\n        value,\r\n        label: labelText,\r\n        correct: form.value.answers.includes(value),\r\n        images: Array.isArray(opt.images) ? opt.images : [],\r\n      };\r\n    });\r\n    if (hasEmptyOption) {\r\n      uni.showToast({ title: '请完善所有选项内容', icon: 'none' });\r\n      return null;\r\n    }\r\n    if (cleanedOptions.some((opt) => !opt.label)) {\r\n      uni.showToast({ title: '请输入完整选项内容', icon: 'none' });\r\n      return null;\r\n    }\r\n    if (form.value.answers.length === 0) {\r\n      uni.showToast({ title: '请勾选正确答案', icon: 'none' });\r\n      return null;\r\n    }\r\n    optionPayload = cleanedOptions;\r\n    answerList = [...form.value.answers];\r\n  }\r\n\r\n  const normalizedAnswersRaw = answerList\r\n    .map((item) => (item || '').toString().trim())\r\n    .filter(Boolean)\r\n    .map((val) => (form.value.type === 'FILL' ? val : val.toUpperCase()));\r\n  const normalizedAnswers = form.value.type === 'FILL'\r\n    ? normalizedAnswersRaw\r\n    : normalizedAnswersRaw.sort();\r\n\r\n  const payload = {\r\n    title: form.value.stemHtml,\r\n    type: form.value.type,\r\n    answer: normalizedAnswers.join(','),\r\n    explanation: form.value.analysis || '',\r\n    categoryId,\r\n    difficulty: form.value.difficulty,\r\n  };\r\n  if (optionPayload.length) {\r\n    payload.options = JSON.stringify(optionPayload);\r\n  }\r\n  return payload;\r\n}\r\n\r\nfunction resetForm() {\r\n  questionId.value = null;\r\n  form.value.stemHtml = '';\r\n  form.value.analysis = '';\r\n  form.value.answers = [];\r\n  form.value.blanks = [{ id: Date.now(), text: '' }];\r\n  \r\n  if (form.value.type === 'JUDGE') {\r\n    form.value.options = [\r\n      { label: 'A', text: '正确', images: [] },\r\n      { label: 'B', text: '错误', images: [] },\r\n    ];\r\n  } else {\r\n    form.value.options = createDefaultOptions(4);\r\n  }\r\n  restoreEditorContents();\r\n}\r\n\r\nasync function submit() {\r\n  const payload = buildPayload();\r\n  if (!payload || saving.value) return;\r\n  saving.value = true;\r\n  try {\r\n    if (questionId.value) {\r\n      await updateQuestion(questionId.value, payload);\r\n      uni.showToast({ title: '更新成功', icon: 'success' });\r\n    } else {\r\n      await createQuestion(payload);\r\n      uni.showToast({ title: '添加成功', icon: 'success' });\r\n      resetForm();\r\n    }\r\n  } catch (err) {\r\n    console.error(err);\r\n    uni.showToast({ title: err.message || '提交失败', icon: 'none' });\r\n  } finally {\r\n    saving.value = false;\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n/* 全局样式重置 */\r\n.page {\r\n  min-height: 100vh;\r\n  background-color: #fff;\r\n  padding-bottom: 40rpx;\r\n}\r\n\r\n/* 模拟导航栏 */\r\n.nav-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 44px 16px 12px; /* 适配刘海屏大致高度 */\r\n    background: #fff;\r\n    border-bottom: 1px solid #eee;\r\n}\r\n.nav-title {\r\n    font-size: 17px;\r\n    font-weight: 600;\r\n}\r\n.nav-actions {\r\n    display: flex;\r\n    gap: 8px;\r\n}\r\n\r\n.content {\r\n  padding: 0 32rpx;\r\n}\r\n\r\n/* 必填红星 */\r\n.required::before {\r\n  content: '*';\r\n  color: #ff4d4f;\r\n  margin-right: 4rpx;\r\n}\r\n.required-mark::before {\r\n    content: '*';\r\n    color: #ff4d4f;\r\n    margin-right: 4rpx;\r\n}\r\n\r\n/* 通用标签 */\r\n.label {\r\n    font-size: 32rpx;\r\n    color: #333;\r\n    font-weight: 500;\r\n}\r\n.sub-label {\r\n    font-size: 26rpx;\r\n    color: #666;\r\n}\r\n\r\n/* 单元格样式 (题型、底部选项) */\r\n.cell-group {\r\n    margin-top: 20rpx;\r\n}\r\n.cell-item {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 30rpx 0;\r\n    border-bottom: 1rpx solid #f5f5f5;\r\n    font-size: 30rpx;\r\n    color: #333;\r\n}\r\n.value-text {\r\n    flex: 1;\r\n    text-align: right;\r\n    margin-right: 12rpx;\r\n    color: #333;\r\n}\r\n.label-text {\r\n    color: #333;\r\n    font-size: 30rpx;\r\n}\r\n.right-content {\r\n    display: flex;\r\n    align-items: center;\r\n    color: #666;\r\n}\r\n.mt-20 {\r\n    margin-top: 40rpx;\r\n}\r\n\r\n/* 编辑区域 */\r\n.section {\r\n    margin-top: 30rpx;\r\n}\r\n.section-header {\r\n    margin-bottom: 20rpx;\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n.section-header.space-between {\r\n    justify-content: space-between;\r\n}\r\n.row-center {\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n\r\n/* 题干工具栏 */\r\n.toolbar {\r\n    display: flex;\r\n    gap: 20rpx;\r\n    background: #f8f8f8;\r\n    padding: 12rpx;\r\n    border-radius: 8rpx 8rpx 0 0;\r\n    border-bottom: 1rpx solid #eee;\r\n}\r\n.tool-btn {\r\n    padding: 4rpx 12rpx;\r\n    font-size: 28rpx;\r\n    color: #333;\r\n    border-radius: 4rpx;\r\n}\r\n.tool-btn.active {\r\n    background-color: #e6f1fc;\r\n    color: #007aff;\r\n}\r\n\r\n/* 编辑器容器 */\r\n.editor-box {\r\n    background: #f5f7fa; /* 截图中的浅灰色背景 */\r\n    border-radius: 12rpx;\r\n    padding: 16rpx 24rpx;\r\n    min-height: 80rpx;\r\n}\r\n.ql-editor {\r\n    min-height: 48rpx;\r\n    font-size: 30rpx;\r\n    line-height: 1.6;\r\n}\r\n\r\n/* 选项列表 */\r\n.option-list {\r\n    margin-top: 10rpx;\r\n}\r\n.option-item {\r\n    display: flex;\r\n    align-items: center;\r\n    margin-bottom: 24rpx;\r\n}\r\n.icon-wrap {\r\n    width: 60rpx;\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n}\r\n.option-label {\r\n    width: 40rpx;\r\n    font-size: 32rpx;\r\n    color: #333;\r\n    margin-right: 8rpx;\r\n}\r\n.input-wrap-editor {\r\n    flex: 1;\r\n    width: 0; /* 防止被内容撑开 */\r\n    background: #f5f7fa;\r\n    border-radius: 12rpx;\r\n    padding: 16rpx 24rpx;\r\n    margin-right: 20rpx;\r\n    min-height: 80rpx;\r\n    /* 让 editor 自然流布局 */\r\n}\r\n.judge-text-wrap {\r\n    flex: 1;\r\n    display: flex;\r\n    align-items: center;\r\n    min-height: 80rpx;\r\n    padding: 0 24rpx;\r\n}\r\n.judge-text {\r\n    font-size: 30rpx;\r\n    color: #333;\r\n}\r\n.input-wrap {\r\n    flex: 1;\r\n    width: 0; /* 防止被内容撑开 */\r\n    background: #f5f7fa;\r\n    border-radius: 12rpx;\r\n    padding: 16rpx 24rpx;\r\n    margin-right: 20rpx;\r\n    min-height: 80rpx;\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n.gray-input {\r\n    font-size: 28rpx;\r\n    color: #333;\r\n    width: 100%;\r\n}\r\n.ql-editor-option {\r\n    min-height: 48rpx;\r\n    font-size: 28rpx;\r\n    line-height: 1.6;\r\n    width: 100%;\r\n    word-break: break-all;\r\n    white-space: pre-wrap;\r\n}\r\n/* 右侧勾选圈 */\r\n.check-wrap {\r\n    width: 50rpx;\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    align-items: center;\r\n}\r\n.radio-circle {\r\n    width: 40rpx;\r\n    height: 40rpx;\r\n    border-radius: 50%;\r\n    border: 2rpx solid #dcdfe6;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n.radio-circle.active {\r\n    border-color: #007aff; /* 蓝色 */\r\n}\r\n.inner-dot {\r\n    width: 24rpx;\r\n    height: 24rpx;\r\n    background: #007aff;\r\n    border-radius: 50%;\r\n}\r\n\r\n/* 添加选项按钮 */\r\n.add-row {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-top: 20rpx;\r\n}\r\n.add-btn {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8rpx;\r\n}\r\n.add-btn.disabled {\r\n    opacity: 0.5;\r\n}\r\n.add-text {\r\n    font-size: 30rpx;\r\n    color: #007aff;\r\n}\r\n.bulk-btn {\r\n    border: 1rpx solid #007aff;\r\n    color: #007aff;\r\n    font-size: 24rpx;\r\n    padding: 6rpx 20rpx;\r\n    border-radius: 30rpx;\r\n}\r\n\r\n/* 解析 */\r\n.textarea-box {\r\n    background: #f5f7fa;\r\n    border-radius: 12rpx;\r\n    padding: 16rpx 24rpx;\r\n    min-height: 80rpx;\r\n}\r\n.gray-textarea {\r\n    width: 100%;\r\n    font-size: 28rpx;\r\n    color: #333;\r\n    min-height: 100rpx;\r\n}\r\n\r\n/* 底部按钮 */\r\n.footer-bar {\r\n    position: fixed;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    padding: 20rpx 32rpx 40rpx; /* 适配底部安全区 */\r\n    background: #fff;\r\n    z-index: 99;\r\n    border-top: 1rpx solid #f0f0f0;\r\n}\r\n.submit-btn {\r\n    background: #007aff;\r\n    color: #fff;\r\n    border-radius: 44rpx;\r\n    font-size: 32rpx;\r\n    height: 88rpx;\r\n    line-height: 88rpx;\r\n    border: none;\r\n}\r\n.submit-btn::after {\r\n    border: none;\r\n}\r\n.btn-hover {\r\n    opacity: 0.9;\r\n}\r\n\r\n/* 弹窗样式 */\r\n.dialog-content {\r\n    width: 100%;\r\n    padding: 20rpx 0;\r\n}\r\n.bulk-textarea {\r\n    width: 100%;\r\n    height: 300rpx;\r\n    background: #f5f7fa;\r\n    padding: 10rpx;\r\n    border-radius: 8rpx;\r\n    font-size: 28rpx;\r\n}\r\n\r\n/* 底部弹窗样式 */\r\n.popup-container {\r\n    background-color: #fff;\r\n    border-radius: 20rpx 20rpx 0 0;\r\n    overflow: hidden;\r\n    display: flex;\r\n    flex-direction: column;\r\n    max-height: 80vh;\r\n}\r\n.popup-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 30rpx;\r\n    border-bottom: 1rpx solid #eee;\r\n}\r\n.title {\r\n    font-size: 32rpx;\r\n    font-weight: 500;\r\n    color: #333;\r\n}\r\n.cancel-btn {\r\n    font-size: 28rpx;\r\n    color: #999;\r\n}\r\n.confirm-btn {\r\n    font-size: 28rpx;\r\n    color: #007aff;\r\n}\r\n.popup-content {\r\n    padding: 20rpx 30rpx;\r\n    max-height: 60vh;\r\n}\r\n\r\n/* 章节列表 */\r\n.category-item {\r\n    padding: 24rpx 0;\r\n    border-bottom: 1rpx solid #f5f5f5;\r\n    font-size: 30rpx;\r\n    color: #333;\r\n}\r\n.sub-category-item {\r\n    padding: 24rpx 0 24rpx 40rpx;\r\n    border-bottom: 1rpx solid #f5f5f5;\r\n    font-size: 28rpx;\r\n    color: #666;\r\n}\r\n\r\n/* 编辑章节列表 */\r\n.edit-item {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 20rpx 0;\r\n    border-bottom: 1rpx solid #f5f5f5;\r\n}\r\n.edit-item.sub-item {\r\n    padding-left: 40rpx;\r\n}\r\n.left-part {\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n.right-actions {\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n.action-box {\r\n    width: 60rpx;\r\n    height: 60rpx;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n.ml-10 {\r\n    margin-left: 20rpx;\r\n}\r\n.ml-20 {\r\n    margin-left: 40rpx;\r\n}\r\n.add-category-btn {\r\n    margin-top: 40rpx;\r\n    margin-bottom: 40rpx;\r\n    display: flex;\r\n    justify-content: center;\r\n}\r\n.btn-outline {\r\n    background: #fff;\r\n    color: #007aff;\r\n    border: 1rpx solid #007aff;\r\n    border-radius: 44rpx;\r\n    font-size: 30rpx;\r\n    padding: 0 60rpx;\r\n    height: 72rpx;\r\n    line-height: 72rpx;\r\n}\r\n.btn-outline::after {\r\n    border: none;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'E:/project/practice-app/practice-app-ui/pages/import-question/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["getCurrentInstance","ref","computed","onLoad","uni","fetchCategoryTree","fetchQuestionRaw","uploadQuestionImage","API_BASE","opt","createCategory","updateCategory","deleteCategory","nextTick","updateQuestion","createQuestion"],"mappings":";;;;;;;;;;;;;;;;;;;;AA2SA,UAAM,gBAAgB;AAAA,MACpB,EAAE,OAAO,UAAU,MAAM,MAAO;AAAA,MAChC,EAAE,OAAO,YAAY,MAAM,MAAO;AAAA,MAClC,EAAE,OAAO,SAAS,MAAM,MAAO;AAAA,MAC/B,EAAE,OAAO,QAAQ,MAAM,MAAO;AAAA,IAChC;AAEA,UAAM,oBAAoB;AAAA,MACxB,EAAE,OAAO,QAAQ,MAAM,KAAM;AAAA,MAC7B,EAAE,OAAO,UAAU,MAAM,KAAM;AAAA,MAC/B,EAAE,OAAO,QAAQ,MAAM,KAAM;AAAA,IAC/B;AAEA,UAAM,WAAWA,cAAkB,mBAAA;AAEnC,UAAM,OAAOC,cAAAA,IAAI,QAAQ;AACzB,UAAM,aAAaA,cAAAA,IAAI,IAAI;AAC3B,UAAM,UAAUA,cAAAA,IAAI,KAAK;AACzB,UAAM,SAASA,cAAAA,IAAI,KAAK;AACAA,kBAAG,IAAC,KAAK;AACjC,UAAM,gBAAgBA,cAAAA,IAAI,IAAI;AAC9B,UAAM,oBAAoBA,cAAAA,IAAI,IAAI;AAClC,UAAM,mBAAmBA,cAAAA,IAAI,CAAA,CAAE;AAC/B,UAAM,eAAeA,cAAAA,IAAI,EAAE;AAC3B,UAAM,YAAYA,cAAAA,IAAI,IAAI;AAC1B,UAAM,WAAWA,cAAAA,IAAI,EAAE;AACvB,UAAM,UAAUA,cAAAA,IAAI,CAAA,CAAE;AACtB,QAAI,YAAY;AAEhB,UAAM,gBAAgBA,cAAAA,IAAI,IAAI;AAC9B,UAAM,oBAAoBA,cAAAA,IAAI,IAAI;AAClC,UAAM,aAAaA,cAAAA,IAAI,CAAA,CAAE;AAGzB,UAAM,OAAOA,cAAAA,IAAI;AAAA,MACf,MAAM;AAAA;AAAA,MACN,UAAU;AAAA,MACV,SAAS,qBAAqB,CAAC;AAAA,MAC/B,SAAS,CAAE;AAAA,MACX,QAAQ,CAAC,EAAE,IAAI,KAAK,OAAO,MAAM,IAAI;AAAA,MACrC,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,cAAc;AAAA,MACd,YAAY;AAAA;AAAA,IACd,CAAC;AAGD,UAAM,YAAYC,cAAQ,SAAC,MAAM;AAC7B,YAAM,IAAI,cAAc,KAAK,OAAK,EAAE,UAAU,KAAK,MAAM,IAAI;AAC7D,aAAO,IAAI,EAAE,OAAO;AAAA,IACxB,CAAC;AACD,UAAM,WAAWA,cAAQ,SAAC,MAAM,CAAC,UAAU,YAAY,OAAO,EAAE,SAAS,KAAK,MAAM,IAAI,CAAC;AACzF,UAAM,WAAWA,cAAQ,SAAC,MAAM,CAAC,UAAU,OAAO,EAAE,SAAS,KAAK,MAAM,IAAI,CAAC;AAC7E,UAAM,kBAAkBA,cAAQ,SAAC,MAAM,KAAK,MAAM,QAAQ,SAAS,KAAK,KAAK,MAAM,SAAS,OAAO;AACnG,UAAM,kBAAkBA,cAAQ,SAAC,MAAM,KAAK,MAAM,QAAQ,UAAU,KAAK,KAAK,MAAM,SAAS,OAAO;AACpG,UAAM,aAAaA,cAAQ,SAAC,MAAO,WAAW,QAAQ,SAAS,MAAO;AAEtEC,kBAAM,OAAC,CAAC,UAAU;AAChB,WAAK,QAAQ,MAAM,QAAQ;AAC3B,UAAI,MAAM,IAAI;AACZ,cAAM,SAAS,OAAO,MAAM,EAAE;AAC9B,mBAAW,QAAQ,OAAO,MAAM,MAAM,IAAI,MAAM,KAAK;AAAA,MACtD;AACD;IACF,CAAC;AAGD,mBAAe,WAAW;AACxB,cAAQ,QAAQ;AAChB,UAAI;AACF,cAAM,eAAc;AACpB,YAAI,WAAW,OAAO;AACpB,gBAAM,mBAAmB,WAAW,KAAK;AAAA,QAC1C;AAAA,MACF,SAAQ,KAAK;AACZC,sBAAAA,MAAA,MAAA,SAAA,0CAAc,GAAG;AACjBA,4BAAI,UAAU,EAAE,OAAO,IAAI,WAAW,SAAS,MAAM,OAAM,CAAE;AAAA,MACjE,UAAY;AACR,gBAAQ,QAAQ;AAAA,MACjB;AAAA,IACH;AAEA,mBAAe,iBAAiB;AAC9B,UAAI;AACF,cAAM,OAAO,MAAMC,eAAAA;AACnB,cAAM,gBAAgB,CAAC,QAAQ,CAAE,OAC9B,SAAS,CAAA,GAAI,IAAI,CAAC,UAAU;AAAA,UAC3B,GAAG;AAAA,UACH,UAAU,KAAK,YAAY;AAAA,UAC3B,UAAU,cAAc,KAAK,YAAY,CAAA,CAAE;AAAA,QAC5C,EAAC;AACJ,mBAAW,QAAQ,MAAM,QAAQ,IAAI,IAAI,cAAc,IAAI,IAAI;AAC/D,YAAI,KAAK,MAAM,YAAY;AACzB,eAAK,MAAM,eAAe,iBAAiB,WAAW,OAAO,KAAK,MAAM,UAAU;AAAA,QACnF;AAAA,MACF,SAAQ,KAAK;AACZD,sBAAA,MAAA,MAAA,SAAA,0CAAc,0BAA0B,GAAG;AAC3CA,sBAAG,MAAC,UAAU,EAAE,OAAO,UAAU,MAAM,OAAM,CAAE;AAAA,MAChD;AAAA,IACH;AAEA,aAAS,qBAAqB,QAAQ,GAAG;AACvC,aAAO,MAAM,KAAK,EAAE,QAAQ,MAAO,CAAA,EAAE,IAAI,CAAC,GAAG,SAAS;AAAA,QACpD,OAAO,OAAO,aAAa,KAAK,GAAG;AAAA,QACnC,MAAM;AAAA,QACN,QAAQ,CAAE;AAAA,MACX,EAAC;AAAA,IACJ;AAGA,aAAS,iBAAiB;AACtBA,oBAAAA,MAAI,gBAAgB;AAAA,QAChB,UAAU,cAAc,IAAI,OAAK,EAAE,IAAI;AAAA,QACvC,SAAS,CAAC,QAAQ;AACd,2BAAiB,cAAc,IAAI,QAAQ,EAAE,KAAK;AAAA,QACrD;AAAA,MACT,CAAK;AAAA,IACL;AAEA,aAAS,iBAAiB,KAAK;AAC7B,WAAK,MAAM,OAAO;AAClB,WAAK,MAAM,UAAU;AAErB,UAAI,QAAQ,SAAS;AAEnB,aAAK,MAAM,UAAU;AAAA,UACnB,EAAE,OAAO,KAAK,MAAM,MAAM,QAAQ,CAAA,EAAI;AAAA,UACtC,EAAE,OAAO,KAAK,MAAM,MAAM,QAAQ,CAAA,EAAI;AAAA,QAC5C;AAAA,MACA,WAAa,QAAQ,QAAQ;AAEzB,YAAI,CAAC,KAAK,MAAM,UAAU,KAAK,MAAM,OAAO,WAAW,GAAG;AACxD,eAAK,MAAM,SAAS,CAAC,EAAE,IAAI,KAAK,OAAO,MAAM,GAAE,CAAE;AAAA,QAClD;AAAA,MACL,OAAS;AAKL,cAAM,cAAc,KAAK,MAAM,QAAQ,WAAW,KAC9B,KAAK,MAAM,QAAQ,CAAC,EAAE,SAAS,QAC/B,KAAK,MAAM,QAAQ,CAAC,EAAE,SAAS;AAGnD,YAAI,eAAe,KAAK,MAAM,QAAQ,WAAW,GAAG;AAClD,eAAK,MAAM,UAAU,qBAAqB,CAAC;AAAA,QAC5C;AAAA,MACF;AAAA,IACH;AAEA,mBAAe,mBAAmB,IAAI;AACpC,UAAI;AACF,cAAM,SAAS,MAAME,+BAAiB,EAAE;AACxC,YAAI,CAAC,QAAQ;AACXF,wBAAG,MAAC,UAAU,EAAE,OAAO,SAAS,MAAM,OAAM,CAAE;AAC9C;AAAA,QACD;AACD,cAAM,OAAO,qBAAqB,OAAO,IAAI;AAC7C,cAAM,UAAU,gBAAgB,OAAO,MAAM;AAC7C,aAAK,MAAM,OAAO;AAClB,aAAK,MAAM,WAAW,OAAO,SAAS;AACtC,aAAK,MAAM,WAAW,OAAO,eAAe;AAC5C,aAAK,MAAM,aAAa,OAAO,cAAc;AAC7C,aAAK,MAAM,aAAa,OAAO,cAAc;AAC7C,aAAK,MAAM,eAAe,iBAAiB,WAAW,OAAO,OAAO,UAAU;AAE9E,YAAI,SAAS,QAAQ;AACnB,eAAK,MAAM,SAAS,QAAQ,SACxB,QAAQ,IAAI,CAAC,MAAM,SAAS,EAAE,IAAI,KAAK,IAAK,IAAG,KAAK,KAAM,EAAC,IAC3D,CAAC,EAAE,IAAI,KAAK,IAAK,GAAE,MAAM,GAAE,CAAE;AACjC,eAAK,MAAM,UAAU;QAC3B,OAAW;AACL,gBAAM,gBAAgB,gBAAgB,OAAO,eAAe,OAAO,SAAS,OAAO;AACnF,cAAI,cAAc,QAAQ;AACxB,iBAAK,MAAM,UAAU;AAAA,UAC7B,WAAiB,SAAS,SAAS;AAC3B,iBAAK,MAAM,UAAU;AAAA,cACnB,EAAE,OAAO,KAAK,MAAM,KAAM;AAAA,cAC1B,EAAE,OAAO,KAAK,MAAM,KAAM;AAAA,YACpC;AAAA,UACA,OAAa;AACL,iBAAK,MAAM,UAAU,qBAAqB,CAAC;AAAA,UAC5C;AACD,eAAK,MAAM,UAAU;AAAA,QACtB;AACD;MACD,SAAQ,KAAK;AACZA,sBAAA,MAAA,MAAA,SAAA,0CAAc,wBAAwB,GAAG;AACzCA,4BAAI,UAAU,EAAE,OAAO,IAAI,WAAW,UAAU,MAAM,OAAM,CAAE;AAAA,MAC/D;AAAA,IACH;AAGA,aAAS,YAAY,GAAG;AAEtBA,0BAAI,sBAAsB,GAAG,QAAQ,EAAE,OAAO,aAAa,EAAE,QAAQ,CAAC,QAAQ;AAC5E,sBAAc,QAAQ,IAAI;AAC1B,YAAI,KAAK,MAAM,UAAU;AACvB,cAAI,QAAQ,YAAY,EAAE,MAAM,KAAK,MAAM,SAAQ,CAAE;AAAA,QACtD;AAAA,MACL,CAAG,EAAE,KAAI;AAAA,IACT;AACA,aAAS,gBAAgB,GAAG;AAC1B,WAAK,MAAM,WAAW,EAAE,OAAO;AAAA,IACjC;AACA,aAAS,eAAe,GAAG;AACzB,cAAQ,QAAQ,EAAE;AAAA,IACpB;AAGA,aAAS,cAAc,MAAM,OAAO;AAChC,UAAI,MAAM;AACV,UAAI,aAAa,UAAU;AAAQ,cAAM,cAAc;AAAA,eAC9C,aAAa,UAAU;AAAY,cAAM,kBAAkB;AAAA,eAC3D,aAAa,MAAM,WAAW,SAAS,GAAG;AAC/C,cAAM,MAAM,aAAa,MAAM,MAAM,GAAG,EAAE,CAAC;AAC3C,cAAM,iBAAiB,MAAM,GAAG;AAAA,MACnC;AAED,UAAI;AAAK,YAAI,OAAO,MAAM,KAAK;AAAA,IACnC;AAGA,aAAS,cAAc;AACnB,UAAI,MAAM;AACV,UAAI,aAAa,UAAU;AAAQ,cAAM,cAAc;AAAA,eAC9C,aAAa,UAAU;AAAY,cAAM,kBAAkB;AAAA,eAC3D,aAAa,MAAM,WAAW,SAAS,GAAG;AAC/C,cAAM,MAAM,aAAa,MAAM,MAAM,GAAG,EAAE,CAAC;AAC3C,cAAM,iBAAiB,MAAM,GAAG;AAAA,MACnC;AAED,UAAI,CAAC;AAAK;AACVA,oBAAAA,MAAI,YAAY;AAAA,QACZ,OAAO;AAAA,QACP,SAAS,OAAO,QAAQ;AACpB,gBAAM,YAAY,IAAI,cAAc,CAAC;AAErC,cAAI;AACAA,0BAAAA,MAAI,YAAY,EAAE,OAAO,SAAU,CAAA;AAEnC,kBAAM,MAAM,MAAMG,kCAAoB,SAAS;AAC/CH,0BAAG,MAAC,YAAW;AAGf,kBAAM,UAAU,IAAI,WAAW,MAAM,IAAI,MAAM,GAAGI,SAAQ,QAAA,GAAG,IAAI,WAAW,GAAG,IAAI,KAAK,GAAG,GAAG,GAAG;AAGjG,gBAAI,YAAY,EAAE,KAAK,SAAS,OAAO,OAAO,KAAK,QAAO,CAAE;AAG5D,gBAAI,aAAa,MAAM,WAAW,SAAS,GAAG;AAC1C,oBAAM,MAAM,aAAa,MAAM,MAAM,GAAG,EAAE,CAAC;AAC3C,kBAAI,KAAK,MAAM,QAAQ,GAAG,GAAG;AACzB,qBAAK,MAAM,QAAQ,GAAG,EAAE,SAAS,MAAM,KAAK,oBAAI,IAAI,CAAC,GAAI,KAAK,MAAM,QAAQ,GAAG,EAAE,UAAU,CAAE,GAAG,OAAO,CAAC,CAAC;AAAA,cAC5G;AAAA,YACJ;AAAA,UACJ,SAAQ,GAAG;AACRJ,0BAAG,MAAC,YAAW;AACfA,yFAAc,wBAAwB,CAAC;AAGvC,gBAAIA,cAAAA,MAAI,sBAAsB;AAE1BA,kCAAI,qBAAsB,EAAC,SAAS;AAAA,gBAChC,UAAU;AAAA,gBACV,UAAU;AAAA,gBACV,SAAS,CAAC,YAAY;AAClB,sBAAI,SAAS;AACb,wBAAM,QAAQ,UAAU;AACxB,sBAAI,MAAM,SAAS,MAAM;AAAG,6BAAS;AAAA,2BAC5B,MAAM,SAAS,MAAM;AAAG,6BAAS;AAC1C,wBAAM,SAAS,cAAc,MAAM,WAAW,QAAQ,IAAI;AAC1D,sBAAI,YAAY,EAAE,KAAK,QAAQ,OAAO,OAAO,KAAK,QAAO,CAAE;AAAA,gBAC9D;AAAA,gBACD,MAAM,MAAM;AACR,sBAAI,YAAY,EAAE,KAAK,WAAW,OAAO,OAAO,KAAK,QAAO,CAAE;AAAA,gBACjE;AAAA,cACzB,CAAqB;AAAA,YACrB,OAAuB;AAEH,kBAAI,IAAI,aAAa,IAAI,UAAU,CAAC,KAAK,OAAO,eAAe,aAAa;AACxE,sBAAM,SAAS,IAAI;AACnB,uBAAO,SAAS,CAAC,QAAQ;AACrB,sBAAI,YAAY,EAAE,KAAK,IAAI,OAAO,QAAQ,OAAO,OAAO,KAAK,QAAS,CAAA;AAAA,gBAClG;AACwB,uBAAO,cAAc,IAAI,UAAU,CAAC,CAAC;AAAA,cAC7D,OAA2B;AACH,oBAAI,YAAY,EAAE,KAAK,WAAW,OAAO,OAAO,KAAK,QAAO,CAAE;AAAA,cACjE;AAAA,YACJ;AAAA,UACJ;AAAA,QACJ;AAAA,MACT,CAAK;AAAA,IACL;AAGA,aAAS,cAAc,OAAO;AAC1BA,oBAAAA,MAAI,oBAAmB,EAAG,GAAG,QAAQ,EAAE,OAAO,kBAAkB,KAAK,EAAE,QAAQ,CAAC,QAAQ;AACpF,yBAAiB,MAAM,KAAK,IAAI,IAAI;AAEpC,cAAM,MAAM,KAAK,MAAM,QAAQ,KAAK;AACpC,YAAI,IAAI,QAAS,IAAI,UAAU,IAAI,OAAO,QAAS;AAC/C,gBAAMK,OAAM,KAAK,MAAM,QAAQ,KAAK;AACpC,gBAAM,OAAO,gBAAgBA,IAAG;AAChC,cAAI,QAAQ,YAAY,EAAE,KAAM,CAAA;AAAA,QACnC;AAAA,MACT,CAAK,EAAE,KAAI;AAAA,IACX;AACA,aAAS,kBAAkB,GAAG,OAAO;AACjC,WAAK,MAAM,QAAQ,KAAK,EAAE,OAAO,EAAE,OAAO;AAC1C,WAAK,MAAM,QAAQ,KAAK,EAAE,SAAS,iBAAiB,EAAE,OAAO,QAAQ,EAAE;AAAA,IAC3E;AAGA,aAAS,kBAAkB;AACtBL,0BAAI,sBAAsB,GAAG,QAAQ,EAAE,OAAO,iBAAiB,EAAE,QAAQ,CAAC,QAAQ;AAC/E,0BAAkB,QAAQ,IAAI;AAC7B,YAAI,KAAK,MAAM,UAAU;AACtB,cAAI,QAAQ,YAAY,EAAE,MAAM,KAAK,MAAM,SAAQ,CAAE;AAAA,QACxD;AAAA,MACT,CAAK,EAAE,KAAI;AAAA,IACX;AACA,aAAS,oBAAoB,GAAG;AAC5B,WAAK,MAAM,WAAW,EAAE,OAAO;AAAA,IACnC;AAGA,aAAS,cAAc,KAAK;AACxB,UAAI,WAAW;AACX,qBAAa,SAAS;AACtB,oBAAY;AAAA,MACf;AACD,mBAAa,QAAQ;AAAA,IACzB;AACA,aAAS,eAAe;AAEpB,kBAAY,WAAW,MAAM;AACzB,qBAAa,QAAQ;AACrB,oBAAY;AAAA,MACf,GAAE,GAAG;AAAA,IACV;AAGA,aAAS,YAAY;AACnB,UAAI,gBAAgB;AAAO;AAC3B,YAAM,YAAY,OAAO,aAAa,KAAK,KAAK,MAAM,QAAQ,MAAM;AACpE,WAAK,MAAM,QAAQ,KAAK,EAAE,OAAO,WAAW,MAAM,IAAI,QAAQ,CAAA,EAAI,CAAA;AAAA,IACpE;AAEA,aAAS,aAAa,OAAO;AAC3B,UAAI,CAAC,gBAAgB;AAAO;AAC5B,YAAM,UAAU,KAAK,MAAM,QAAQ,OAAO,OAAO,CAAC,EAAE,CAAC;AAErD,WAAK,MAAM,UAAU,KAAK,MAAM,QAAQ,OAAO,OAAK,MAAM,QAAQ,KAAK;AAEvE,WAAK,MAAM,QAAQ,QAAQ,CAAC,MAAM,QAAQ;AACxC,aAAK,QAAQ,OAAO,aAAa,KAAK,GAAG;AAAA,MAC7C,CAAG;AAAA,IACH;AAGA,aAAS,aAAa,OAAO;AACzB,UAAI,SAAS,OAAO;AAEhB,aAAK,MAAM,UAAU,CAAC,KAAK;AAAA,MACnC,OAAW;AAEH,cAAM,MAAM,KAAK,MAAM,QAAQ,QAAQ,KAAK;AAC5C,YAAI,MAAM,IAAI;AACV,eAAK,MAAM,QAAQ,OAAO,KAAK,CAAC;AAAA,QAC5C,OAAe;AACH,eAAK,MAAM,QAAQ,KAAK,KAAK;AAAA,QAChC;AAAA,MACJ;AAAA,IACL;AAGA,aAAS,gBAAgB;AACrB,eAAS,QAAQ;AACjB,gBAAU,MAAM;IACpB;AACA,aAAS,mBAAmB;AACxB,YAAM,QAAQ,SAAS,MAAM,MAAM,IAAI,EAAE,OAAO,OAAK,EAAE,KAAM,CAAA;AAE7D,UAAI,aAAa;AAEjB,aAAM,aAAa,KAAK,MAAM,QAAQ,UAAU,MAAM,SAAS,GAAG;AAC9D,YAAG,CAAC,KAAK,MAAM,QAAQ,UAAU,EAAE,MAAM;AACrC,eAAK,MAAM,QAAQ,UAAU,EAAE,OAAO,MAAM;AAC5C,eAAK,MAAM,QAAQ,UAAU,EAAE,SAAS,CAAA;AAAA,QAC3C;AACD;AAAA,MACH;AAED,aAAM,MAAM,SAAS,KAAK,CAAC,gBAAgB,OAAO;AAC7C,cAAM,YAAY,OAAO,aAAa,KAAK,KAAK,MAAM,QAAQ,MAAM;AACpE,aAAK,MAAM,QAAQ,KAAK,EAAE,OAAO,WAAW,MAAM,MAAM,MAAK,GAAI,QAAQ,CAAA,EAAI,CAAA;AAAA,MACjF;AACD,gBAAU,MAAM;IACpB;AAGA,aAAS,WAAW;AAClB,WAAK,MAAM,OAAO,KAAK,EAAE,IAAI,KAAK,IAAK,GAAE,MAAM,GAAI,CAAA;AAAA,IACrD;AACA,aAAS,YAAY,OAAO;AAC1B,WAAK,MAAM,OAAO,OAAO,OAAO,CAAC;AAAA,IACnC;AAGA,aAAS,iBAAiB;AACxB,UAAI,CAAC,WAAW,MAAM,QAAQ;AAC5B;MACD;AACD,oBAAc,MAAM;IACtB;AACA,aAAS,mBAAmB;AAC1B,wBAAkB,MAAM;IAC1B;AACA,aAAS,eAAe,MAAM;AAC1B,WAAK,MAAM,aAAa,KAAK;AAC7B,WAAK,MAAM,eAAe,KAAK;AAC/B,oBAAc,MAAM;IACxB;AAGA,aAAS,cAAc;AACnBA,oBAAAA,MAAI,UAAU;AAAA,QACV,OAAO;AAAA,QACP,UAAU;AAAA,QACV,iBAAiB;AAAA,QACjB,SAAS,OAAO,QAAQ;AACpB,cAAI,IAAI,WAAW,IAAI,SAAS;AAC5B,gBAAI;AACA,oBAAMM,eAAAA,eAAe,EAAE,MAAM,IAAI,SAAS,QAAQ,EAAC,CAAE;AACrD,oBAAM,eAAc;AACpBN,4BAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,UAAS,CAAE;AAAA,YACnD,SAAQ,KAAK;AACVA,4BAAAA,MAAc,MAAA,SAAA,0CAAA,GAAG;AACjBA,kCAAI,UAAU,EAAE,OAAO,IAAI,WAAW,QAAQ,MAAM,OAAM,CAAE;AAAA,YAC/D;AAAA,UACJ;AAAA,QACJ;AAAA,MACT,CAAK;AAAA,IACL;AACA,aAAS,eAAe,aAAa;AACjCA,oBAAAA,MAAI,UAAU;AAAA,QACV,OAAO;AAAA,QACP,UAAU;AAAA,QACV,iBAAiB;AAAA,QACjB,SAAS,OAAO,QAAQ;AACpB,cAAI,IAAI,WAAW,IAAI,SAAS;AAC5B,kBAAM,SAAS,WAAW,MAAM,WAAW;AAC3C,gBAAI;AACA,oBAAMM,8BAAe,EAAE,MAAM,IAAI,SAAS,QAAQ,GAAG,UAAU,OAAO,GAAI,CAAA;AAC1E,oBAAM,eAAc;AACpB,yBAAW,MAAM,WAAW,EAAE,WAAW;AACzCN,4BAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,UAAS,CAAE;AAAA,YACnD,SAAQ,KAAK;AACVA,4BAAAA,MAAc,MAAA,SAAA,0CAAA,GAAG;AACjBA,kCAAI,UAAU,EAAE,OAAO,IAAI,WAAW,QAAQ,MAAM,OAAM,CAAE;AAAA,YAC/D;AAAA,UACJ;AAAA,QACJ;AAAA,MACT,CAAK;AAAA,IACL;AACA,aAAS,aAAa,MAAM;AACxBA,oBAAAA,MAAI,UAAU;AAAA,QACV,OAAO;AAAA,QACP,UAAU;AAAA,QACV,SAAS,KAAK;AAAA,QACd,iBAAiB;AAAA,QACjB,SAAS,OAAO,QAAQ;AACpB,cAAI,IAAI,WAAW,IAAI,SAAS;AAC5B,gBAAI;AACA,oBAAMO,eAAc,eAAC,KAAK,IAAI,EAAE,MAAM,IAAI,SAAS,QAAQ,GAAG,UAAU,KAAK,SAAU,CAAA;AACvF,oBAAM,eAAc;AACpBP,4BAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,UAAS,CAAE;AAAA,YACnD,SAAQ,KAAK;AACVA,4BAAAA,MAAc,MAAA,SAAA,0CAAA,GAAG;AACjBA,kCAAI,UAAU,EAAE,OAAO,IAAI,WAAW,QAAQ,MAAM,OAAM,CAAE;AAAA,YAC/D;AAAA,UACJ;AAAA,QACJ;AAAA,MACT,CAAK;AAAA,IACL;AACA,aAAS,eAAe,OAAO;AAC3BA,oBAAAA,MAAI,UAAU;AAAA,QACV,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,OAAO,QAAQ;AACpB,cAAI,IAAI,SAAS;AACb,gBAAI;AACA,oBAAMQ,eAAAA,eAAe,WAAW,MAAM,KAAK,EAAE,EAAE;AAC/C,oBAAM,eAAc;AACpBR,4BAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,UAAS,CAAE;AAAA,YACnD,SAAQ,KAAK;AACVA,4BAAAA,MAAc,MAAA,SAAA,0CAAA,GAAG;AACjBA,kCAAI,UAAU,EAAE,OAAO,IAAI,WAAW,QAAQ,MAAM,OAAM,CAAE;AAAA,YAC/D;AAAA,UACJ;AAAA,QACJ;AAAA,MACT,CAAK;AAAA,IACL;AACA,aAAS,kBAAkB,aAAa,UAAU;AAC9CA,oBAAAA,MAAI,UAAU;AAAA,QACV,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,OAAO,QAAQ;AACpB,cAAI,IAAI,SAAS;AACb,gBAAI;AACA,oBAAMQ,eAAc,eAAC,WAAW,MAAM,WAAW,EAAE,SAAS,QAAQ,EAAE,EAAE;AACxE,oBAAM,eAAc;AACpBR,4BAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,UAAS,CAAE;AAAA,YACnD,SAAQ,KAAK;AACVA,4BAAAA,MAAc,MAAA,SAAA,0CAAA,GAAG;AACjBA,kCAAI,UAAU,EAAE,OAAO,IAAI,WAAW,QAAQ,MAAM,OAAM,CAAE;AAAA,YAC/D;AAAA,UACJ;AAAA,QACJ;AAAA,MACT,CAAK;AAAA,IACL;AACA,aAAS,aAAa,OAAO,WAAW;AACpC,YAAM,WAAW,QAAQ;AACzB,UAAI,YAAY,KAAK,WAAW,WAAW,MAAM,QAAQ;AACrD,cAAM,OAAO,WAAW,MAAM,KAAK;AACnC,mBAAW,MAAM,KAAK,IAAI,WAAW,MAAM,QAAQ;AACnD,mBAAW,MAAM,QAAQ,IAAI;AAAA,MAChC;AAAA,IACL;AACA,aAAS,gBAAgB,aAAa,UAAU,WAAW;AACvD,YAAM,WAAW,WAAW,MAAM,WAAW,EAAE;AAC/C,YAAM,WAAW,WAAW;AAC5B,UAAI,YAAY,KAAK,WAAW,SAAS,QAAQ;AAC7C,cAAM,OAAO,SAAS,QAAQ;AAC9B,iBAAS,QAAQ,IAAI,SAAS,QAAQ;AACtC,iBAAS,QAAQ,IAAI;AAAA,MACxB;AAAA,IACL;AACA,aAAS,aAAa,KAAK;AACvB,UAAI,WAAW,CAAC,IAAI;AAAA,IACxB;AAEA,aAAS,iBAAiB;AACxBA,oBAAAA,MAAI,gBAAgB;AAAA,QAClB,UAAU,kBAAkB,IAAI,OAAK,EAAE,IAAI;AAAA,QAC3C,SAAS,CAAC,QAAQ;AAChB,eAAK,MAAM,aAAa,kBAAkB,IAAI,QAAQ,EAAE;AAAA,QACzD;AAAA,MACL,CAAG;AAAA,IACH;AACA,aAAS,iBAAiB,KAAK;AAC7B,YAAM,IAAI,kBAAkB,KAAK,OAAK,EAAE,UAAU,GAAG;AACrD,aAAO,IAAI,EAAE,OAAO;AAAA,IACtB;AAEA,aAAS,qBAAqB,KAAK;AACjC,YAAM,QAAQ,OAAO,OAAO,EAAE,EAAE,YAAW;AAC3C,UAAI,MAAM,SAAS,MAAM;AAAG,eAAO;AACnC,UAAI,MAAM,SAAS,MAAM,KAAK,MAAM,SAAS,OAAO;AAAG,eAAO;AAC9D,UAAI,MAAM,SAAS,MAAM,KAAK,MAAM,SAAS,OAAO;AAAG,eAAO;AAC9D,aAAO;AAAA,IACT;AAEA,aAAS,gBAAgB,KAAK;AAC5B,UAAI,CAAC;AAAK,eAAO;AACjB,UAAI,MAAM,QAAQ,GAAG;AAAG,eAAO,IAAI,IAAI,CAAC,MAAM,OAAO,CAAC,EAAE,YAAa,CAAA;AACrE,aAAO,OAAO,GAAG,EACd,MAAM,SAAS,EACf,IAAI,CAAC,MAAM,EAAE,KAAI,CAAE,EACnB,OAAO,OAAO,EACd,IAAI,CAAC,MAAM,EAAE,YAAa,CAAA;AAAA,IAC/B;AAEA,aAAS,iBAAiB,OAAO,IAAI;AACnC,YAAM,OAAO,CAAA;AACb,YAAM,QAAQ;AACd,UAAI,QAAQ,MAAM,KAAK,IAAI;AAC3B,aAAO,OAAO;AACZ,YAAI,MAAM,CAAC;AAAG,eAAK,KAAK,MAAM,CAAC,CAAC;AAChC,gBAAQ,MAAM,KAAK,IAAI;AAAA,MACxB;AACD,aAAO,MAAM,KAAK,IAAI,IAAI,IAAI,CAAC;AAAA,IACjC;AAEA,aAAS,gBAAgB,KAAK;AAC5B,YAAM,QAAO,2BAAK,SAAQ;AAC1B,YAAM,OAAO,MAAM,QAAQ,2BAAK,MAAM,IAAI,IAAI,SAAS;AACvD,YAAM,UAAU,KAAK,IAAI,CAAC,QAAQ,gBAAgB,GAAG,iCAAiC,EAAE,KAAK,EAAE;AAC/F,aAAO,OAAO;AAAA,IAChB;AAEA,aAAS,gBAAgB,YAAY,UAAU,IAAI;AACjD,UAAI,OAAO,CAAA;AACX,UAAI,OAAO,eAAe,UAAU;AAClC,YAAI;AACF,iBAAO,KAAK,MAAM,UAAU;AAAA,QAC7B,SAAQ,KAAK;AACZ,iBAAO,CAAA;AAAA,QACR;AAAA,MACF,WAAU,MAAM,QAAQ,UAAU,GAAG;AACpC,eAAO;AAAA,MACR;AACD,UAAI,CAAC,MAAM,QAAQ,IAAI;AAAG,eAAO,CAAA;AACjC,aAAO,KAAK,IAAI,CAAC,KAAK,QAAQ;AAC5B,cAAM,SAAS,IAAI,SAAS,IAAI,SAAS,OAAO,aAAa,KAAK,GAAG,GAAG,SAAU,EAAC,YAAW;AAC9F,eAAO;AAAA,UACL,OAAO;AAAA,UACP,MAAM,IAAI,SAAS,IAAI,QAAQ;AAAA,UAC/B,QAAQ,MAAM,QAAQ,IAAI,MAAM,IAAI,IAAI,SAAS,CAAE;AAAA,UACnD,SAAS,QAAQ,SAAS,KAAK;AAAA,QACrC;AAAA,MACA,CAAG;AAAA,IACH;AAEA,aAAS,wBAAwB;AAC/BS,oBAAAA,WAAS,MAAM;AACb,YAAI,cAAc,SAAS,cAAc,MAAM,aAAa;AAC1D,wBAAc,MAAM,YAAY,EAAE,MAAM,KAAK,MAAM,YAAY,UAAS,CAAE;AAAA,QAC3E;AACD,YAAI,kBAAkB,SAAS,kBAAkB,MAAM,aAAa;AAClE,4BAAkB,MAAM,YAAY,EAAE,MAAM,KAAK,MAAM,YAAY,UAAS,CAAE;AAAA,QAC/E;AACD,aAAK,MAAM,QAAQ,QAAQ,CAAC,KAAK,QAAQ;AACvC,gBAAM,MAAM,iBAAiB,MAAM,GAAG;AACtC,cAAI,OAAO,IAAI,aAAa;AAC1B,gBAAI,YAAY,EAAE,MAAM,IAAI,QAAQ,UAAS,CAAE;AAAA,UAChD;AAAA,QACP,CAAK;AAAA,MACL,CAAG;AAAA,IACH;AAEA,aAAS,iBAAiB,OAAO,CAAE,GAAE,IAAI;AACvC,UAAI,OAAO,UAAa,OAAO,QAAQ,OAAO;AAAI,eAAO;AACzD,iBAAW,QAAQ,QAAQ,IAAI;AAC7B,YAAI,GAAG,KAAK,EAAE,OAAO,GAAG,EAAE;AAAI,iBAAO,KAAK;AAC1C,cAAM,YAAY,iBAAiB,KAAK,UAAU,EAAE;AACpD,YAAI;AAAW,iBAAO;AAAA,MACvB;AACD,aAAO;AAAA,IACT;AAEA,aAAS,UAAU,OAAO,IAAI;AAC5B,aAAO,KAAK,QAAQ,YAAY,GAAG,EAAE,QAAQ,WAAW,GAAG,EAAE;IAC/D;AAEA,aAAS,eAAe;AACtB,YAAM,UAAU,KAAK,MAAM,YAAY;AACvC,YAAM,WAAW,UAAU,OAAO;AAClC,UAAI,CAAC,YAAY,CAAC,QAAQ,KAAI,GAAI;AAChCT,sBAAG,MAAC,UAAU,EAAE,OAAO,SAAS,MAAM,OAAM,CAAE;AAC9C,eAAO;AAAA,MACR;AACD,YAAM,aAAa,OAAO,KAAK,MAAM,UAAU;AAC/C,UAAI,CAAC,YAAY;AACfA,sBAAG,MAAC,UAAU,EAAE,OAAO,SAAS,MAAM,OAAM,CAAE;AAC9C,eAAO;AAAA,MACR;AACD,UAAI,CAAC,KAAK,MAAM,YAAY;AAC1BA,sBAAG,MAAC,UAAU,EAAE,OAAO,SAAS,MAAM,OAAM,CAAE;AAC9C,eAAO;AAAA,MACR;AAED,UAAI,aAAa,CAAA;AACjB,UAAI,gBAAgB,CAAA;AACpB,UAAI,KAAK,MAAM,SAAS,QAAQ;AAC9B,qBAAa,KAAK,MAAM,OAAO,IAAI,CAAC,MAAM,UAAU,EAAE,QAAQ,EAAE,CAAC,EAAE,OAAO,OAAO;AACjF,YAAI,CAAC,WAAW,QAAQ;AACtBA,wBAAG,MAAC,UAAU,EAAE,OAAO,WAAW,MAAM,OAAM,CAAE;AAChD,iBAAO;AAAA,QACR;AAAA,MACL,WAAa,SAAS,OAAO;AACzB,YAAI,CAAC,KAAK,MAAM,QAAQ,QAAQ;AAC9BA,wBAAG,MAAC,UAAU,EAAE,OAAO,SAAS,MAAM,OAAM,CAAE;AAC9C,iBAAO;AAAA,QACR;AACD,YAAI,iBAAiB;AACrB,cAAM,iBAAiB,KAAK,MAAM,QAAQ,IAAI,CAAC,KAAK,QAAQ;AAC1D,gBAAM,QAAQ,IAAI,SAAS,OAAO,aAAa,KAAK,GAAG;AACvD,gBAAM,UAAU,IAAI,QAAQ;AAC5B,gBAAM,YAAY,UAAU,OAAO;AACnC,gBAAM,YAAY,cAAc,MAAM,QAAQ,IAAI,MAAM,KAAK,IAAI,OAAO,SAAS,WAAW,YAAY;AACxG,cAAI,CAAC,aAAa,CAAC,QAAQ,KAAI,MAAO,CAAC,IAAI,UAAU,IAAI,OAAO,WAAW,IAAI;AAC7E,6BAAiB;AAAA,UAClB;AACD,iBAAO;AAAA,YACL;AAAA,YACA,OAAO;AAAA,YACP,SAAS,KAAK,MAAM,QAAQ,SAAS,KAAK;AAAA,YAC1C,QAAQ,MAAM,QAAQ,IAAI,MAAM,IAAI,IAAI,SAAS,CAAE;AAAA,UAC3D;AAAA,QACA,CAAK;AACD,YAAI,gBAAgB;AAClBA,wBAAG,MAAC,UAAU,EAAE,OAAO,aAAa,MAAM,OAAM,CAAE;AAClD,iBAAO;AAAA,QACR;AACD,YAAI,eAAe,KAAK,CAAC,QAAQ,CAAC,IAAI,KAAK,GAAG;AAC5CA,wBAAG,MAAC,UAAU,EAAE,OAAO,aAAa,MAAM,OAAM,CAAE;AAClD,iBAAO;AAAA,QACR;AACD,YAAI,KAAK,MAAM,QAAQ,WAAW,GAAG;AACnCA,wBAAG,MAAC,UAAU,EAAE,OAAO,WAAW,MAAM,OAAM,CAAE;AAChD,iBAAO;AAAA,QACR;AACD,wBAAgB;AAChB,qBAAa,CAAC,GAAG,KAAK,MAAM,OAAO;AAAA,MACpC;AAED,YAAM,uBAAuB,WAC1B,IAAI,CAAC,UAAU,QAAQ,IAAI,SAAQ,EAAG,MAAM,EAC5C,OAAO,OAAO,EACd,IAAI,CAAC,QAAS,KAAK,MAAM,SAAS,SAAS,MAAM,IAAI,YAAW,CAAG;AACtE,YAAM,oBAAoB,KAAK,MAAM,SAAS,SAC1C,uBACA,qBAAqB,KAAI;AAE7B,YAAM,UAAU;AAAA,QACd,OAAO,KAAK,MAAM;AAAA,QAClB,MAAM,KAAK,MAAM;AAAA,QACjB,QAAQ,kBAAkB,KAAK,GAAG;AAAA,QAClC,aAAa,KAAK,MAAM,YAAY;AAAA,QACpC;AAAA,QACA,YAAY,KAAK,MAAM;AAAA,MAC3B;AACE,UAAI,cAAc,QAAQ;AACxB,gBAAQ,UAAU,KAAK,UAAU,aAAa;AAAA,MAC/C;AACD,aAAO;AAAA,IACT;AAEA,aAAS,YAAY;AACnB,iBAAW,QAAQ;AACnB,WAAK,MAAM,WAAW;AACtB,WAAK,MAAM,WAAW;AACtB,WAAK,MAAM,UAAU;AACrB,WAAK,MAAM,SAAS,CAAC,EAAE,IAAI,KAAK,OAAO,MAAM,GAAE,CAAE;AAEjD,UAAI,KAAK,MAAM,SAAS,SAAS;AAC/B,aAAK,MAAM,UAAU;AAAA,UACnB,EAAE,OAAO,KAAK,MAAM,MAAM,QAAQ,CAAA,EAAI;AAAA,UACtC,EAAE,OAAO,KAAK,MAAM,MAAM,QAAQ,CAAA,EAAI;AAAA,QAC5C;AAAA,MACA,OAAS;AACL,aAAK,MAAM,UAAU,qBAAqB,CAAC;AAAA,MAC5C;AACD;IACF;AAEA,mBAAe,SAAS;AACtB,YAAM,UAAU;AAChB,UAAI,CAAC,WAAW,OAAO;AAAO;AAC9B,aAAO,QAAQ;AACf,UAAI;AACF,YAAI,WAAW,OAAO;AACpB,gBAAMU,6BAAe,WAAW,OAAO,OAAO;AAC9CV,wBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,UAAS,CAAE;AAAA,QACtD,OAAW;AACL,gBAAMW,cAAAA,eAAe,OAAO;AAC5BX,wBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,UAAS,CAAE;AAChD;QACD;AAAA,MACF,SAAQ,KAAK;AACZA,sBAAAA,MAAA,MAAA,SAAA,2CAAc,GAAG;AACjBA,4BAAI,UAAU,EAAE,OAAO,IAAI,WAAW,QAAQ,MAAM,OAAM,CAAE;AAAA,MAChE,UAAY;AACR,eAAO,QAAQ;AAAA,MAChB;AAAA,IACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1iCA,GAAG,WAAW,eAAe;"}