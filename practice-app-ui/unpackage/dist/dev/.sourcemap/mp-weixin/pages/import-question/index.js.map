{"version":3,"file":"index.js","sources":["pages/import-question/index.vue","D:/HBuilderX.4.85.2025110510/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW1wb3J0LXF1ZXN0aW9uL2luZGV4LnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"page\">\r\n    <view class=\"content\">\r\n      <view class=\"cell-group\">\r\n        <view class=\"cell-item arrow\" @tap=\"openTypeSelect\">\r\n          <text class=\"label required\">题型</text>\r\n          <view class=\"value-text\">{{ typeLabel }}</view>\r\n          <uni-icons type=\"right\" size=\"14\" color=\"#c0c4cc\" />\r\n        </view>\r\n      </view>\r\n\r\n      <view class=\"section\">\r\n        <view class=\"section-header\">\r\n          <text class=\"label required\">题干</text>\r\n        </view>\r\n        <view class=\"toolbar\" v-if=\"currentFocus === 'stem'\">\r\n          <view class=\"tool-btn\" :class=\"{ active: formats.bold }\" @tap=\"handleToolbar('bold')\"><text style=\"font-weight: bold;\">B</text></view>\r\n          <view class=\"tool-btn\" :class=\"{ active: formats.italic }\" @tap=\"handleToolbar('italic')\"><text style=\"font-style: italic;\">I</text></view>\r\n          <view class=\"tool-btn\" :class=\"{ active: formats.underline }\" @tap=\"handleToolbar('underline')\"><text style=\"text-decoration: underline;\">U</text></view>\r\n          <view class=\"tool-btn\" :class=\"{ active: formats.script === 'sub' }\" @tap=\"handleToolbar('script', 'sub')\">x₂</view>\r\n          <view class=\"tool-btn\" :class=\"{ active: formats.script === 'sup' }\" @tap=\"handleToolbar('script', 'sup')\">x²</view>\r\n          <uni-icons class=\"tool-btn\" type=\"image\" size=\"20\" @tap=\"insertImage\"></uni-icons>\r\n        </view>\r\n        <view class=\"editor-box\">\r\n          <editor\r\n            id=\"stemEditor\"\r\n            class=\"ql-editor\"\r\n            placeholder=\"请输入试题题目\"\r\n            show-img-size\r\n            show-img-toolbar\r\n            show-img-resize\r\n            @ready=\"onStemReady\"\r\n            @statuschange=\"onStatusChange\"\r\n            @focus=\"onEditorFocus('stem')\"\r\n            @blur=\"onEditorBlur\"\r\n            @input=\"handleStemInput\"\r\n          ></editor>\r\n        </view>\r\n      </view>\r\n\r\n      <view class=\"section\" v-if=\"isChoice\">\r\n        <view class=\"section-header space-between\">\r\n          <view class=\"row-center\">\r\n            <text class=\"label required\">选项</text>\r\n          </view>\r\n          <text class=\"sub-label required-mark\">请勾选答案</text>\r\n        </view>\r\n\r\n        <view class=\"option-list\">\r\n          <view \r\n            class=\"option-item\" \r\n            v-for=\"(item, index) in form.options\" \r\n            :key=\"item.label\"\r\n          >\r\n            <view class=\"icon-wrap\" @tap=\"removeOption(index)\" v-if=\"canRemoveOption\">\r\n              <uni-icons type=\"minus-filled\" color=\"#dd524d\" size=\"24\" />\r\n            </view>\r\n            <view class=\"icon-wrap\" v-else style=\"opacity: 0;\">\r\n               <uni-icons type=\"minus-filled\" size=\"24\" />\r\n            </view>\r\n\r\n            <view class=\"option-label\">{{ item.label }}.</view>\r\n            <view class=\"input-wrap-editor\">\r\n              <view class=\"toolbar\" v-if=\"currentFocus === 'option-' + index\">\r\n                <view class=\"tool-btn\" :class=\"{ active: formats.bold }\" @tap=\"handleToolbar('bold')\"><text style=\"font-weight: bold;\">B</text></view>\r\n                <view class=\"tool-btn\" :class=\"{ active: formats.italic }\" @tap=\"handleToolbar('italic')\"><text style=\"font-style: italic;\">I</text></view>\r\n                <view class=\"tool-btn\" :class=\"{ active: formats.underline }\" @tap=\"handleToolbar('underline')\"><text style=\"text-decoration: underline;\">U</text></view>\r\n                <view class=\"tool-btn\" :class=\"{ active: formats.script === 'sub' }\" @tap=\"handleToolbar('script', 'sub')\">x₂</view>\r\n                <view class=\"tool-btn\" :class=\"{ active: formats.script === 'sup' }\" @tap=\"handleToolbar('script', 'sup')\">x²</view>\r\n                <uni-icons class=\"tool-btn\" type=\"image\" size=\"20\" @tap=\"insertImage\"></uni-icons>\r\n              </view>\r\n              <editor\r\n                :id=\"'optionEditor' + index\"\r\n                class=\"ql-editor-option\"\r\n                placeholder=\"请输入试题选项\"\r\n                show-img-size\r\n                show-img-toolbar\r\n                show-img-resize\r\n                @ready=\"onOptionReady(index)\"\r\n                @statuschange=\"onStatusChange\"\r\n                @focus=\"onEditorFocus('option-' + index)\"\r\n                @blur=\"onEditorBlur\"\r\n                @input=\"(e) => handleOptionInput(e, index)\"\r\n              ></editor>\r\n            </view>\r\n\r\n            <view class=\"check-wrap\" @tap=\"toggleAnswer(item.label)\">\r\n              <view class=\"radio-circle\" :class=\"{ active: form.answers.includes(item.label) }\">\r\n                <view class=\"inner-dot\" v-if=\"form.answers.includes(item.label)\"></view>\r\n              </view>\r\n            </view>\r\n          </view>\r\n        </view>\r\n\r\n        <view class=\"add-row\">\r\n          <view class=\"add-btn\" @tap=\"addOption\" :class=\"{ disabled: optionsDisabled }\">\r\n            <uni-icons type=\"plus-filled\" color=\"#007aff\" size=\"22\" />\r\n            <text class=\"add-text\">添加选项</text>\r\n          </view>\r\n          <view class=\"bulk-btn\" @tap=\"openBulkPopup\">批量添加</view>\r\n        </view>\r\n      </view>\r\n\r\n      <view class=\"section\" v-else-if=\"form.type === 'FILL'\">\r\n        <view class=\"section-header space-between\">\r\n          <text class=\"label required\">填空答案</text>\r\n          <view class=\"add-btn\" @tap=\"addBlank\">\r\n            <uni-icons type=\"plus-filled\" color=\"#007aff\" size=\"20\" />\r\n            <text class=\"add-text\">添加空</text>\r\n          </view>\r\n        </view>\r\n        <view class=\"option-list\">\r\n          <view class=\"option-item\" v-for=\"(blank, index) in form.blanks\" :key=\"blank.id\">\r\n            <view class=\"icon-wrap\" @tap=\"removeBlank(index)\" v-if=\"form.blanks.length > 1\">\r\n              <uni-icons type=\"minus-filled\" color=\"#dd524d\" size=\"24\" />\r\n            </view>\r\n            <text class=\"option-label\">空{{ index + 1 }}</text>\r\n            <view class=\"input-wrap\">\r\n              <input class=\"gray-input\" v-model=\"blank.text\" placeholder=\"请输入参考答案\" />\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </view>\r\n\r\n      <view class=\"section\">\r\n        <view class=\"section-header\">\r\n          <text class=\"label\">解析</text>\r\n        </view>\r\n        <view class=\"toolbar\" v-if=\"currentFocus === 'analysis'\">\r\n          <view class=\"tool-btn\" :class=\"{ active: formats.bold }\" @tap=\"handleToolbar('bold')\"><text style=\"font-weight: bold;\">B</text></view>\r\n          <view class=\"tool-btn\" :class=\"{ active: formats.italic }\" @tap=\"handleToolbar('italic')\"><text style=\"font-style: italic;\">I</text></view>\r\n          <view class=\"tool-btn\" :class=\"{ active: formats.underline }\" @tap=\"handleToolbar('underline')\"><text style=\"text-decoration: underline;\">U</text></view>\r\n          <view class=\"tool-btn\" :class=\"{ active: formats.script === 'sub' }\" @tap=\"handleToolbar('script', 'sub')\">x₂</view>\r\n          <view class=\"tool-btn\" :class=\"{ active: formats.script === 'sup' }\" @tap=\"handleToolbar('script', 'sup')\">x²</view>\r\n          <uni-icons class=\"tool-btn\" type=\"image\" size=\"20\" @tap=\"insertImage\"></uni-icons>\r\n        </view>\r\n        <view class=\"textarea-box\">\r\n          <editor\r\n            id=\"analysisEditor\"\r\n            class=\"ql-editor\"\r\n            placeholder=\"请输入试题解析\"\r\n            show-img-size\r\n            show-img-toolbar\r\n            show-img-resize\r\n            @ready=\"onAnalysisReady\"\r\n            @statuschange=\"onStatusChange\"\r\n            @focus=\"onEditorFocus('analysis')\"\r\n            @blur=\"onEditorBlur\"\r\n            @input=\"handleAnalysisInput\"\r\n          ></editor>\r\n        </view>\r\n      </view>\r\n\r\n      <view class=\"cell-group mt-20\">\r\n        <view class=\"cell-item arrow\" @tap=\"chooseCategory\">\r\n          <text class=\"label-text\">选择章节</text>\r\n          <view class=\"right-content\">\r\n             <text class=\"value-text\" v-if=\"form.categoryName\">{{ form.categoryName }}</text>\r\n             <uni-icons type=\"right\" size=\"14\" color=\"#c0c4cc\" />\r\n          </view>\r\n        </view>\r\n        <view class=\"cell-item arrow\" @tap=\"openEditCategory\">\r\n          <text class=\"label-text\">编辑章节</text>\r\n          <uni-icons type=\"right\" size=\"14\" color=\"#c0c4cc\" />\r\n        </view>\r\n        <view class=\"cell-item arrow\" @tap=\"openDifficulty\">\r\n          <text class=\"label-text\">难度</text>\r\n          <view class=\"right-content\" v-if=\"form.difficulty\">\r\n             <text class=\"value-text\">{{ renderDifficulty(form.difficulty) }}</text>\r\n             <uni-icons type=\"right\" size=\"14\" color=\"#c0c4cc\" />\r\n          </view>\r\n           <uni-icons v-else type=\"right\" size=\"14\" color=\"#c0c4cc\" />\r\n        </view>\r\n      </view>\r\n\r\n      <view style=\"height: 120rpx;\"></view> </view>\r\n\r\n    <view class=\"footer-bar\">\r\n      <button class=\"submit-btn\" hover-class=\"btn-hover\" @tap=\"submit\">添加试题</button>\r\n    </view>\r\n\r\n    <uni-popup ref=\"bulkPopup\" type=\"dialog\">\r\n      <uni-popup-dialog \r\n        mode=\"input\" \r\n        title=\"批量添加选项\" \r\n        placeholder=\"一行一个选项，自动填充\"\r\n        :before-close=\"true\" \r\n        @confirm=\"applyBulkOptions\" \r\n        @close=\"bulkPopup.close()\"\r\n      >\r\n        <view class=\"dialog-content\">\r\n            <textarea \r\n                v-model=\"bulkText\" \r\n                class=\"bulk-textarea\" \r\n                placeholder=\"请输入选项内容，每行代表一个选项（例如：\\n正确答案\\n错误答案）\"\r\n            />\r\n        </view>\r\n      </uni-popup-dialog>\r\n    </uni-popup>\r\n\r\n    <uni-popup ref=\"categoryPopup\" type=\"bottom\" background-color=\"#fff\">\r\n      <view class=\"popup-container\">\r\n        <view class=\"popup-header\">\r\n          <text class=\"cancel-btn\" @tap=\"categoryPopup.close()\">取消</text>\r\n          <text class=\"title\">选择章节</text>\r\n          <text class=\"confirm-btn\" @tap=\"categoryPopup.close()\">确定</text>\r\n        </view>\r\n        <scroll-view scroll-y class=\"popup-content\">\r\n          <view v-for=\"cat in categories\" :key=\"cat.id\">\r\n            <view class=\"category-item\" @tap=\"selectCategory(cat)\">\r\n              <text>{{ cat.name }}</text>\r\n            </view>\r\n            <view class=\"sub-category-item\" v-for=\"sub in cat.children\" :key=\"sub.id\" @tap=\"selectCategory(sub)\">\r\n              <text>{{ sub.name }}</text>\r\n            </view>\r\n          </view>\r\n        </scroll-view>\r\n      </view>\r\n    </uni-popup>\r\n\r\n    <uni-popup ref=\"editCategoryPopup\" type=\"bottom\" background-color=\"#fff\">\r\n      <view class=\"popup-container\">\r\n        <view class=\"popup-header\">\r\n          <text class=\"cancel-btn\" @tap=\"editCategoryPopup.close()\">取消</text>\r\n          <text class=\"title\">编辑章节</text>\r\n          <text class=\"confirm-btn\" @tap=\"editCategoryPopup.close()\">确定</text>\r\n        </view>\r\n        <scroll-view scroll-y class=\"popup-content\">\r\n          <view v-for=\"(cat, index) in categories\" :key=\"cat.id\">\r\n            <view class=\"edit-item\">\r\n              <view class=\"left-part\">\r\n                 <uni-icons type=\"minus-filled\" color=\"#dd524d\" size=\"24\" @tap=\"removeCategory(index)\" />\r\n                 <uni-icons :type=\"cat.expanded ? 'bottom' : 'right'\" size=\"16\" color=\"#007aff\" class=\"ml-10\" @tap=\"toggleExpand(cat)\" />\r\n                 <text class=\"ml-10\">{{ cat.name }}</text>\r\n              </view>\r\n              <view class=\"right-actions\">\r\n                 <view class=\"action-box\" @tap=\"addSubCategory(index)\">\r\n                    <uni-icons type=\"plus\" size=\"20\" color=\"#007aff\" />\r\n                 </view>\r\n                 <view class=\"action-box\" @tap=\"editCategory(cat)\">\r\n                    <uni-icons type=\"compose\" size=\"20\" color=\"#007aff\" />\r\n                 </view>\r\n                 <view class=\"action-box\">\r\n                    <uni-icons v-if=\"index > 0\" type=\"arrowup\" size=\"20\" color=\"#007aff\" @tap=\"moveCategory(index, -1)\" />\r\n                 </view>\r\n                 <view class=\"action-box\">\r\n                    <uni-icons v-if=\"index < categories.length - 1\" type=\"arrowdown\" size=\"20\" color=\"#007aff\" @tap=\"moveCategory(index, 1)\" />\r\n                 </view>\r\n              </view>\r\n            </view>\r\n            <view v-if=\"cat.expanded\">\r\n                <view class=\"edit-item sub-item\" v-for=\"(sub, subIndex) in cat.children\" :key=\"sub.id\">\r\n                <view class=\"left-part\">\r\n                    <uni-icons type=\"minus-filled\" color=\"#dd524d\" size=\"24\" @tap=\"removeSubCategory(index, subIndex)\" />\r\n                    <text class=\"ml-10\">{{ sub.name }}</text>\r\n                </view>\r\n                <view class=\"right-actions\">\r\n                    <view class=\"action-box\"></view>\r\n                    <view class=\"action-box\" @tap=\"editCategory(sub)\">\r\n                        <uni-icons type=\"compose\" size=\"20\" color=\"#007aff\" />\r\n                    </view>\r\n                    <view class=\"action-box\">\r\n                        <uni-icons v-if=\"subIndex > 0\" type=\"arrowup\" size=\"20\" color=\"#007aff\" @tap=\"moveSubCategory(index, subIndex, -1)\" />\r\n                    </view>\r\n                    <view class=\"action-box\">\r\n                        <uni-icons v-if=\"subIndex < cat.children.length - 1\" type=\"arrowdown\" size=\"20\" color=\"#007aff\" @tap=\"moveSubCategory(index, subIndex, 1)\" />\r\n                    </view>\r\n                </view>\r\n                </view>\r\n            </view>\r\n          </view>\r\n          \r\n          <view class=\"add-category-btn\">\r\n            <button class=\"btn-outline\" @tap=\"addCategory\">添加章节</button>\r\n          </view>\r\n        </scroll-view>\r\n      </view>\r\n    </uni-popup>\r\n\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, nextTick, ref, getCurrentInstance } from 'vue';\r\nimport { onLoad } from '@dcloudio/uni-app';\r\n\r\n// 基础数据\r\nconst questionTypes = [\r\n  { value: 'SINGLE', text: '单选题' },\r\n  { value: 'MULTIPLE', text: '多选题' },\r\n  { value: 'JUDGE', text: '判断题' },\r\n  { value: 'FILL', text: '填空题' },\r\n];\r\n\r\nconst difficultyOptions = [\r\n  { value: 'EASY', text: '简单' },\r\n  { value: 'MEDIUM', text: '中等' },\r\n  { value: 'HARD', text: '困难' },\r\n];\r\n\r\nconst instance = getCurrentInstance();\r\n\r\nconst mode = ref('single');\r\nconst showStemToolbar = ref(false);\r\nconst stemEditorCtx = ref(null);\r\nconst analysisEditorCtx = ref(null);\r\nconst optionEditorCtxs = ref({}); // Map id to context\r\nconst currentFocus = ref(''); // 'stem', 'analysis', 'option-0', ...\r\nconst bulkPopup = ref(null);\r\nconst bulkText = ref('');\r\nconst formats = ref({});\r\nlet blurTimer = null;\r\n\r\nconst categoryPopup = ref(null);\r\nconst editCategoryPopup = ref(null);\r\nconst categories = ref([\r\n  {\r\n    id: 1,\r\n    name: '章节1',\r\n    expanded: true,\r\n    children: [\r\n      { id: 11, name: '子章节1' }\r\n    ]\r\n  },\r\n  {\r\n    id: 2,\r\n    name: '章节2',\r\n    expanded: true,\r\n    children: [\r\n      { id: 21, name: '子章节2' }\r\n    ]\r\n  },\r\n  {\r\n    id: 3,\r\n    name: '章节3',\r\n    expanded: true,\r\n    children: [\r\n      { id: 31, name: '子章节1' },\r\n      { id: 32, name: '子章节2' }\r\n    ]\r\n  }\r\n]);\r\n\r\n// 表单数据\r\nconst form = ref({\r\n  type: 'SINGLE', // SINGLE, MULTIPLE, JUDGE, FILL\r\n  stemHtml: '',\r\n  options: createDefaultOptions(4),\r\n  answers: [],\r\n  blanks: [{ id: Date.now(), text: '' }],\r\n  analysis: '',\r\n  categoryName: '',\r\n  difficulty: '', // 截图里默认可能为空\r\n});\r\n\r\n// 计算属性\r\nconst typeLabel = computed(() => {\r\n    const t = questionTypes.find(i => i.value === form.value.type);\r\n    return t ? t.text : '请选择';\r\n});\r\nconst isChoice = computed(() => ['SINGLE', 'MULTIPLE', 'JUDGE'].includes(form.value.type));\r\nconst isSingle = computed(() => ['SINGLE', 'JUDGE'].includes(form.value.type));\r\nconst canRemoveOption = computed(() => form.value.options.length > 2 && form.value.type !== 'JUDGE');\r\nconst optionsDisabled = computed(() => form.value.options.length >= 8 || form.value.type === 'JUDGE');\r\n\r\nonLoad((query) => {\r\n  mode.value = query.mode || 'single';\r\n});\r\n\r\n// 逻辑方法\r\nfunction createDefaultOptions(count = 4) {\r\n  return Array.from({ length: count }).map((_, idx) => ({\r\n    label: String.fromCharCode(65 + idx),\r\n    text: '',\r\n  }));\r\n}\r\n\r\n// 切换题型\r\nfunction openTypeSelect() {\r\n    uni.showActionSheet({\r\n        itemList: questionTypes.map(t => t.text),\r\n        success: (res) => {\r\n            handleTypeChange(questionTypes[res.tapIndex].value);\r\n        }\r\n    });\r\n}\r\n\r\nfunction handleTypeChange(val) {\r\n  form.value.type = val;\r\n  form.value.answers = []; // 切换题型时清空答案\r\n\r\n  if (val === 'JUDGE') {\r\n    // 切换到判断题：强制设置为 正确/错误\r\n    form.value.options = [\r\n      { label: 'A', text: '正确' },\r\n      { label: 'B', text: '错误' },\r\n    ];\r\n  } else if (val === 'FILL') {\r\n    // 切换到填空题\r\n    if (!form.value.blanks || form.value.blanks.length === 0) {\r\n      form.value.blanks = [{ id: Date.now(), text: '' }];\r\n    }\r\n  } else {\r\n    // 切换到 单选 (SINGLE) 或 多选 (MULTIPLE)\r\n    \r\n    // 核心修复逻辑：\r\n    // 检测当前是否是判断题的残留数据（只有2项 且 内容是正确/错误）\r\n    const isJudgeData = form.value.options.length === 2 && \r\n                        form.value.options[0].text === '正确' && \r\n                        form.value.options[1].text === '错误';\r\n    \r\n    // 如果是判断题数据，或者选项为空，则重置为标准的 4 个空选项\r\n    if (isJudgeData || form.value.options.length === 0) {\r\n      form.value.options = createDefaultOptions(4);\r\n    }\r\n  }\r\n}\r\n\r\n// 题干编辑器\r\nfunction onStemReady(e) {\r\n  // 尝试使用 createSelectorQuery 获取 context，以兼容更多平台\r\n  uni.createSelectorQuery().in(instance).select('#stemEditor').context((res) => {\r\n    stemEditorCtx.value = res.context;\r\n  }).exec();\r\n}\r\nfunction handleStemInput(e) {\r\n  form.value.stemHtml = e.detail.html;\r\n}\r\nfunction onStatusChange(e) {\r\n  formats.value = e.detail;\r\n}\r\n\r\n// 通用工具栏处理\r\nfunction handleToolbar(name, value) {\r\n    let ctx = null;\r\n    if (currentFocus.value === 'stem') ctx = stemEditorCtx.value;\r\n    else if (currentFocus.value === 'analysis') ctx = analysisEditorCtx.value;\r\n    else if (currentFocus.value.startsWith('option-')) {\r\n        const idx = currentFocus.value.split('-')[1];\r\n        ctx = optionEditorCtxs.value[idx];\r\n    }\r\n    \r\n    if (ctx) ctx.format(name, value);\r\n}\r\n\r\n// 通用插入图片\r\nfunction insertImage() {\r\n    let ctx = null;\r\n    if (currentFocus.value === 'stem') ctx = stemEditorCtx.value;\r\n    else if (currentFocus.value === 'analysis') ctx = analysisEditorCtx.value;\r\n    else if (currentFocus.value.startsWith('option-')) {\r\n        const idx = currentFocus.value.split('-')[1];\r\n        ctx = optionEditorCtxs.value[idx];\r\n    }\r\n\r\n    if (!ctx) return;\r\n    uni.chooseImage({\r\n        count: 1,\r\n        success: (res) => {\r\n            ctx.insertImage({ src: res.tempFilePaths[0], width: '80%' });\r\n        }\r\n    });\r\n}\r\n\r\n// 选项编辑器\r\nfunction onOptionReady(index) {\r\n    uni.createSelectorQuery().in(instance).select('#optionEditor' + index).context((res) => {\r\n        optionEditorCtxs.value[index] = res.context;\r\n        // 如果有初始值，需要 setContents\r\n        if (form.value.options[index].text) {\r\n            res.context.setContents({ html: form.value.options[index].text });\r\n        }\r\n    }).exec();\r\n}\r\nfunction handleOptionInput(e, index) {\r\n    form.value.options[index].text = e.detail.html;\r\n}\r\n\r\n// 解析编辑器\r\nfunction onAnalysisReady() {\r\n     uni.createSelectorQuery().in(instance).select('#analysisEditor').context((res) => {\r\n        analysisEditorCtx.value = res.context;\r\n         if (form.value.analysis) {\r\n            res.context.setContents({ html: form.value.analysis });\r\n        }\r\n    }).exec();\r\n}\r\nfunction handleAnalysisInput(e) {\r\n    form.value.analysis = e.detail.html;\r\n}\r\n\r\n// 焦点管理\r\nfunction onEditorFocus(key) {\r\n    if (blurTimer) {\r\n        clearTimeout(blurTimer);\r\n        blurTimer = null;\r\n    }\r\n    currentFocus.value = key;\r\n}\r\nfunction onEditorBlur() {\r\n    // 延迟清除焦点，防止点击工具栏时焦点丢失导致工具栏隐藏\r\n    blurTimer = setTimeout(() => {\r\n        currentFocus.value = '';\r\n        blurTimer = null;\r\n    }, 200);\r\n}\r\n\r\n// 选项操作\r\nfunction addOption() {\r\n  if (optionsDisabled.value) return;\r\n  const nextLabel = String.fromCharCode(65 + form.value.options.length);\r\n  form.value.options.push({ label: nextLabel, text: '' });\r\n}\r\n\r\nfunction removeOption(index) {\r\n  if (!canRemoveOption.value) return;\r\n  const removed = form.value.options.splice(index, 1)[0];\r\n  // 清理已选答案\r\n  form.value.answers = form.value.answers.filter(a => a !== removed.label);\r\n  // 重置Label顺序\r\n  form.value.options.forEach((item, idx) => {\r\n    item.label = String.fromCharCode(65 + idx);\r\n  });\r\n}\r\n\r\n// 答案选择 (模拟Checkbox/Radio行为)\r\nfunction toggleAnswer(label) {\r\n    if (isSingle.value) {\r\n        // 单选：如果点了已选的，不取消（通常逻辑），或者切换\r\n        form.value.answers = [label];\r\n    } else {\r\n        // 多选\r\n        const idx = form.value.answers.indexOf(label);\r\n        if (idx > -1) {\r\n            form.value.answers.splice(idx, 1);\r\n        } else {\r\n            form.value.answers.push(label);\r\n        }\r\n    }\r\n}\r\n\r\n// 批量添加\r\nfunction openBulkPopup() {\r\n    bulkText.value = '';\r\n    bulkPopup.value.open();\r\n}\r\nfunction applyBulkOptions() {\r\n    const lines = bulkText.value.split('\\n').filter(s => s.trim());\r\n    // 简单填充逻辑：有空位填空位，没空位加选项\r\n    let currentIdx = 0;\r\n    // 先填现有的\r\n    while(currentIdx < form.value.options.length && lines.length > 0) {\r\n        if(!form.value.options[currentIdx].text) {\r\n            form.value.options[currentIdx].text = lines.shift();\r\n        }\r\n        currentIdx++;\r\n    }\r\n    // 剩下的新增\r\n    while(lines.length > 0 && !optionsDisabled.value) {\r\n         const nextLabel = String.fromCharCode(65 + form.value.options.length);\r\n         form.value.options.push({ label: nextLabel, text: lines.shift() });\r\n    }\r\n    bulkPopup.value.close();\r\n}\r\n\r\n// 填空操作\r\nfunction addBlank() {\r\n  form.value.blanks.push({ id: Date.now(), text: '' });\r\n}\r\nfunction removeBlank(index) {\r\n  form.value.blanks.splice(index, 1);\r\n}\r\n\r\n// 底部选择器\r\nfunction chooseCategory() {\r\n  categoryPopup.value.open();\r\n}\r\nfunction openEditCategory() {\r\n  editCategoryPopup.value.open();\r\n}\r\nfunction selectCategory(item) {\r\n    form.value.categoryName = item.name;\r\n    categoryPopup.value.close();\r\n}\r\n\r\n// 章节编辑方法\r\nfunction addCategory() {\r\n    uni.showModal({\r\n        title: '添加章节',\r\n        editable: true,\r\n        placeholderText: '请输入章节名称',\r\n        success: (res) => {\r\n            if (res.confirm && res.content) {\r\n                categories.value.push({\r\n                    id: Date.now(),\r\n                    name: res.content,\r\n                    expanded: true,\r\n                    children: []\r\n                });\r\n            }\r\n        }\r\n    });\r\n}\r\nfunction addSubCategory(parentIndex) {\r\n    uni.showModal({\r\n        title: '添加子章节',\r\n        editable: true,\r\n        placeholderText: '请输入子章节名称',\r\n        success: (res) => {\r\n            if (res.confirm && res.content) {\r\n                if (!categories.value[parentIndex].children) {\r\n                    categories.value[parentIndex].children = [];\r\n                }\r\n                categories.value[parentIndex].children.push({\r\n                    id: Date.now(),\r\n                    name: res.content\r\n                });\r\n                categories.value[parentIndex].expanded = true;\r\n            }\r\n        }\r\n    });\r\n}\r\nfunction editCategory(item) {\r\n    uni.showModal({\r\n        title: '修改名称',\r\n        editable: true,\r\n        content: item.name,\r\n        placeholderText: '请输入名称',\r\n        success: (res) => {\r\n            if (res.confirm && res.content) {\r\n                item.name = res.content;\r\n            }\r\n        }\r\n    });\r\n}\r\nfunction removeCategory(index) {\r\n    uni.showModal({\r\n        title: '提示',\r\n        content: '确定要删除该章节吗？',\r\n        success: (res) => {\r\n            if (res.confirm) {\r\n                categories.value.splice(index, 1);\r\n            }\r\n        }\r\n    });\r\n}\r\nfunction removeSubCategory(parentIndex, subIndex) {\r\n    uni.showModal({\r\n        title: '提示',\r\n        content: '确定要删除该子章节吗？',\r\n        success: (res) => {\r\n            if (res.confirm) {\r\n                categories.value[parentIndex].children.splice(subIndex, 1);\r\n            }\r\n        }\r\n    });\r\n}\r\nfunction moveCategory(index, direction) {\r\n    const newIndex = index + direction;\r\n    if (newIndex >= 0 && newIndex < categories.value.length) {\r\n        const temp = categories.value[index];\r\n        categories.value[index] = categories.value[newIndex];\r\n        categories.value[newIndex] = temp;\r\n    }\r\n}\r\nfunction moveSubCategory(parentIndex, subIndex, direction) {\r\n    const children = categories.value[parentIndex].children;\r\n    const newIndex = subIndex + direction;\r\n    if (newIndex >= 0 && newIndex < children.length) {\r\n        const temp = children[subIndex];\r\n        children[subIndex] = children[newIndex];\r\n        children[newIndex] = temp;\r\n    }\r\n}\r\nfunction toggleExpand(cat) {\r\n    cat.expanded = !cat.expanded;\r\n}\r\n\r\nfunction openDifficulty() {\r\n  uni.showActionSheet({\r\n    itemList: difficultyOptions.map(d => d.text),\r\n    success: (res) => {\r\n      form.value.difficulty = difficultyOptions[res.tapIndex].value;\r\n    }\r\n  });\r\n}\r\nfunction renderDifficulty(val) {\r\n  const t = difficultyOptions.find(d => d.value === val);\r\n  return t ? t.text : '';\r\n}\r\n\r\nfunction submit() {\r\n  console.log('Submit:', form.value);\r\n  if (!form.value.stemHtml && !form.value.stemText) {\r\n      return uni.showToast({ title: '请输入题干', icon:'none' });\r\n  }\r\n  if (isChoice.value && form.value.answers.length === 0) {\r\n      return uni.showToast({ title: '请勾选正确答案', icon:'none' });\r\n  }\r\n  uni.showToast({ title: '添加成功', icon: 'success' });\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n/* 全局样式重置 */\r\n.page {\r\n  min-height: 100vh;\r\n  background-color: #fff;\r\n  padding-bottom: 40rpx;\r\n}\r\n\r\n/* 模拟导航栏 */\r\n.nav-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 44px 16px 12px; /* 适配刘海屏大致高度 */\r\n    background: #fff;\r\n    border-bottom: 1px solid #eee;\r\n}\r\n.nav-title {\r\n    font-size: 17px;\r\n    font-weight: 600;\r\n}\r\n.nav-actions {\r\n    display: flex;\r\n    gap: 8px;\r\n}\r\n\r\n.content {\r\n  padding: 0 32rpx;\r\n}\r\n\r\n/* 必填红星 */\r\n.required::before {\r\n  content: '*';\r\n  color: #ff4d4f;\r\n  margin-right: 4rpx;\r\n}\r\n.required-mark::before {\r\n    content: '*';\r\n    color: #ff4d4f;\r\n    margin-right: 4rpx;\r\n}\r\n\r\n/* 通用标签 */\r\n.label {\r\n    font-size: 32rpx;\r\n    color: #333;\r\n    font-weight: 500;\r\n}\r\n.sub-label {\r\n    font-size: 26rpx;\r\n    color: #666;\r\n}\r\n\r\n/* 单元格样式 (题型、底部选项) */\r\n.cell-group {\r\n    margin-top: 20rpx;\r\n}\r\n.cell-item {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 30rpx 0;\r\n    border-bottom: 1rpx solid #f5f5f5;\r\n    font-size: 30rpx;\r\n    color: #333;\r\n}\r\n.value-text {\r\n    flex: 1;\r\n    text-align: right;\r\n    margin-right: 12rpx;\r\n    color: #333;\r\n}\r\n.label-text {\r\n    color: #333;\r\n    font-size: 30rpx;\r\n}\r\n.right-content {\r\n    display: flex;\r\n    align-items: center;\r\n    color: #666;\r\n}\r\n.mt-20 {\r\n    margin-top: 40rpx;\r\n}\r\n\r\n/* 编辑区域 */\r\n.section {\r\n    margin-top: 30rpx;\r\n}\r\n.section-header {\r\n    margin-bottom: 20rpx;\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n.section-header.space-between {\r\n    justify-content: space-between;\r\n}\r\n.row-center {\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n\r\n/* 题干工具栏 */\r\n.toolbar {\r\n    display: flex;\r\n    gap: 20rpx;\r\n    background: #f8f8f8;\r\n    padding: 12rpx;\r\n    border-radius: 8rpx 8rpx 0 0;\r\n    border-bottom: 1rpx solid #eee;\r\n}\r\n.tool-btn {\r\n    padding: 4rpx 12rpx;\r\n    font-size: 28rpx;\r\n    color: #333;\r\n    border-radius: 4rpx;\r\n}\r\n.tool-btn.active {\r\n    background-color: #e6f1fc;\r\n    color: #007aff;\r\n}\r\n\r\n/* 编辑器容器 */\r\n.editor-box {\r\n    background: #f5f7fa; /* 截图中的浅灰色背景 */\r\n    border-radius: 12rpx;\r\n    padding: 16rpx 24rpx;\r\n    min-height: 80rpx;\r\n}\r\n.ql-editor {\r\n    min-height: 48rpx;\r\n    font-size: 30rpx;\r\n    line-height: 1.6;\r\n}\r\n\r\n/* 选项列表 */\r\n.option-list {\r\n    margin-top: 10rpx;\r\n}\r\n.option-item {\r\n    display: flex;\r\n    align-items: center;\r\n    margin-bottom: 24rpx;\r\n}\r\n.icon-wrap {\r\n    width: 60rpx;\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n}\r\n.option-label {\r\n    width: 40rpx;\r\n    font-size: 32rpx;\r\n    color: #333;\r\n    margin-right: 8rpx;\r\n}\r\n.input-wrap-editor {\r\n    flex: 1;\r\n    width: 0; /* 防止被内容撑开 */\r\n    background: #f5f7fa;\r\n    border-radius: 12rpx;\r\n    padding: 16rpx 24rpx;\r\n    margin-right: 20rpx;\r\n    min-height: 80rpx;\r\n    /* 让 editor 自然流布局 */\r\n}\r\n.input-wrap {\r\n    flex: 1;\r\n    width: 0; /* 防止被内容撑开 */\r\n    background: #f5f7fa;\r\n    border-radius: 12rpx;\r\n    padding: 16rpx 24rpx;\r\n    margin-right: 20rpx;\r\n    min-height: 80rpx;\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n.gray-input {\r\n    font-size: 28rpx;\r\n    color: #333;\r\n    width: 100%;\r\n}\r\n.ql-editor-option {\r\n    min-height: 48rpx;\r\n    font-size: 28rpx;\r\n    line-height: 1.6;\r\n    width: 100%;\r\n    word-break: break-all;\r\n    white-space: pre-wrap;\r\n}\r\n/* 右侧勾选圈 */\r\n.check-wrap {\r\n    width: 50rpx;\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    align-items: center;\r\n}\r\n.radio-circle {\r\n    width: 40rpx;\r\n    height: 40rpx;\r\n    border-radius: 50%;\r\n    border: 2rpx solid #dcdfe6;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n.radio-circle.active {\r\n    border-color: #007aff; /* 蓝色 */\r\n}\r\n.inner-dot {\r\n    width: 24rpx;\r\n    height: 24rpx;\r\n    background: #007aff;\r\n    border-radius: 50%;\r\n}\r\n\r\n/* 添加选项按钮 */\r\n.add-row {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-top: 20rpx;\r\n}\r\n.add-btn {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8rpx;\r\n}\r\n.add-btn.disabled {\r\n    opacity: 0.5;\r\n}\r\n.add-text {\r\n    font-size: 30rpx;\r\n    color: #007aff;\r\n}\r\n.bulk-btn {\r\n    border: 1rpx solid #007aff;\r\n    color: #007aff;\r\n    font-size: 24rpx;\r\n    padding: 6rpx 20rpx;\r\n    border-radius: 30rpx;\r\n}\r\n\r\n/* 解析 */\r\n.textarea-box {\r\n    background: #f5f7fa;\r\n    border-radius: 12rpx;\r\n    padding: 16rpx 24rpx;\r\n    min-height: 80rpx;\r\n}\r\n.gray-textarea {\r\n    width: 100%;\r\n    font-size: 28rpx;\r\n    color: #333;\r\n    min-height: 100rpx;\r\n}\r\n\r\n/* 底部按钮 */\r\n.footer-bar {\r\n    position: fixed;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    padding: 20rpx 32rpx 40rpx; /* 适配底部安全区 */\r\n    background: #fff;\r\n    z-index: 99;\r\n    border-top: 1rpx solid #f0f0f0;\r\n}\r\n.submit-btn {\r\n    background: #007aff;\r\n    color: #fff;\r\n    border-radius: 44rpx;\r\n    font-size: 32rpx;\r\n    height: 88rpx;\r\n    line-height: 88rpx;\r\n    border: none;\r\n}\r\n.submit-btn::after {\r\n    border: none;\r\n}\r\n.btn-hover {\r\n    opacity: 0.9;\r\n}\r\n\r\n/* 弹窗样式 */\r\n.dialog-content {\r\n    width: 100%;\r\n    padding: 20rpx 0;\r\n}\r\n.bulk-textarea {\r\n    width: 100%;\r\n    height: 300rpx;\r\n    background: #f5f7fa;\r\n    padding: 10rpx;\r\n    border-radius: 8rpx;\r\n    font-size: 28rpx;\r\n}\r\n\r\n/* 底部弹窗样式 */\r\n.popup-container {\r\n    background-color: #fff;\r\n    border-radius: 20rpx 20rpx 0 0;\r\n    overflow: hidden;\r\n    display: flex;\r\n    flex-direction: column;\r\n    max-height: 80vh;\r\n}\r\n.popup-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 30rpx;\r\n    border-bottom: 1rpx solid #eee;\r\n}\r\n.title {\r\n    font-size: 32rpx;\r\n    font-weight: 500;\r\n    color: #333;\r\n}\r\n.cancel-btn {\r\n    font-size: 28rpx;\r\n    color: #999;\r\n}\r\n.confirm-btn {\r\n    font-size: 28rpx;\r\n    color: #007aff;\r\n}\r\n.popup-content {\r\n    padding: 20rpx 30rpx;\r\n    max-height: 60vh;\r\n}\r\n\r\n/* 章节列表 */\r\n.category-item {\r\n    padding: 24rpx 0;\r\n    border-bottom: 1rpx solid #f5f5f5;\r\n    font-size: 30rpx;\r\n    color: #333;\r\n}\r\n.sub-category-item {\r\n    padding: 24rpx 0 24rpx 40rpx;\r\n    border-bottom: 1rpx solid #f5f5f5;\r\n    font-size: 28rpx;\r\n    color: #666;\r\n}\r\n\r\n/* 编辑章节列表 */\r\n.edit-item {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 20rpx 0;\r\n    border-bottom: 1rpx solid #f5f5f5;\r\n}\r\n.edit-item.sub-item {\r\n    padding-left: 40rpx;\r\n}\r\n.left-part {\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n.right-actions {\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n.action-box {\r\n    width: 60rpx;\r\n    height: 60rpx;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n.ml-10 {\r\n    margin-left: 20rpx;\r\n}\r\n.ml-20 {\r\n    margin-left: 40rpx;\r\n}\r\n.add-category-btn {\r\n    margin-top: 40rpx;\r\n    margin-bottom: 40rpx;\r\n    display: flex;\r\n    justify-content: center;\r\n}\r\n.btn-outline {\r\n    background: #fff;\r\n    color: #007aff;\r\n    border: 1rpx solid #007aff;\r\n    border-radius: 44rpx;\r\n    font-size: 30rpx;\r\n    padding: 0 60rpx;\r\n    height: 72rpx;\r\n    line-height: 72rpx;\r\n}\r\n.btn-outline::after {\r\n    border: none;\r\n}\r\n</style>","import MiniProgramPage from 'E:/project/practice-app/practice-app-ui/pages/import-question/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["getCurrentInstance","ref","computed","onLoad","uni"],"mappings":"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"}