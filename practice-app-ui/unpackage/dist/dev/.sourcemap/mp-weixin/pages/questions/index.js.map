{"version":3,"file":"index.js","sources":["pages/questions/index.vue","D:/HBuilderX.4.85.2025110510/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcXVlc3Rpb25zL2luZGV4LnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"page\">\r\n    <view class=\"header\">\r\n      <view class=\"title-wrap\">\r\n        <text class=\"title\">题库</text>\r\n        <text class=\"subtitle\">按分类浏览，快速进入练习</text>\r\n      </view>\r\n      <uni-easyinput\r\n        v-model=\"keyword\"\r\n        placeholder=\"搜索想练习的考试或子分类\"\r\n        prefixIcon=\"search\"\r\n        clearable\r\n        @confirm=\"handleSearch\"\r\n        @clear=\"clearSearch\"\r\n      />\r\n    </view>\r\n\r\n    <view class=\"layout\">\r\n      <scroll-view scroll-y class=\"side\" show-scrollbar=\"false\">\r\n        <view\n          v-for=\"parent in categoryTree\"\n          :key=\"parent.id\"\n          class=\"side-item\"\n          :class=\"{ active: String(parent.id) === String(selectedParent) }\"\n          @tap=\"switchParent(parent.id)\"\n        >\n          <text class=\"side-text\">{{ parent.name }}</text>\r\n        </view>\r\n      </scroll-view>\r\n\r\n      <scroll-view scroll-y class=\"content\" show-scrollbar=\"false\">\r\n        <view v-if=\"filteredChildren.length\" class=\"card-list\">\r\n          <view\r\n            v-for=\"item in filteredChildren\"\r\n            :key=\"item.id\"\r\n            class=\"sub-card\"\r\n            @tap=\"goCategory(item)\"\r\n          >\r\n            <view class=\"card-header\">\n              <view class=\"name\">\n                <text class=\"sub-name\">{{ item.name }}</text>\n                <uni-tag\n                  v-if=\"item.badgeText\"\n                  :text=\"item.badgeText\"\n                  type=\"warning\"\n                  size=\"mini\"\n                />\n              </view>\n              <uni-icons type=\"arrowright\" color=\"#9ca3af\" size=\"20\" />\n            </view>\n            <view class=\"desc\">{{ renderDesc(item) }}</view>\n            <view class=\"meta-row\">\n              <text class=\"muted\">题量 {{ item.questionCount || 0 }}</text>\n              <text class=\"muted\">已做 {{ item.finishedCount || 0 }}</text>\n            </view>\n          </view>\n        </view>\n        <view v-else class=\"empty\">\r\n          <text class=\"muted\">没有匹配的分类，换个关键词试试</text>\r\n        </view>\r\n      </scroll-view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\nimport { computed, ref } from 'vue';\nimport { onPullDownRefresh, onShow } from '@dcloudio/uni-app';\nimport { fetchCategoryTree } from '@/api/categories.js';\n\r\nconst categoryTree = ref([]);\r\nconst selectedParent = ref('');\r\nconst keyword = ref('');\r\n\r\nconst childrenOfParent = computed(() => {\n  const parent = categoryTree.value.find((p) => String(p.id) === String(selectedParent.value));\n  return parent ? parent.children : [];\n});\n\r\nconst filteredChildren = computed(() => {\n  const kw = keyword.value.trim().toLowerCase();\n  if (!kw) return childrenOfParent.value;\n  return childrenOfParent.value.filter(\n    (item) => {\n      const name = (item.name || '').toLowerCase();\n      const desc = (item.description || item.badgeText || '').toLowerCase();\n      return name.includes(kw) || desc.includes(kw);\n    },\n  );\n});\n\r\nconst loadCategories = async () => {\n  const list = await fetchCategoryTree();\n  categoryTree.value = list;\n  if (!selectedParent.value && list.length) {\n    selectedParent.value = String(list[0].id);\n  }\n};\n\r\nconst switchParent = (id) => {\n  selectedParent.value = id;\n};\n\r\nconst handleSearch = () => {\r\n  // computed handles filtering\r\n};\r\n\r\nconst clearSearch = () => {\r\n  keyword.value = '';\r\n};\r\n\r\nconst goCategory = (item) => {\n  uni.navigateTo({\n    url: `/pages/questions/category?categoryId=${item.id}`,\n  });\n};\n\nconst renderDesc = (item) => {\n  if (item.description) return item.description;\n  if (item.badgeText) return item.badgeText;\n  return `共 ${item.questionCount || 0} 题`;\n};\n\r\nonShow(() => {\r\n  loadCategories();\r\n});\r\n\r\nonPullDownRefresh(async () => {\r\n  await loadCategories();\r\n  uni.stopPullDownRefresh();\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.page {\r\n  padding: 16rpx 16rpx 0;\r\n  min-height: 100vh;\r\n}\r\n\r\n.header {\r\n  padding: 16rpx;\r\n  background: #ffffff;\r\n  border-radius: 18rpx;\r\n  box-shadow: 0 10rpx 30rpx rgba(31, 56, 88, 0.06);\r\n}\r\n\r\n.title-wrap {\r\n  margin-bottom: 12rpx;\r\n}\r\n\r\n.title {\r\n  font-size: 34rpx;\r\n  font-weight: 700;\r\n  color: #111827;\r\n}\r\n\r\n.subtitle {\r\n  display: block;\r\n  margin-top: 6rpx;\r\n  color: #6b7280;\r\n  font-size: 24rpx;\r\n}\r\n\r\n.layout {\r\n  display: flex;\r\n  margin-top: 16rpx;\r\n  height: calc(100vh - 200rpx);\r\n}\r\n\r\n.side {\r\n  width: 210rpx;\r\n  background: #f5f7fb;\r\n  border-radius: 16rpx;\r\n  margin-right: 12rpx;\r\n  padding: 8rpx 0;\r\n}\r\n\r\n.side-item {\r\n  padding: 18rpx 20rpx;\r\n  color: #374151;\r\n  border-left: 8rpx solid transparent;\r\n}\r\n\r\n.side-item.active {\r\n  background: #e0ecff;\r\n  color: #1d4ed8;\r\n  border-color: #2563eb;\r\n  font-weight: 700;\r\n}\r\n\r\n.side-text {\r\n  font-size: 26rpx;\r\n}\r\n\r\n.content {\r\n  flex: 1;\r\n  background: #ffffff;\r\n  border-radius: 16rpx;\r\n  padding: 12rpx;\r\n  box-shadow: 0 12rpx 30rpx rgba(31, 56, 88, 0.05);\r\n}\r\n\r\n.card-list {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(300rpx, 1fr));\r\n  gap: 12rpx;\r\n}\r\n\r\n.sub-card {\r\n  padding: 18rpx;\r\n  border-radius: 14rpx;\r\n  background: linear-gradient(135deg, #f8fafc, #f1f5f9);\r\n  border: 1rpx solid #e5e7eb;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n\r\n.name {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10rpx;\r\n}\r\n\r\n.sub-name {\r\n  font-size: 30rpx;\r\n  font-weight: 700;\r\n  color: #111827;\r\n}\r\n\r\n.desc {\r\n  margin: 8rpx 0 12rpx;\r\n  color: #4b5563;\r\n  font-size: 24rpx;\r\n  line-height: 1.5;\r\n}\r\n\r\n.meta-row {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  color: #6b7280;\r\n  font-size: 24rpx;\r\n}\r\n\r\n.muted {\r\n  color: #6b7280;\r\n}\r\n\r\n.empty {\r\n  padding: 40rpx;\r\n  text-align: center;\r\n  color: #6b7280;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'E:/project/practice-app/practice-app-ui/pages/questions/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","fetchCategoryTree","uni","onShow","onPullDownRefresh"],"mappings":";;;;;;;;;;;;;;;;;;AAsEA,UAAM,eAAeA,cAAAA,IAAI,CAAA,CAAE;AAC3B,UAAM,iBAAiBA,cAAAA,IAAI,EAAE;AAC7B,UAAM,UAAUA,cAAAA,IAAI,EAAE;AAEtB,UAAM,mBAAmBC,cAAQ,SAAC,MAAM;AACtC,YAAM,SAAS,aAAa,MAAM,KAAK,CAAC,MAAM,OAAO,EAAE,EAAE,MAAM,OAAO,eAAe,KAAK,CAAC;AAC3F,aAAO,SAAS,OAAO,WAAW;IACpC,CAAC;AAED,UAAM,mBAAmBA,cAAQ,SAAC,MAAM;AACtC,YAAM,KAAK,QAAQ,MAAM,KAAM,EAAC,YAAW;AAC3C,UAAI,CAAC;AAAI,eAAO,iBAAiB;AACjC,aAAO,iBAAiB,MAAM;AAAA,QAC5B,CAAC,SAAS;AACR,gBAAM,QAAQ,KAAK,QAAQ,IAAI,YAAW;AAC1C,gBAAM,QAAQ,KAAK,eAAe,KAAK,aAAa,IAAI;AACxD,iBAAO,KAAK,SAAS,EAAE,KAAK,KAAK,SAAS,EAAE;AAAA,QAC7C;AAAA,MACL;AAAA,IACA,CAAC;AAED,UAAM,iBAAiB,YAAY;AACjC,YAAM,OAAO,MAAMC,eAAAA;AACnB,mBAAa,QAAQ;AACrB,UAAI,CAAC,eAAe,SAAS,KAAK,QAAQ;AACxC,uBAAe,QAAQ,OAAO,KAAK,CAAC,EAAE,EAAE;AAAA,MACzC;AAAA,IACH;AAEA,UAAM,eAAe,CAAC,OAAO;AAC3B,qBAAe,QAAQ;AAAA,IACzB;AAEA,UAAM,eAAe,MAAM;AAAA,IAE3B;AAEA,UAAM,cAAc,MAAM;AACxB,cAAQ,QAAQ;AAAA,IAClB;AAEA,UAAM,aAAa,CAAC,SAAS;AAC3BC,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,wCAAwC,KAAK,EAAE;AAAA,MACxD,CAAG;AAAA,IACH;AAEA,UAAM,aAAa,CAAC,SAAS;AAC3B,UAAI,KAAK;AAAa,eAAO,KAAK;AAClC,UAAI,KAAK;AAAW,eAAO,KAAK;AAChC,aAAO,KAAK,KAAK,iBAAiB,CAAC;AAAA,IACrC;AAEAC,kBAAAA,OAAO,MAAM;AACX;IACF,CAAC;AAEDC,kBAAAA,kBAAkB,YAAY;AAC5B,YAAM,eAAc;AACpBF,oBAAG,MAAC,oBAAmB;AAAA,IACzB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjID,GAAG,WAAW,eAAe;"}