{"version":3,"file":"detail.js","sources":["pages/questions/detail.vue","D:/HBuilderX.4.85.2025110510/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcXVlc3Rpb25zL2RldGFpbC52dWU"],"sourcesContent":["<template>\n  <view class=\"page\">\n    <uni-card :is-shadow=\"false\" class=\"question-card\">\n      <view class=\"title\">\n        <text class=\"type-tag\">{{ renderType(question.type) }}</text>\n        {{ question.title }}\n      </view>\n      <view class=\"meta-row\">\n        <uni-tag :text=\"getCategoryName(question.categoryId)\" size=\"small\" type=\"success\" />\n        <uni-tag :text=\"'分值 ' + question.score\" size=\"small\" type=\"primary\" />\n        <text class=\"muted\">预计 {{ question.duration }}s</text>\n      </view>\n\n      <view class=\"option-area\" v-if=\"question.type === 'multiple'\">\n        <checkbox-group @change=\"onMultipleChange\">\n          <label v-for=\"opt in question.options\" :key=\"opt.value\" class=\"option\">\n            <checkbox\n              :value=\"opt.value\"\n              :checked=\"selected.includes(opt.value)\"\n              color=\"#2563eb\"\n              style=\"transform: scale(0.9);\"\n            />\n            <text class=\"option-text\">{{ opt.value }}. {{ opt.text }}</text>\n          </label>\n        </checkbox-group>\n      </view>\n\n      <view class=\"option-area\" v-else>\n        <radio-group @change=\"onSingleChange\">\n          <label v-for=\"opt in question.options\" :key=\"opt.value\" class=\"option\">\n            <radio\n              :value=\"opt.value\"\n              :checked=\"selected.includes(opt.value)\"\n              color=\"#2563eb\"\n              style=\"transform: scale(0.9);\"\n            />\n            <text class=\"option-text\">{{ opt.value }}. {{ opt.text }}</text>\n          </label>\n        </radio-group>\n      </view>\n\n      <view class=\"actions\">\n        <button\n          type=\"primary\"\n          class=\"primary-btn\"\n          :loading=\"submitting\"\n          :disabled=\"!selected.length\"\n          @tap=\"handleSubmit\"\n        >\n          提交答案\n        </button>\n        <button class=\"ghost-btn\" @tap=\"backToList\">返回题库</button>\n      </view>\n    </uni-card>\n\n    <uni-card v-if=\"feedback\" title=\"判题结果\" :is-shadow=\"false\">\n      <view class=\"result\" :class=\"{ correct: feedback.isCorrect, wrong: !feedback.isCorrect }\">\n        <uni-icons\n          :type=\"feedback.isCorrect ? 'checkmarkempty' : 'closeempty'\"\n          :color=\"feedback.isCorrect ? '#10b981' : '#ef4444'\"\n          size=\"24\"\n        />\n        <text class=\"result-text\">{{ feedback.isCorrect ? '回答正确' : '回答错误' }}</text>\n      </view>\n      <view class=\"answer\">\n        <text class=\"muted\">正确答案：</text>\n        <text class=\"answer-text\">{{ feedback.correctAnswer.join(', ') }}</text>\n      </view>\n      <view class=\"explain\">\n        <text class=\"muted\">解析：</text>\n        <text>{{ feedback.explanation }}</text>\n      </view>\n      <view class=\"progress-info\" v-if=\"feedback.progress\">\n        <text class=\"muted\">当前积分：{{ feedback.progress.points }}</text>\n        <text class=\"muted\">总进度：{{ feedback.progress.percent }}%</text>\n      </view>\n    </uni-card>\n  </view>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\nimport { onLoad } from '@dcloudio/uni-app';\nimport {\n  fetchCategories,\n  fetchQuestionDetail,\n  submitAnswer as submitAnswerApi,\n} from '@/api/mock.js';\n\nconst question = ref({\n  options: [],\n});\nconst categories = ref([]);\nconst selected = ref([]);\nconst feedback = ref(null);\nconst submitting = ref(false);\n\nconst renderType = (type) => {\n  if (type === 'multiple') return '多选';\n  if (type === 'truefalse') return '判断';\n  return '单选';\n};\n\nconst onSingleChange = (e) => {\n  selected.value = [e.detail.value];\n};\n\nconst onMultipleChange = (e) => {\n  selected.value = e.detail.value || [];\n};\n\nconst getCategoryName = (id) =>\n  categories.value.find((c) => c.id === id)?.name || '未分类';\n\nconst backToList = () => {\n  uni.switchTab({ url: '/pages/questions/index' });\n};\n\nconst loadData = async (id) => {\n  const [catList, detail] = await Promise.all([fetchCategories(), fetchQuestionDetail(id)]);\n  categories.value = catList;\n  if (!detail?.id) {\n    uni.showToast({ title: '题目不存在', icon: 'none' });\n    question.value = { options: [] };\n    return;\n  }\n  question.value = detail;\n};\n\nconst handleSubmit = async () => {\n  if (!question.value.id) return;\n  if (!selected.value.length) {\n    uni.showToast({ title: '请选择答案', icon: 'none' });\n    return;\n  }\n  submitting.value = true;\n  try {\n    const res = await submitAnswerApi({\n      questionId: question.value.id,\n      chosen: selected.value,\n      spentSeconds: question.value.duration || 20,\n    });\n    feedback.value = res;\n    uni.showToast({\n      title: res.isCorrect ? '回答正确' : '再接再厉',\n      icon: res.isCorrect ? 'success' : 'none',\n    });\n  } catch (err) {\n    console.error(err);\n    uni.showToast({ title: '提交失败', icon: 'none' });\n  } finally {\n    submitting.value = false;\n  }\n};\n\nonLoad((options) => {\n  if (options?.id) {\n    loadData(options.id);\n  }\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.page {\n  padding: 20rpx;\n}\n\n.question-card {\n  border-radius: 18rpx;\n}\n\n.title {\n  font-size: 32rpx;\n  font-weight: 700;\n  line-height: 1.6;\n  display: flex;\n  align-items: center;\n  gap: 12rpx;\n}\n\n.type-tag {\n  display: inline-flex;\n  padding: 4rpx 12rpx;\n  background: #eef2ff;\n  color: #4f46e5;\n  border-radius: 10rpx;\n  font-size: 22rpx;\n}\n\n.meta-row {\n  display: flex;\n  align-items: center;\n  gap: 12rpx;\n  margin: 12rpx 0 8rpx;\n}\n\n.muted {\n  color: #6b7280;\n  font-size: 24rpx;\n}\n\n.option-area {\n  margin-top: 12rpx;\n}\n\n.option {\n  display: flex;\n  align-items: center;\n  padding: 18rpx 16rpx;\n  border-radius: 14rpx;\n  background: #f9fafb;\n  margin-bottom: 12rpx;\n}\n\n.option-text {\n  margin-left: 12rpx;\n  font-size: 28rpx;\n  color: #1f2937;\n}\n\n.actions {\n  display: flex;\n  gap: 12rpx;\n  margin-top: 20rpx;\n}\n\n.primary-btn {\n  flex: 1;\n  background: linear-gradient(135deg, #2563eb, #1d4ed8);\n  color: #fff;\n  border: none;\n}\n\n.ghost-btn {\n  flex: 1;\n  background: #fff;\n  color: #2563eb;\n  border: 2rpx solid #2563eb;\n}\n\n.result {\n  display: flex;\n  align-items: center;\n  gap: 10rpx;\n  margin-bottom: 12rpx;\n}\n\n.result.correct {\n  color: #10b981;\n}\n\n.result.wrong {\n  color: #ef4444;\n}\n\n.answer-text {\n  font-weight: 600;\n  color: #111827;\n}\n\n.explain {\n  margin-top: 8rpx;\n  color: #1f2937;\n  line-height: 1.5;\n}\n\n.progress-info {\n  margin-top: 12rpx;\n  display: flex;\n  gap: 16rpx;\n}\n</style>\n","import MiniProgramPage from 'E:/javaproject/practice-app/practice-app-ui/pages/questions/detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","fetchCategories","fetchQuestionDetail","submitAnswerApi","onLoad"],"mappings":";;;;;;;;;;;;;;;;;;AAyFA,UAAM,WAAWA,cAAAA,IAAI;AAAA,MACnB,SAAS,CAAE;AAAA,IACb,CAAC;AACD,UAAM,aAAaA,cAAAA,IAAI,CAAA,CAAE;AACzB,UAAM,WAAWA,cAAAA,IAAI,CAAA,CAAE;AACvB,UAAM,WAAWA,cAAAA,IAAI,IAAI;AACzB,UAAM,aAAaA,cAAAA,IAAI,KAAK;AAE5B,UAAM,aAAa,CAAC,SAAS;AAC3B,UAAI,SAAS;AAAY,eAAO;AAChC,UAAI,SAAS;AAAa,eAAO;AACjC,aAAO;AAAA,IACT;AAEA,UAAM,iBAAiB,CAAC,MAAM;AAC5B,eAAS,QAAQ,CAAC,EAAE,OAAO,KAAK;AAAA,IAClC;AAEA,UAAM,mBAAmB,CAAC,MAAM;AAC9B,eAAS,QAAQ,EAAE,OAAO,SAAS,CAAA;AAAA,IACrC;AAEA,UAAM,kBAAkB,CAAC,OAAE;;AACzB,+BAAW,MAAM,KAAK,CAAC,MAAM,EAAE,OAAO,EAAE,MAAxC,mBAA2C,SAAQ;AAAA;AAErD,UAAM,aAAa,MAAM;AACvBC,oBAAAA,MAAI,UAAU,EAAE,KAAK,yBAA0B,CAAA;AAAA,IACjD;AAEA,UAAM,WAAW,OAAO,OAAO;AAC7B,YAAM,CAAC,SAAS,MAAM,IAAI,MAAM,QAAQ,IAAI,CAACC,SAAAA,mBAAmBC,SAAAA,oBAAoB,EAAE,CAAC,CAAC;AACxF,iBAAW,QAAQ;AACnB,UAAI,EAAC,iCAAQ,KAAI;AACfF,sBAAG,MAAC,UAAU,EAAE,OAAO,SAAS,MAAM,OAAM,CAAE;AAC9C,iBAAS,QAAQ,EAAE,SAAS,CAAE,EAAA;AAC9B;AAAA,MACD;AACD,eAAS,QAAQ;AAAA,IACnB;AAEA,UAAM,eAAe,YAAY;AAC/B,UAAI,CAAC,SAAS,MAAM;AAAI;AACxB,UAAI,CAAC,SAAS,MAAM,QAAQ;AAC1BA,sBAAG,MAAC,UAAU,EAAE,OAAO,SAAS,MAAM,OAAM,CAAE;AAC9C;AAAA,MACD;AACD,iBAAW,QAAQ;AACnB,UAAI;AACF,cAAM,MAAM,MAAMG,sBAAgB;AAAA,UAChC,YAAY,SAAS,MAAM;AAAA,UAC3B,QAAQ,SAAS;AAAA,UACjB,cAAc,SAAS,MAAM,YAAY;AAAA,QAC/C,CAAK;AACD,iBAAS,QAAQ;AACjBH,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO,IAAI,YAAY,SAAS;AAAA,UAChC,MAAM,IAAI,YAAY,YAAY;AAAA,QACxC,CAAK;AAAA,MACF,SAAQ,KAAK;AACZA,sBAAAA,MAAA,MAAA,SAAA,qCAAc,GAAG;AACjBA,sBAAG,MAAC,UAAU,EAAE,OAAO,QAAQ,MAAM,OAAM,CAAE;AAAA,MACjD,UAAY;AACR,mBAAW,QAAQ;AAAA,MACpB;AAAA,IACH;AAEAI,kBAAM,OAAC,CAAC,YAAY;AAClB,UAAI,mCAAS,IAAI;AACf,iBAAS,QAAQ,EAAE;AAAA,MACpB;AAAA,IACH,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9JD,GAAG,WAAW,eAAe;"}