{"version":3,"file":"practice.js","sources":["pages/questions/practice.vue","D:/HBuilderX.4.85.2025110510/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcXVlc3Rpb25zL3ByYWN0aWNlLnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"page\">\r\n    <view class=\"header\">\r\n      <view class=\"title-row\">\r\n        <view>\r\n          <text class=\"breadcrumb\">{{ session.parent?.name || '题库' }}</text>\r\n          <view class=\"title\">\r\n            <text>{{ session.category?.name || '练习' }}</text>\r\n            <uni-tag\r\n              :text=\"session.mode === 'random' ? '随机练习' : '顺序练习'\"\r\n              :type=\"session.mode === 'random' ? 'warning' : 'primary'\"\r\n              size=\"mini\"\r\n            />\r\n          </view>\r\n        </view>\r\n        <view class=\"progress\">\r\n          <text class=\"muted\">进度</text>\r\n          <text class=\"count\">{{ currentIndex + 1 }}/{{ session.total }}</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <view v-if=\"loading\" class=\"empty\">\n      <uni-load-more status=\"loading\" />\n    </view>\n\n    <view v-else-if=\"!session.total\" class=\"empty\">\n      <text class=\"muted\">暂无题目，稍后再试</text>\n    </view>\n\n    <swiper\n      v-else\n      class=\"swiper\"\n      :current=\"currentIndex\"\n      :circular=\"false\"\n      @change=\"onSwipe\"\n    >\n      <swiper-item v-for=\"(item, idx) in questions\" :key=\"item.id\">\r\n        <view class=\"card\">\r\n          <view class=\"question-title\">\r\n            <view class=\"type-tag\">{{ renderType(item.type) }}</view>\r\n            <text class=\"text\">{{ idx + 1 }}、{{ item.title }}</text>\r\n          </view>\r\n\r\n          <view v-if=\"isMultiple(item.type)\" class=\"options\">\n            <checkbox-group @change=\"onMultipleChange\">\n              <label v-for=\"opt in item.options\" :key=\"opt.value\" class=\"option\">\n                <checkbox\n                  :value=\"opt.value\"\n                  :checked=\"currentSelected.includes(opt.value)\"\r\n                  color=\"#2563eb\"\r\n                  style=\"transform: scale(0.9);\"\r\n                />\r\n                <text class=\"opt-text\">{{ opt.value }}. {{ opt.text }}</text>\r\n              </label>\r\n            </checkbox-group>\n          </view>\n          <view v-else-if=\"isShortAnswer(item.type)\" class=\"options\">\n            <textarea\n              class=\"short-input\"\n              :value=\"currentSelected[0] || ''\"\n              placeholder=\"请输入答案\"\n              auto-height\n              @input=\"onTextChange\"\n            />\n          </view>\n          <view v-else class=\"options\">\n            <radio-group @change=\"onSingleChange\">\n              <label v-for=\"opt in item.options\" :key=\"opt.value\" class=\"option\">\n                <radio\n                  :value=\"opt.value\"\n                  :checked=\"currentSelected.includes(opt.value)\"\n                  color=\"#2563eb\"\r\n                  style=\"transform: scale(0.9);\"\r\n                />\r\n                <text class=\"opt-text\">{{ opt.value }}. {{ opt.text }}</text>\r\n              </label>\r\n            </radio-group>\r\n          </view>\r\n\r\n          <view class=\"action-row\">\r\n            <button\r\n              type=\"primary\"\r\n              class=\"submit\"\r\n              :loading=\"submitting\"\r\n              :disabled=\"!currentSelected.length || hasAnswered\"\r\n              @tap=\"submitAnswer\"\r\n            >\r\n              {{ hasAnswered ? '已提交' : '提交答案' }}\r\n            </button>\r\n            <text v-if=\"feedback[currentQuestionId]?.isCorrect\" class=\"muted\">回答正确，自动跳转下一题</text>\r\n          </view>\r\n\r\n          <view\r\n            v-if=\"feedback[currentQuestionId]\"\r\n            class=\"analysis\"\r\n            :class=\"feedback[currentQuestionId].isCorrect ? 'success' : 'danger'\"\r\n          >\r\n            <view class=\"result\">\r\n              <uni-icons\r\n                :type=\"feedback[currentQuestionId].isCorrect ? 'checkmarkempty' : 'closeempty'\"\r\n                :color=\"feedback[currentQuestionId].isCorrect ? '#10b981' : '#ef4444'\"\r\n                size=\"22\"\r\n              />\r\n              <text class=\"result-text\">\r\n                {{ feedback[currentQuestionId].isCorrect ? '回答正确' : '回答错误' }}\r\n              </text>\r\n            </view>\r\n            <view class=\"answer\">\r\n              <text class=\"muted\">正确答案：</text>\r\n              <text class=\"answer-text\">{{ feedback[currentQuestionId].correctAnswer.join(', ') }}</text>\r\n            </view>\r\n            <view class=\"explain\">\r\n              <text class=\"muted\">解析：</text>\r\n              <text>{{ feedback[currentQuestionId].explanation }}</text>\r\n            </view>\r\n            <view v-if=\"!feedback[currentQuestionId].isCorrect\" class=\"swipe-tip\">\r\n              左滑切换下一题\r\n            </view>\r\n          </view>\r\n        </view>\r\n      </swiper-item>\r\n    </swiper>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\nimport { computed, reactive, ref, watch } from 'vue';\nimport { onLoad } from '@dcloudio/uni-app';\nimport { fetchPracticeRandom, fetchPracticeSequence } from '@/api/questions.js';\nimport { submitAnswer as submitAnswerApi } from '@/api/answers.js';\nimport { fetchCategoryTree, flattenCategoryTree } from '@/api/categories.js';\n\nconst questions = ref([]);\nconst session = reactive({\n  total: 0,\n  mode: 'order',\n  category: null,\n  parent: null,\n});\nconst pagination = reactive({\n  page: 1,\n  size: 10,\n  total: 0,\n  loading: false,\n});\nconst params = reactive({\n  categoryId: '',\n  mode: 'order',\n  count: 0,\n});\nconst currentIndex = ref(0);\nconst answers = reactive({});\nconst feedback = reactive({});\nconst submitting = ref(false);\nconst loading = ref(false);\n\nconst currentQuestionId = computed(() => questions.value[currentIndex.value]?.id);\nconst currentSelected = computed(() => answers[currentQuestionId.value] || []);\nconst hasAnswered = computed(() => Boolean(feedback[currentQuestionId.value]));\n\nconst renderType = (type) => {\n  const t = String(type || '').toLowerCase();\n  if (t.includes('multiple')) return '多选';\n  if (t.includes('true') || t.includes('judge')) return '判断';\n  if (t.includes('fill') || t.includes('short')) return '简答';\n  return '单选';\n};\n\nconst isMultiple = (type) => String(type || '').toLowerCase().includes('multiple');\nconst isShortAnswer = (type) => {\n  const t = String(type || '').toLowerCase();\n  return t.includes('fill') || t.includes('short');\n};\n\nconst onSingleChange = (e) => {\n  if (!currentQuestionId.value) return;\n  answers[currentQuestionId.value] = [e.detail.value];\n};\n\nconst onMultipleChange = (e) => {\n  if (!currentQuestionId.value) return;\n  answers[currentQuestionId.value] = e.detail.value || [];\n};\n\nconst onTextChange = (e) => {\n  if (!currentQuestionId.value) return;\n  answers[currentQuestionId.value] = [e.detail.value || ''];\n};\n\nconst loadCategoryInfo = async (categoryId) => {\n  try {\n    const tree = await fetchCategoryTree();\n    const flat = flattenCategoryTree(tree);\n    const current = flat.find((c) => `${c.id}` === `${categoryId}`);\n    const parent = flat.find((c) => c.id === current?.parentId);\n    session.category = current || null;\n    session.parent = parent || null;\n  } catch (err) {\n    console.error(err);\n  }\n};\n\nconst initAnswers = () => {\n  questions.value.forEach((q) => {\n    if (!answers[q.id]) {\n      answers[q.id] = [];\n    }\n  });\n};\n\nconst loadRandom = async () => {\n  const limit = params.count > 0 ? params.count : 5;\n  const list = await fetchPracticeRandom({ categoryId: params.categoryId, limit });\n  questions.value = list;\n  session.total = list.length;\n  pagination.total = list.length;\n  pagination.page = 1;\n  pagination.size = list.length || limit;\n  session.mode = 'random';\n  initAnswers();\n};\n\nconst loadSequencePage = async (pageToLoad = 1, append = false) => {\n  if (pagination.loading) return;\n  pagination.loading = true;\n  try {\n    const size = params.count && params.count > 0 ? params.count : pagination.size || 10;\n    const res = await fetchPracticeSequence({\n      categoryId: params.categoryId,\n      page: pageToLoad,\n      size,\n    });\n    const list = res.records || [];\n    const limitedTotal =\n      params.count && params.count > 0\n        ? Math.min(params.count, res.total || params.count)\n        : res.total || list.length;\n    pagination.total = limitedTotal;\n    session.total = limitedTotal;\n    pagination.size = res.size || size;\n    pagination.page = pageToLoad;\n    questions.value = append ? [...questions.value, ...list] : list;\n    initAnswers();\n  } catch (err) {\n    console.error(err);\n    uni.showToast({ title: '加载题目失败', icon: 'none' });\n  } finally {\n    pagination.loading = false;\n  }\n};\n\nconst loadSession = async (options) => {\n  loading.value = true;\n  try {\n    params.categoryId = options?.categoryId ? Number(options.categoryId) || options.categoryId : '';\n    if (!params.categoryId) {\n      uni.showToast({ title: '缺少分类参数', icon: 'none' });\n      return;\n    }\n    params.count = options?.count ? Number(options.count) : 0;\n    params.mode = options?.mode === 'random' ? 'random' : 'order';\n    await loadCategoryInfo(params.categoryId);\n    if (params.mode === 'random') {\n      await loadRandom();\n    } else {\n      await loadSequencePage(1, false);\n    }\n    currentIndex.value = 0;\n  } catch (err) {\n    console.error(err);\n    uni.showToast({ title: err.message || '加载失败', icon: 'none' });\n  } finally {\n    loading.value = false;\n  }\n};\n\nconst maybeLoadMore = async () => {\n  if (session.mode !== 'order') return;\n  if (questions.value.length >= session.total) return;\n  if (pagination.loading) return;\n  await loadSequencePage(pagination.page + 1, true);\n};\n\nconst submitAnswer = async () => {\n  const question = questions.value[currentIndex.value];\n  if (!question) return;\n  const chosen = (answers[question.id] || []).map((v) => (typeof v === 'string' ? v.trim() : v));\n  if (!chosen.length || !chosen.some((v) => v)) {\n    uni.showToast({ title: '请选择答案', icon: 'none' });\n    return;\n  }\n  if (feedback[question.id]) return;\n  submitting.value = true;\n  try {\n    const res = await submitAnswerApi({\n      questionId: question.id,\n      chosen,\n      timeSpent: question.duration || 20,\n    });\n    feedback[question.id] = res;\n    if (res.isCorrect) {\n      uni.showToast({ title: '正确，自动跳转', icon: 'success' });\n      setTimeout(() => goNext(true), 500);\n    } else {\n      uni.showToast({ title: '查看解析，左滑下一题', icon: 'none' });\n    }\n  } catch (err) {\n    console.error(err);\n    uni.showToast({ title: '提交失败', icon: 'none' });\n  } finally {\n    submitting.value = false;\n  }\n};\n\nconst goNext = (auto = false) => {\n  if (currentIndex.value >= session.total - 1) {\n    uni.showToast({ title: '练习完成', icon: 'success' });\n    return;\n  }\n  currentIndex.value += 1;\n  if (currentIndex.value >= questions.value.length - 2) {\n    maybeLoadMore();\n  }\n  const nextId = questions.value[currentIndex.value]?.id;\n  if (auto && nextId && feedback[nextId]?.isCorrect) {\n    goNext(true);\n  }\n};\n\nconst onSwipe = (e) => {\n  currentIndex.value = e.detail.current;\n  if (currentIndex.value >= questions.value.length - 2) {\n    maybeLoadMore();\n  }\n};\n\nwatch(currentQuestionId, (id) => {\n  if (id && !answers[id]) {\n    answers[id] = [];\n  }\n});\n\nonLoad((options) => {\n  loadSession(options);\n});\n</script>\n\r\n<style lang=\"scss\" scoped>\r\n.page {\r\n  min-height: 100vh;\r\n  padding: 16rpx;\r\n  background: #f7f8fb;\r\n}\r\n\r\n.header {\r\n  background: #ffffff;\r\n  border-radius: 16rpx;\r\n  padding: 14rpx;\r\n  box-shadow: 0 12rpx 30rpx rgba(31, 56, 88, 0.06);\r\n}\r\n\r\n.title-row {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.breadcrumb {\r\n  color: #6b7280;\r\n  font-size: 24rpx;\r\n}\r\n\r\n.title {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8rpx;\r\n  font-size: 32rpx;\r\n  font-weight: 700;\r\n  margin-top: 4rpx;\r\n}\r\n\r\n.progress {\r\n  display: flex;\r\n  align-items: baseline;\r\n  gap: 8rpx;\r\n}\r\n\r\n.muted {\r\n  color: #6b7280;\r\n  font-size: 24rpx;\r\n}\r\n\r\n.count {\r\n  font-size: 28rpx;\r\n  font-weight: 700;\r\n  color: #111827;\r\n}\r\n\r\n.swiper {\r\n  margin-top: 12rpx;\r\n  height: calc(100vh - 220rpx);\r\n}\r\n\r\n.card {\r\n  background: #ffffff;\r\n  border-radius: 18rpx;\r\n  padding: 20rpx;\r\n  box-shadow: 0 14rpx 34rpx rgba(31, 56, 88, 0.08);\r\n  height: calc(100% - 20rpx);\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.question-title {\r\n  display: flex;\r\n  gap: 10rpx;\r\n  font-size: 30rpx;\r\n  font-weight: 700;\r\n  color: #111827;\r\n}\r\n\r\n.type-tag {\r\n  padding: 6rpx 12rpx;\r\n  background: #e0ecff;\r\n  color: #1d4ed8;\r\n  border-radius: 10rpx;\r\n  font-size: 24rpx;\r\n}\r\n\r\n.options {\n  margin-top: 12rpx;\n  flex: 1;\n}\n\n.short-input {\n  width: 100%;\n  min-height: 200rpx;\n  padding: 14rpx;\n  border-radius: 12rpx;\n  border: 2rpx solid #e5e7eb;\n  background: #f9fafb;\n  box-sizing: border-box;\n  font-size: 28rpx;\n  color: #1f2937;\n}\n\n.option {\n  display: flex;\n  align-items: center;\n  padding: 14rpx 10rpx;\n  border-radius: 12rpx;\n  background: #f9fafb;\r\n  margin-bottom: 10rpx;\r\n}\r\n\r\n.opt-text {\r\n  margin-left: 10rpx;\r\n  font-size: 28rpx;\r\n  color: #1f2937;\r\n}\r\n\r\n.action-row {\r\n  margin-top: 10rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12rpx;\r\n}\r\n\r\n.submit {\r\n  flex: 1;\r\n  background: linear-gradient(135deg, #2563eb, #1d4ed8);\r\n  color: #fff;\r\n  border: none;\r\n}\r\n\r\n.analysis {\r\n  margin-top: 12rpx;\r\n  padding: 14rpx;\r\n  border-radius: 12rpx;\r\n  background: #f9fafb;\r\n}\r\n\r\n.analysis.success {\r\n  border: 1rpx solid #a7f3d0;\r\n}\r\n\r\n.analysis.danger {\r\n  border: 1rpx solid #fecdd3;\r\n}\r\n\r\n.result {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8rpx;\r\n}\r\n\r\n.result-text {\r\n  font-weight: 600;\r\n}\r\n\r\n.answer {\r\n  margin-top: 8rpx;\r\n}\r\n\r\n.answer-text {\r\n  font-weight: 600;\r\n  color: #111827;\r\n}\r\n\r\n.explain {\r\n  margin-top: 6rpx;\r\n  color: #1f2937;\r\n  line-height: 1.5;\r\n}\r\n\r\n.swipe-tip {\r\n  margin-top: 6rpx;\r\n  color: #ef4444;\r\n  font-size: 24rpx;\r\n}\r\n\r\n.empty {\r\n  margin-top: 40rpx;\r\n  text-align: center;\r\n  color: #6b7280;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'E:/project/practice-app/practice-app-ui/pages/questions/practice.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","reactive","computed","fetchCategoryTree","flattenCategoryTree","uni","fetchPracticeRandom","fetchPracticeSequence","submitAnswerApi","watch","onLoad"],"mappings":"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"}